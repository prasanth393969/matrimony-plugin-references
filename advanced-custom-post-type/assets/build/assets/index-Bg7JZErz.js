import{j as e,u as a,g as ss,h as ot,p as dt,f as F,i as Ca,k as wa,m as Sa,n as ut,o as is,q as rs,v as os,w as ds,x as yl,y as Fe,z as us,A as cs,d as ct,t as pt,B as ps,C as xl,I as hs,r as ms,D as fs,e as bs}from"./fields-wnm5Jtc6.js";import{a as k,R as q,u as el,d as vs,r as xs,j as gs,h as ys}from"./vendor-D21mNUGX.js";import{n as Re,b as ke,u as ql,B as ht,D as js,L as Ns,_ as aa,a as Cs}from"./Layout-CFk9FOHT.js";import{P as d,u as ae,B as ee,s as K,aL as mt,I as B,w as je,ac as sl,aM as He,a as ne,aN as rl,aO as ws,aE as Se,aP as we,aQ as Ml,A as jl,D as ye,aR as Ss,i as Ne,J as Ve,p as Ta,aS as ft,aT as Ll,F as ze,y as Ra,aU as Vl,aV as Da,aW as ol,aX as bt,aY as re,aZ as Xe,a_ as vt,a$ as Ea,b0 as Bl,b1 as Ts,b2 as Rs,b3 as xt,b4 as gt,M as yt,b5 as Fa,b6 as dl,b7 as Oa,b8 as jt,b9 as Nt,ba as ka,bb as Ds,bc as Ct,bd as Wa,be as Es,bf as Fs,bg as Al,bh as Dl,bi as Os,bj as ks,bk as _s,bl as Is,bm as qs,bn as Ms,bo as Vs,bp as As,bq as Ps,br as Ls,bs as Bs,bt as $s,bu as Us,bv as Ks,bw as Gs,bx as Hs,by as zs,bz as Ys,bA as Ws,bB as Js,bC as Xs,bD as Qs,bE as Zs,bF as ei,bG as li,bH as ai,bI as ti,bJ as ni,bK as si,bL as ii,bM as ri,bN as oi,bO as $l,bP as Ja,bQ as wt,bR as Xa,S as Qa,bS as Za,bT as di,U as ui,bU as ci,W as pi,bV as hi,Y as mi,bW as fi,m as et,c as bi,L as vi,bX as xi,bY as gi}from"./index-pmrLY__j.js";import{u as W,c as ve,b as P,g as ul,a as yi,F as ji}from"./index.esm-DCQn2FO4.js";import{I as ue}from"./Input-Cutb8bBf.js";import{T as U}from"./index-DvlEPr8_.js";import{M as Ce}from"./index-76LCHVw3.js";import{a as cl}from"./validation-Dyv8Y-XS.js";import{I as fe}from"./InputHidden-B-jHubUl.js";import{d as Qe,w as Ze}from"./bundle.esm.min-B-HQpnrw.js";import{d as _a,C as Ni,T as Ci}from"./Textarea-BqtgH3UM.js";import{u as Ie}from"./index-DRV1MUeg.js";import{L as Z}from"./Label-aklbfFQf.js";import{S as le}from"./Select-DRmfXoMp.js";import{T as ra}from"./Toggle-DrKXNyA3.js";import{B as Ge}from"./ButtonSwitch-Qp-ui217.js";import{m as pe}from"./metaTypes-Bb9tjSPe.js";import{S as Te}from"./SelectMulti-CzFQ1GVp.js";import{u as Ye,C as We,a as Ae}from"./sortable.esm-C-GypyhB.js";import{M as Ul}from"./index-in9snbYX.js";import{C as lt}from"./index-BFwVLiS5.js";import{S as _e}from"./index-TA6SeI1j.js";import{T as wi,a as fl}from"./index-D8v0Ahx2.js";import{F as Si}from"./index-kc5wfrYu.js";import{c as Ia}from"./index-DUg31hI9.js";import{p as Ti}from"./posts-QpkBeGIZ.js";import{P as Ri}from"./index-D0W-z-hb.js";const St=({index:t,boxId:n,setActiveTab:r})=>{const l=ae(),{control:s}=W(),{remove:i}=ve({control:s,name:"boxes"}),[o,u]=k.useState(!1),h=[e.jsx(ee,{style:K.SUCCESS,onClick:p=>{p.preventDefault(),l(mt(n)),i(t),u(!o),r&&r(0)},children:a("Yes")}),e.jsx(ee,{style:K.DANGER,onClick:p=>{p.preventDefault(),u(!o)},children:a("No")})];return e.jsxs(q.Fragment,{children:[e.jsx(Ce,{title:a("Confirm deleting meta box"),visible:o,buttons:h,children:a("Are you sure?")}),e.jsx("a",{href:"#",onClick:p=>{p.preventDefault(),u(!o)},children:e.jsx(B,{icon:"bx-trash",width:18,color:"#F94144"})})]})};St.propTypes={setActiveTab:d.func,index:d.number.isRequired,boxId:d.string.isRequired};const Tt=({box:t})=>{const r=document.globals.globals,{setValue:l}=W(),s=ae(),{id:i}=el(),[o,u]=k.useState(!1),[h,p]=k.useState(null),[c,j]=k.useState(!1);k.useEffect(()=>{p(null),j(!1)},[o]);const y=()=>{je("copyMetaBoxAction",{boxId:t.id,targetGroupId:h,delete:c}).then(b=>{b.success?(Re.success(`${a("Meta box was successfully copied")}.`),u(!o),i===t.groupId&&s(sl({id:i})).then(v=>{s(He(v.payload)),l("id",i),l("name",v.payload.name),l("label",v.payload.label),l("display",v.payload.display),v.payload.belongs&&v.payload.belongs.map((m,f)=>{l(`belongs.${f}.id`,m.id),l(`belongs.${f}.belongsTo`,m.belongsTo),l(`belongs.${f}.operator`,m.operator),l(`belongs.${f}.find`,m.find),l(`belongs.${f}.logic`,m.logic)}),v.payload.boxes&&v.payload.boxes.map((m,f)=>{l(`boxes.${f}`,m)})}).catch(v=>{console.error(v)})):Re.error(b.error)}).catch(b=>console.error(b))};return e.jsxs(q.Fragment,{children:[e.jsx(Ce,{title:a("Copy this meta box"),visible:o,buttons:[],children:e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label i-flex-center s-4",htmlFor:"group",children:a("Meta group")}),e.jsx("div",{className:"acpt-select",children:e.jsx("select",{id:"group",className:"form-control default",onChangeCapture:b=>p(b.target.value),children:r.find.meta.map(b=>e.jsx("option",{value:b.value,children:b.label}))})})]}),h&&h!=="Select"&&e.jsxs("div",{children:[e.jsxs("div",{className:"w-100 i-flex-center s-4 mb-8",children:[e.jsx("input",{type:"checkbox",defaultValue:c,onClick:()=>j(!c),id:"deleteBox"}),e.jsx("label",{htmlFor:"deleteBox",children:a("Delete the meta box after copying")})]}),e.jsx(ee,{onClick:()=>y(),style:K.PRIMARY,children:a("Copy")})]})]})}),e.jsx("a",{href:"",onClick:b=>{b.preventDefault(),u(!o)},children:e.jsx(B,{icon:"bx:copy",width:18})})]})};Tt.propTypes={box:d.object.isRequired};const pl=({element:t,elementType:n})=>{const r=ae(),{selectedElements:l}=ne(o=>o.metaState),s=()=>l.filter(u=>u.id===t.id).length>0,i=o=>{r(rl({element:t,selected:o,type:n})),t.children&&t.children.map(u=>{r(rl({element:u,selected:o,type:n})),u.children&&u.children.map(h=>{r(rl({element:h,selected:o,type:n}))})})};return e.jsx(U,{label:e.jsxs("label",{className:"checkbox",htmlFor:`select-${t.id}`,style:{top:"3px"},children:[e.jsx("input",{id:`select-${t.id}`,type:"checkbox",checked:s(),onChange:o=>i(o.target.checked)}),e.jsx("span",{})]}),icon:!1,tip:a(s()?"Deselect this element":"Select this element")})};pl.propTypes={element:d.object.isRequired,elementType:d.oneOf(["box","block","field"]).isRequired};const Rt=({boxId:t,boxIndex:n,elementId:r,elementIndex:l})=>{const s=ae(),i=()=>`boxes.${n}.visibilityConditions`,{control:o}=W(),{remove:u}=ve({control:o,name:i()}),[h,p]=k.useState(!1),c=[e.jsx(ee,{style:K.SUCCESS,onClick:j=>{j.preventDefault(),s(ws({boxId:t,elementId:r})),u(l),p(!h)},children:a("Yes")}),e.jsx(ee,{style:K.DANGER,onClick:j=>{j.preventDefault(),p(!h)},children:a("No")})];return e.jsxs("div",{children:[e.jsx(Ce,{title:a("Confirm deleting conditional rendering element"),visible:h,buttons:c,children:a("Are you sure?")}),e.jsx("a",{href:"#",onClick:j=>{j.preventDefault(),p(!h)},children:e.jsx(U,{icon:!1,tip:a("Delete"),label:e.jsx(B,{icon:"bx-trash",width:18,color:"#F94144"})})})]})};Rt.propTypes={boxId:d.string.isRequired,boxIndex:d.number.isRequired,elementId:d.string.isRequired,elementIndex:d.number.isRequired};const Dt=({elementIndex:t,boxIndex:n,boxId:r,element:l,isLast:s})=>{const{POST_TAX:i,POST_ID:o,USER_ID:u,optionPage:h}=document.globals.globals.find;ne(M=>M.metaState);const p=M=>`boxes.${n}.visibilityConditions.${t}.${M}`,{register:c,formState:{errors:j},control:y,setValue:b,clearErrors:v}=W(),m=P({control:y,name:"belongs"}),f=P({control:y,name:p("type")}),E=P({control:y,name:p("operator")}),D=P({control:y,name:p("value")}),R=P({control:y,name:p("logic")}),x=P({control:y,name:p("frontEnd")}),O=P({control:y,name:p("backEnd")}),[g,S]=k.useState([]);k.useEffect(()=>{m&&m.map(M=>{M.belongsTo===pe.TAXONOMY&&je("fetchTermsAction",{taxonomy:M.find,format:"short"}).then(V=>{Se(V)&&Se(g)&&S([...g,...V])})})},[m]);const C=()=>{let M=!1,V=[],G=[{value:null,label:a("Select")}];if(m&&m.map(ie=>{ie.belongsTo===pe.CUSTOM_POST_TYPE&&(V.push({value:we({type:"POST_ID",value:"POST_ID"}),label:a("Post")}),M=!0),ie.belongsTo===pe.TAXONOMY&&V.push({value:we({type:"TERM_ID",value:"TERM_ID"}),label:a("Term")}),ie.belongsTo===pe.USER&&V.push({value:we({type:"USER_ID",value:"USER_ID"}),label:a("User")}),ie.belongsTo===pe.OPTION_PAGE&&V.push({value:we({type:"OPTION_PAGE",value:"OPTION_PAGE"}),label:a("Option page")})}),V&&V.length>0&&G.push({label:a("This box"),options:V}),M&&i&&i.length>0){let ie={label:a("Related taxonomies"),options:[]};i.map(he=>{he.value!==null&&ie.options.push({value:we({type:"TAXONOMY",value:he.label}),label:he.label})}),G.push(ie)}if(u&&u.length>0){let ie={label:a("Users"),options:[{value:we({type:"USER",value:a("Logged user")}),label:a("Logged user")}]};G.push(ie)}return G},T=()=>typeof f>"u",N=()=>{if(!f||typeof f>"u")return[{value:null,label:a("Select")}];const V=(typeof f=="object"?f:Ml(f)).type;return V==="POST_ID"||V==="TERM_ID"||V==="USER_ID"||V==="OPTION_PAGE"||V==="TAXONOMY"||V==="USER"?[{value:null,label:a("Select")},{value:"=",label:a("is equal to")},{value:"!=",label:a("is not equal to")},{value:"IN",label:a("is included in")},{value:"NOT_IN",label:a("is not included in")}]:[{value:null,label:a("Select")},{value:"=",label:a("is equal to")},{value:"!=",label:a("is not equal to")},{value:"IN",label:a("is included in")},{value:"NOT_IN",label:a("is not included in")},{value:"BLANK",label:a("is empty")},{value:"NOT_BLANK",label:a("is not empty")}]},w=()=>f&&E&&E!=="BLANK"&&E!=="NOT_BLANK"&&E!=="CHECKED"&&E!=="NOT_CHECKED",_=()=>{let M=typeof f=="object"?f:Ml(f);typeof M=="string"&&(M=JSON.parse(M));const V=M.type,G=M.value,ie=E==="IN"||E==="NOT_IN",he=E==="CHECKED"||E==="NOT_CHECKED",ge={value:null,label:a("Select")};if(V==="POST_ID"){const oe=()=>{if(l.operator==="IN"||l.operator==="NOT_IN"){const $=D||l.value,L=typeof $=="string"?$.split(","):$;let Y=[];return L.map(de=>Y.push(parseInt(de))),Y}return D||l.value};return ie?e.jsx(q.Fragment,{children:e.jsx(Te,{id:p("value"),defaultValue:oe(),placeholder:a("Select posts"),values:o,errors:j,register:c,setValue:b,clearErrors:v,validate:{required:a("This field is mandatory")}})}):e.jsx(q.Fragment,{children:e.jsx(le,{id:p("value"),defaultValue:oe(),placeholder:a("Select posts"),values:Se(o)?o:[],errors:j,register:c,validate:{required:a("This field is mandatory")}})})}if(V==="USER")return Se(u)&&u&&u.length>0?ie?e.jsx(q.Fragment,{children:e.jsx(Te,{id:p("value"),defaultValue:D||l.value,placeholder:a("Select users"),errors:j,register:c,values:u,setValue:b,clearErrors:v,validate:{required:a("This field is mandatory")}})}):e.jsx(q.Fragment,{children:e.jsx(le,{id:p("value"),defaultValue:D||l.value,placeholder:a("Select user"),errors:j,register:c,values:u,validate:{required:a("This field is mandatory")}})}):e.jsx(q.Fragment,{children:e.jsx(ue,{id:p("value"),errors:j,register:c,defaultValue:D||l.value,placeholder:a("value"),validate:{required:a("This field is mandatory")}})});if(V==="TAXONOMY"){if(i&&i.length>0){const oe=i.filter($=>$.label===G);if(oe&&oe.length===1&&oe[0].options)return ie?e.jsx(q.Fragment,{children:e.jsx(Te,{id:p("value"),defaultValue:D||l.value,placeholder:a("Select taxonomies"),errors:j,register:c,values:oe[0].options,setValue:b,clearErrors:v,validate:{required:a("This field is mandatory")}})}):e.jsx(q.Fragment,{children:e.jsx(le,{id:p("value"),defaultValue:D||l.value,placeholder:a("Select taxonomy"),errors:j,register:c,values:oe.length>0&&oe[0].options&&Se(oe[0].options)?[ge,...oe[0].options]:[],validate:{required:a("This field is mandatory")}})})}return e.jsx(q.Fragment,{children:e.jsx(ue,{id:p("value"),errors:j,register:c,defaultValue:D||l.value,placeholder:a("value"),validate:{required:a("This field is mandatory")}})})}if(V==="TERM_ID"){const oe=()=>{if(l.operator==="IN"||l.operator==="NOT_IN"){const $=D||l.value,L=typeof $=="string"?$.split(","):$;let Y=[];return L.map(de=>Y.push(parseInt(de))),Y}return D||l.value};return ie?e.jsx(q.Fragment,{children:e.jsx(Te,{id:p("value"),defaultValue:oe(),placeholder:a("Select taxonomies"),errors:j,register:c,values:g,setValue:b,clearErrors:v,validate:{required:a("This field is mandatory")}})}):e.jsx(q.Fragment,{children:e.jsx(le,{id:p("value"),defaultValue:oe(),placeholder:a("Select taxonomy"),errors:j,register:c,values:Se(g)?[ge,...g]:[],validate:{required:a("This field is mandatory")}})})}if(V==="OPTION_PAGE"){const oe=()=>{if(l.operator==="IN"||l.operator==="NOT_IN"){const $=D||l.value;return typeof $=="string"?$.split(","):$}return D||l.value};return ie?e.jsx(q.Fragment,{children:e.jsx(Te,{id:p("value"),defaultValue:oe(),placeholder:a("Select pages"),errors:j,register:c,values:h,setValue:b,clearErrors:v,validate:{required:a("This field is mandatory")}})}):e.jsx(q.Fragment,{children:e.jsx(le,{id:p("value"),defaultValue:oe(),placeholder:a("Select page"),errors:j,register:c,values:Se(h)?h:[],validate:{required:a("This field is mandatory")}})})}if(V==="USER_ID"){const oe=()=>{if(l.operator==="IN"||l.operator==="NOT_IN"){const $=D||l.value;return typeof $=="string"?$.split(","):$}return D||l.value};return ie?e.jsx(q.Fragment,{children:e.jsx(Te,{id:p("value"),defaultValue:oe(),placeholder:a("Select users"),errors:j,register:c,values:u,setValue:b,clearErrors:v,validate:{required:a("This field is mandatory")}})}):e.jsx(q.Fragment,{children:e.jsx(le,{id:p("value"),defaultValue:oe(),placeholder:a("Select user"),errors:j,register:c,values:Se(u)?[ge,...u]:[],validate:{required:a("This field is mandatory")}})})}return he?e.jsx(q.Fragment,{children:e.jsx(ue,{id:p("value"),disabled:!0,register:c,errors:j,placeholder:`${ie?a("Insert values separated by comma. Ex: 12, 54, foo"):a("value")}`,defaultValue:D||l.value})}):e.jsx(q.Fragment,{children:e.jsx(ue,{id:p("value"),register:c,errors:j,placeholder:`${ie?a("Insert values separated by comma. Ex: 12, 54, foo"):a("value")}`,defaultValue:D||l.value,validate:{required:a("This field is mandatory")}})})};return e.jsxs("div",{className:"i-flex-center s-8 w-100",children:[e.jsx(fe,{id:p("id"),value:l.id,register:c}),e.jsx("div",{className:"w-60",children:e.jsx(le,{id:p("type"),placeholder:a("Select option"),register:c,values:C(),errors:j,defaultValue:f||we(l.type),validate:{required:a("This field is mandatory")}})}),e.jsx("div",{className:"w-40",children:e.jsx(le,{id:p("operator"),placeholder:a("Select option"),register:c,disabled:T(),values:N(),errors:j,defaultValue:f||l.operator,validate:{required:a("This field is mandatory")}})}),e.jsx("div",{className:"w-100",children:w()?_():e.jsx(ue,{id:p("value"),placeholder:a("Value"),register:c,errors:j,value:"",defaultValue:D||l.value,disabled:!0})}),e.jsx("div",{className:"w-20",children:!s&&e.jsx(q.Fragment,{children:e.jsx(le,{id:p("logic"),placeholder:a("Select option"),register:c,values:[{label:a("AND"),value:"AND"},{label:a("OR"),value:"OR"}],errors:j,defaultValue:R||l.logic,validate:{required:a("This field is mandatory")}})})}),e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx(U,{label:e.jsx(Ge,{id:p("frontEnd"),control:y,defaultValue:typeof x=="boolean"?x:l.frontEnd,errors:j,icon:"bx:devices",disabled:!w()}),tip:a("Show in Front-End"),icon:!1}),e.jsx(U,{label:e.jsx(Ge,{id:p("backEnd"),control:y,defaultValue:typeof O=="boolean"?O:l.backEnd,errors:j,icon:"bx:cog",disabled:!w()}),tip:a("Show in Back-End"),icon:!1})]}),e.jsx(Rt,{boxId:r,boxIndex:n,elementId:l.id,elementIndex:t})]})};Dt.propTypes={elementIndex:d.number.isRequired,boxIndex:d.number.isRequired,boxId:d.string.isRequired,element:d.object.isRequired,isLast:d.bool.isRequired};const Et=({box:t,boxIndex:n})=>{const r=ae(),[l]=Ie(),s=()=>{const i={id:ye(),type:null,operator:"=",value:"",logic:null,frontEnd:!0,backEnd:!0};r(Ss({boxId:t.id,element:i}))};return e.jsxs("div",{children:[e.jsx("h3",{className:"mb-12",children:ss(a("CONDITIONAL LOGIC"))}),e.jsxs("div",{ref:l,className:t.visibilityConditions&&t.visibilityConditions.length>0?"flex-column s-24":"",children:[t.visibilityConditions&&t.visibilityConditions.length>0?e.jsx(q.Fragment,{children:t.visibilityConditions.map((i,o)=>e.jsx(Dt,{elementIndex:o,boxIndex:n,boxId:t.id,element:i,isLast:o===t.visibilityConditions.length-1},i.id))}):e.jsx(jl,{style:K.WARNING,children:a('No conditions are present, click on "Add condition" button to add the first one.')}),e.jsx("span",{children:e.jsx("a",{href:"#",className:t.visibilityConditions&&t.visibilityConditions.length>0?"":"mt-12",onClick:i=>{i.preventDefault(),s()},children:a("Add condition")})})]})]})};Et.propTypes={box:d.object.isRequired,boxIndex:d.number.isRequired};const Ft=({index:t,box:n})=>{var r,l,s,i;const o=y=>`boxes.${t}.settings[0].${y}`,{register:u,formState:{errors:h},control:p}=W(),c=P({control:p,name:"context"}),j=P({control:p,name:"priority"});return e.jsxs("div",{className:"flex-column s-24 p-24 pt-0",children:[e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"col-3",children:[e.jsx(Z,{id:o("context"),label:a("Context")}),e.jsx(le,{id:o("context"),register:u,errors:h,values:ot,defaultValue:!Ne(n)&&(r=n.settings)!==null&&r!==void 0&&r.context?n.settings.context:c||"advanced"})]}),e.jsxs("div",{className:"col-3",children:[e.jsx(Z,{id:o("priority"),label:a("Priority")}),e.jsx(le,{id:o("priority"),register:u,errors:h,values:dt,defaultValue:!Ne(n)&&(l=n.settings)!==null&&l!==void 0&&l.priority?n.settings.priority:j||"default"})]}),e.jsxs("div",{className:"col-3",children:[e.jsx(Z,{id:o("hide_title"),label:a("Hide title")}),e.jsx(ra,{id:o("hide_title"),register:u,errors:h,defaultValue:!Ne(n)&&(s=n.settings)!==null&&s!==void 0&&s.hide_title?n.settings.hide_title:!1})]}),e.jsxs("div",{className:"col-3",children:[e.jsx(Z,{id:o("hide_toggle"),label:a("Hide toggle visibility")}),e.jsx(ra,{id:o("hide_toggle"),register:u,errors:h,defaultValue:!Ne(n)&&(i=n.settings)!==null&&i!==void 0&&i.hide_toggle?n.settings.hide_toggle:!1})]})]}),e.jsx(Et,{box:n,boxIndex:t})]})};Ft.propTypes={index:d.number.isRequired,box:d.object.isRequired};const Ot=({index:t,box:n,listeners:r,attributes:l,setActiveTab:s,bulkEdit:i=!1})=>{const o=L=>`boxes.${t}.${L}`,[u]=Ie(),{register:h,formState:{errors:p},control:c,setValue:j,resetField:y,clearErrors:b,setError:v}=W(),m=P({control:c,name:o("name")}),f=P({control:c,name:o("label")}),E=P({control:c,name:`boxes.${t}`}),D=P({control:c,name:"boxes"}),{append:R}=ve({control:c,name:"boxes"}),x=ae(),{closedElements:O,selectedElementsType:g}=ne(L=>L.metaState),S=()=>O.filter(Y=>Y===n.id).length===1,[C,T]=k.useState(!1),[N,w]=k.useState(!1),[_,M]=k.useState(!0),V=()=>{const L=o("name"),Y=ul(p,L);return Y?e.jsx("span",{className:"invalid-feedback",children:a(Y.message)}):m||n.name},G=()=>typeof f=="string"?f:n.label,ie=async L=>{if(_){const Y=Qe(Ze(L));j(o("name"),Y),await he(Y)?v(o("name"),{message:a("Name is already taken")}):b(o("name"))}},he=async L=>{let Y=[];if(D&&D.map((de,H)=>{H!==t&&Y.push(de.name)}),Y.includes(L))return a("Name is already taken");if(n.name!==L&&(await je("checkMetaBoxNameAction",{boxName:L})).exists===!0)return a("Name is already taken")},ge=()=>{Ra(n.id),S()?x(Vl({id:n.id})):x(Da({id:n.id}))},oe=()=>!(typeof n.isSaved<"u"&&n.isSaved===!1),$=()=>{const L=ye(),Y={id:L,boxId:n.id,name:"meta_box_field",label:"meta box field",type:F.TEXT,defaultValue:"",description:"",isRequired:!1,showInArchive:!1,quickEdit:!1,filterableInAdmin:!1,sort:1,advancedOptions:[],options:[],blocks:[],blockId:null,validationRules:[],visibilityConditions:[],hasManyRelation:[],children:[],parentId:null,isATextualField:!0,isFilterable:!0,isSaved:!1};x(ol({boxId:n.id,parentFieldId:null,parentBlockId:null,field:Y})),ze(1).then(()=>{ke(`${L}`)})};return e.jsxs(q.Fragment,{children:[e.jsxs("div",{className:"flex-between p-24 s-8 for-xs",children:[e.jsx(fe,{id:o("id"),value:n.id,register:h}),e.jsxs("span",{className:"i-flex-center s-8",children:[e.jsx("span",{className:"cursor-move top-2 handle",...l,...r,children:e.jsx(B,{icon:"bx:dots-vertical-rounded",color:Ve(),width:18})}),g!=="field"&&g!=="block"&&oe()&&e.jsx(pl,{elementType:"box",element:{id:n.id}}),e.jsx("h3",{className:`${!N&&!i?"":"hidden"}`,children:V()}),e.jsx("span",{className:`color-gray ${!N&&!i?"":"hidden"}`,children:G()}),e.jsxs("div",{className:`i-flex-center s-8 ${N||i?"":"hidden"}`,children:[e.jsx("div",{children:e.jsx(ue,{size:"sm",id:o("label"),placeholder:a("Box label, non latin chars allowed."),defaultValue:n.name,register:h,errors:p,required:!0,onChangeCapture:_a(L=>{ie(L.target.value)},300),onClick:L=>{(L.target.value==="meta_box_title"||L.target.value==="meta box title")&&y(o("label"))},validate:{maxLength:{value:255,message:"max length is 255"}}})}),e.jsx("div",{children:e.jsx(ue,{size:"sm",id:o("name"),placeholder:a("Box name. Allowed chars: [a-z0-9_-]"),defaultValue:n.name,register:h,errors:p,required:!0,onClick:L=>{L.target.value==="meta_box_title"&&y(o("name"))},validate:{validate:{alphanumericallyValid:cl,checkIfNameIsValid:he},required:a("This field is mandatory"),maxLength:{value:255,message:"max length is 255"}}})}),e.jsx(U,{label:e.jsx("span",{className:`acpt-btn-switch ${_===!0?"active":""}`,onClick:L=>{L.preventDefault(),M(!_)},children:e.jsx(B,{icon:"bx-link",width:18})}),tip:a(`${_?"Auto slug ON":"Auto slug OFF"}`),icon:!1})]}),e.jsx(ee,{style:K.SECONDARY,size:"sm",onClick:L=>{L.preventDefault(),w(!N)},children:a(`${N||i?"Close":"Edit"}`)}),e.jsx(U,{label:e.jsx("a",{href:"#",title:"Box settings",className:"top-2",onClick:L=>{L.preventDefault(),T(!C)},children:e.jsx(B,{icon:"bx:cog",width:24,color:Ta()})}),tip:a("Box settings"),icon:!1})]}),e.jsxs("span",{className:"i-flex-center s-8 mt-8-for-xs",children:[e.jsx(U,{label:e.jsx("a",{href:"#",onClick:L=>{L.preventDefault();const Y=ft(E);x(Ll(Y)),R(Y),ze(1).then(()=>{ke(Y.id)})},children:e.jsx(B,{icon:"bx:duplicate",width:18})}),tip:a("Duplicate this meta box"),icon:!1}),oe()&&e.jsx(q.Fragment,{children:e.jsx(U,{label:e.jsx(Tt,{box:n}),tip:a("Copy this meta box"),icon:!1})}),e.jsx(U,{label:e.jsx(St,{index:t,setActiveTab:s,boxId:n.id}),tip:a("Delete this meta box"),icon:!1}),e.jsx(U,{label:e.jsx("a",{href:"#",onClick:L=>{L.preventDefault(),$()},children:e.jsx(B,{icon:"bx:plus-circle",width:18})}),tip:a("Add field"),icon:!1}),e.jsx(U,{label:e.jsx("a",{href:"#",onClick:L=>{L.preventDefault(),ge()},children:e.jsx(B,{icon:"bx:expand-alt",width:18})}),tip:a("Hide/show this meta box"),icon:!1})]})]}),e.jsx("div",{ref:u,children:C&&e.jsx(Ft,{box:n,index:t})})]})};Ot.propTypes={index:d.number.isRequired,box:d.object.isRequired,setActiveTab:d.func,attributes:d.object,listeners:d.object,bulkEdit:d.bool};const kt=({field:t})=>{const r=document.globals.globals,{setValue:l}=W(),s=ae(),{id:i}=el(),[o,u]=k.useState(!1),[h,p]=k.useState(null),[c,j]=k.useState([]),[y,b]=k.useState([]),[v,m]=k.useState([]),[f,E]=k.useState(null),[D,R]=k.useState(null),[x,O]=k.useState(!1);k.useEffect(()=>{p(null),j([]),b([]),m([]),E(null),R(null),O(!1)},[o]);const g=w=>{p(w),j([]),b([]),m([]),E(null),R(null),O(!1),je("fetchMetaAction",{id:w}).then(_=>{j(_.boxes)}).catch(_=>console.error(_))},S=w=>{b([]),m([]),E("box"),R(w);const _=c.filter(M=>M.id===w)[0].fields;if(_&&_.length>0){const M=_.filter(V=>V.type===F.REPEATER||V.type===F.FLEXIBLE);M&&M.length>0&&b(M)}},C=w=>{E("field"),R(w);const _=y.filter(M=>M.id===w)[0].blocks;_&&_.length>0&&m(_)},T=w=>{E("block"),R(w)},N=()=>{je("copyMetaFieldAction",{fieldId:t.id,targetEntityType:f,targetEntityId:D,delete:x}).then(w=>{w.success?(Re.success(`${a("Meta field was successfully copied")}.`),u(!o),i===t.groupId&&s(sl({id:i})).then(_=>{s(He(_.payload)),l("id",i),l("name",_.payload.name),l("label",_.payload.label),l("display",_.payload.display),_.payload.belongs&&_.payload.belongs.map((M,V)=>{l(`belongs.${V}.id`,M.id),l(`belongs.${V}.belongsTo`,M.belongsTo),l(`belongs.${V}.operator`,M.operator),l(`belongs.${V}.find`,M.find),l(`belongs.${V}.logic`,M.logic)}),_.payload.boxes&&_.payload.boxes.map((M,V)=>{l(`boxes.${V}`,M)})}).catch(_=>{Re.error(`${a("Something went wrong, please retry.")}`)})):Re.error(w.error)}).catch(w=>{Re.error(`${a("Something went wrong, please retry.")}`)})};return e.jsxs(q.Fragment,{children:[e.jsx(Ce,{title:a("Copy this meta field"),visible:o,buttons:[],children:e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label i-flex-center s-4",htmlFor:"group",children:a("Meta group")}),e.jsx("div",{className:"acpt-select",children:e.jsx("select",{id:"group",className:"form-control default",onChangeCapture:w=>g(w.target.value),children:r.find.meta.map(w=>e.jsx("option",{value:w.value,children:w.label}))})})]}),c&&c.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"form-label i-flex-center s-4",htmlFor:"box",children:a("Meta box")}),e.jsx("div",{className:"acpt-select",children:e.jsxs("select",{id:"box",className:"form-control default",onChangeCapture:w=>S(w.target.value),children:[e.jsx("option",{value:null,children:a("Select")}),c.map(w=>e.jsx("option",{value:w.id,children:w.name}))]})})]}),y&&y.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"form-label i-flex-center s-4",htmlFor:"field",children:a("Meta field")}),e.jsx("div",{className:"acpt-select",children:e.jsxs("select",{id:"field",className:"form-control default",onChangeCapture:w=>C(w.target.value),children:[e.jsx("option",{value:null,children:a("Select")}),y.map(w=>e.jsx("option",{value:w.id,children:w.name}))]})})]}),v&&v.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"form-label i-flex-center s-4",htmlFor:"field",children:a("Meta block")}),e.jsx("div",{className:"acpt-select",children:e.jsxs("select",{id:"block",className:"form-control default",onChangeCapture:w=>T(w.target.value),children:[e.jsx("option",{value:null,children:a("Select")}),v.map(w=>e.jsx("option",{value:w.id,children:w.name}))]})})]}),f&&D&&e.jsxs("div",{children:[e.jsxs("div",{className:"w-100 i-flex-center s-4 mb-8",children:[e.jsx("input",{type:"checkbox",defaultValue:x,onClick:()=>O(!x),id:"deleteField"}),e.jsx("label",{htmlFor:"deleteField",children:a("Delete the meta field after copying")})]}),e.jsx(ee,{onClick:()=>N(),style:K.PRIMARY,children:a("Copy")})]})]})}),e.jsx("a",{href:"#",onClick:w=>{w.preventDefault(),u(!o)},children:e.jsx(B,{icon:"bx:copy",width:18})})]})};kt.propTypes={field:d.object.isRequired};const _t=({boxId:t,fieldId:n,fieldIndex:r,parentFieldId:l,parentBlockId:s,setActiveTab:i})=>{const o=ae(),{group:u}=ne(v=>v.metaState),h=()=>re(u.boxes,t,n,!1),[p,c]=k.useState(!1),{control:j}=W(),{remove:y}=ve({control:j,name:h()}),b=[e.jsx(ee,{style:K.SUCCESS,onClick:v=>{v.preventDefault(),o(bt({boxId:t,parentFieldId:l,parentBlockId:s,fieldId:n})),y(r),c(!p),i&&i(0)},children:a("Yes")}),e.jsx(ee,{style:K.DANGER,onClick:v=>{v.preventDefault(),c(!p)},children:a("No")})];return e.jsxs(q.Fragment,{children:[e.jsx(Ce,{title:a("Confirm deleting meta field"),visible:p,buttons:b,children:a("Are you sure?")}),e.jsx("a",{href:"#",onClick:v=>{v.preventDefault(),c(!p)},children:e.jsx(B,{icon:"bx-trash",width:18,color:"#F94144"})})]})};_t.propTypes={setActiveTab:d.func,boxId:d.string.isRequired,fieldId:d.string.isRequired,fieldIndex:d.number.isRequired,parentFieldId:d.string,parentBlockId:d.string};const It=({boxId:t,field:n,parentFieldId:r,parentBlockId:l})=>{const{group:s}=ne(N=>N.metaState),i=s.boxes.findIndex(N=>N.id===t),o=re(s.boxes,t,n.id),u=o.split("."),[h,p]=k.useState(!1),[c,j]=k.useState([]),[y,b]=k.useState(null),[v,m]=k.useState(!1),{control:f}=W(),E=P({control:f,name:"belongs"}),D=P({control:f,name:`boxes.${i}.name`}),R=P({control:f,name:o}),x=P({control:f,name:`boxes.${i}.fields.${u[3]}.name`});let O=null,g=null,S=u[u.length-1],C=l?u[u.length-3]:null;l&&(O=P({control:f,name:re(s.boxes,t,l)})),r&&(g=P({control:f,name:re(s.boxes,t,r)})),k.useEffect(()=>{v&&(p(!0),je("calculateShortCodeAction",{belongsTo:E,boxName:D,fieldId:n.id,fieldName:R?R.name:n.name,fieldRootName:x,parentBlockName:O?O.name:null,parentFieldName:g?g.name:null,index:S,blockIndexInfo:C}).then(N=>{b(N.metaKey),j(N.shortcodes),p(!1)}).catch(N=>{console.error(N.message),p(!1)}))},[v]);const T=[e.jsx(ee,{style:K.DANGER,onClick:N=>{N.preventDefault(),m(!v)},children:a("Close")})];return e.jsxs(q.Fragment,{children:[e.jsx(Ce,{title:a("Shortcode preview"),visible:v,padding:0,buttons:T,children:h?e.jsx("div",{className:"b-bottom-1 p-24",children:a("Loading...")}):e.jsxs(q.Fragment,{children:[y&&e.jsxs("div",{className:"b-bottom-1 p-24",children:[e.jsx("div",{className:"mb-8 color-black",children:e.jsx(U,{label:a("Meta-key"),tip:e.jsxs("div",{className:"flex-column s-4",children:[e.jsx("div",{children:a("This is the meta-key of this field.")}),e.jsx("div",{children:a("Use it in functions like get_post_meta() to retrieve saved meta field data.")}),e.jsxs("div",{children:[a("Prepend the option page slug to retrieve option page meta fields."),e.jsx("br",{}),"Example: page-slug_",y]})]})})}),e.jsx(lt,{text:y})]}),c&&c.length>0&&e.jsxs("div",{className:"p-24",children:[e.jsx("div",{className:"mb-8 color-black",children:e.jsx(U,{label:c&&c.length>1?a("Shortcodes"):a("Shortcode"),tip:a("Use this shortcode to display the meta field on your frontend.")})}),c&&e.jsx("div",{className:"flex-column s-8",children:c.map(N=>e.jsx(lt,{text:N}))})]})]})}),e.jsx("a",{href:"#",onClick:N=>{N.preventDefault(),m(!v)},children:e.jsx(B,{icon:"bx:code-alt",width:18})})]})};It.propTypes={boxId:d.string.isRequired,field:d.object.isRequired,parentFieldId:d.string,parentBlockId:d.string};const qa=({boxIndex:t,fieldIndex:n,boxId:r,field:l,parentFieldIndex:s,parentFieldId:i,parentBlockId:o,bulkEdit:u=!1})=>{const h=ae(),{group:p,closedElements:c}=ne(g=>g.metaState),{formState:{errors:j},control:y}=W(),b=P({control:y,name:re(p.boxes,r,l.id)}),v=P({control:y,name:Xe(p.boxes,r,l.id,"type")}),{append:m}=ve({control:y,name:re(p.boxes,r,l.id,!1)}),f=()=>v||l.type,E=()=>f()!==F.REPEATER&&f()!==F.FLEXIBLE,D=()=>c.filter(S=>S===l.id).length===1,R=()=>{Ra(l.id),D()?h(Vl({id:l.id})):h(Da({id:l.id}))},x=()=>{const g=ye(),S={id:g,boxId:r,name:"meta_box_field",label:"meta box field",type:F.TEXT,defaultValue:"",description:"",isRequired:!1,showInArchive:!1,quickEdit:!1,filterableInAdmin:!1,sort:1,advancedOptions:[],options:[],blocks:[],blockId:null,validationRules:[],visibilityConditions:[],hasManyRelation:[],children:[],parentId:l.id,isATextualField:!0,isFilterable:!0,isSaved:!1};h(ol({boxId:r,parentFieldId:l.id,parentBlockId:null,field:S})),ze(1).then(()=>{ke(`${g}`)})},O=()=>{const g=ye(),S={id:g,boxId:r,fieldId:l.id,label:"new-block",name:"new_block",fields:[],isSaved:!1};h(Bl({boxId:r,parentFieldId:l.id,block:S})),ze(1).then(()=>{ke(`${g}`)})};return e.jsxs("span",{className:"i-flex-center s-8",children:[E()&&e.jsx(U,{label:e.jsx(It,{boxId:r,field:l,parentFieldId:i,parentBlockId:o}),tip:a("Show the shortcode"),icon:!1}),e.jsx(U,{label:e.jsx("a",{href:"#",onClick:g=>{g.preventDefault();const S=vt(r,b,i,o);h(ol({boxId:r,field:S,parentFieldId:i,parentBlockId:o})),m(S),ze(1).then(()=>{ke(S.id)})},children:e.jsx(B,{icon:"bx:duplicate",width:18})}),tip:a("Duplicate this meta field"),icon:!1}),Ea(l.isSaved)&&e.jsx(U,{label:e.jsx(kt,{field:l}),tip:a("Copy this meta field"),icon:!1}),e.jsx(U,{label:e.jsx(_t,{boxId:r,fieldId:l.id,fieldIndex:n,parentFieldId:i,parentBlockId:o}),tip:a("Delete this meta field"),icon:!1}),Ca(f())&&e.jsx(U,{label:e.jsx("a",{href:"#",onClick:g=>{g.preventDefault(),x()},children:e.jsx(B,{icon:"bx:plus-circle",width:18})}),tip:a("Add field"),icon:!1}),wa(f())&&e.jsx(U,{label:e.jsx("a",{href:"#",onClick:g=>{g.preventDefault(),O()},children:e.jsx(B,{icon:"bx:plus-circle",width:18})}),tip:a("Add block"),icon:!1}),!u&&e.jsx(U,{label:e.jsx("a",{href:"#",onClick:g=>{g.preventDefault(),R()},children:e.jsx(B,{icon:"bx:expand-alt",width:18})}),tip:a("Hide/show this meta field"),icon:!1})]})};qa.propTypes={bulkEdit:d.bool,boxIndex:d.number.isRequired,fieldIndex:d.number.isRequired,boxId:d.string.isRequired,field:d.object.isRequired,parentFieldIndex:d.string,parentFieldId:d.string,parentBlockId:d.string};const Ma=({boxId:t,field:n})=>{const{group:r}=ne(m=>m.metaState),{formState:{errors:l},register:s,control:i}=W(),o=m=>`${re(r.boxes,t,n.id)}.${m}`,u=P({control:i,name:o("type")}),h=P({control:i,name:o("showInArchive")}),p=P({control:i,name:o("filterableInAdmin")}),c=P({control:i,name:o("quickEdit")}),j=P({control:i,name:o("isRequired")}),y=()=>u||n.type,b=()=>y()!==F.CLONE&&y()!==F.REPEATER&&y()!==F.FLEXIBLE&&y()!==F.LIST,v=()=>n.parentId||n.blockId;return e.jsxs("div",{className:"i-flex-center s-4",children:[e.jsx(U,{label:e.jsx(Ge,{id:o("showInArchive"),control:i,defaultValue:typeof h=="boolean"?h:n.showInArchive,errors:l,icon:"bxl:wordpress"}),tip:a("Show in Wordpress admin post lists page"),icon:!1}),b()&&e.jsxs(q.Fragment,{children:[!v()&&e.jsxs(q.Fragment,{children:[Ts(n.type)&&e.jsx(U,{label:e.jsx(Ge,{control:i,defaultValue:typeof p=="boolean"?p:n.filterableInAdmin,errors:l,icon:"bx:filter",id:o("filterableInAdmin")}),tip:a("Filterable in Wordpress admin post lists page"),icon:!1}),Rs(n.type)&&e.jsx(U,{label:e.jsx(Ge,{control:i,defaultValue:typeof c=="boolean"?c:n.quickEdit,errors:l,icon:"bx:pencil",id:o("quickEdit")}),tip:a("Quick edit in Wordpress admin post lists page"),icon:!1})]}),e.jsx(U,{label:e.jsx(q.Fragment,{children:e.jsx(Ge,{control:i,defaultValue:typeof j=="boolean"?j:n.isRequired,errors:l,icon:"foundation:asterisk",id:o("isRequired")})}),tip:a("Field required"),icon:!1})]})]})};Ma.propTypes={boxId:d.string.isRequired,field:d.object.isRequired};const Va=({boxId:t,field:n,parentFieldId:r,parentBlockId:l})=>{const{group:s}=ne(h=>h.metaState),{formState:{errors:i},register:o}=W(),u=h=>Xe(s.boxes,t,n.id,h);return e.jsxs(q.Fragment,{children:[e.jsx(fe,{id:u("id"),value:n.id,register:o}),e.jsx(fe,{id:u("parentId"),value:r||"",register:o}),e.jsx(fe,{id:u("blockId"),value:l||"",register:o})]})};Va.propTypes={boxId:d.string.isRequired,field:d.object.isRequired,parentFieldId:d.string,parentBlockId:d.string};const qt=({boxId:t,parentFieldId:n,blockId:r,blockIndex:l})=>{const s=ae(),{group:i}=ne(y=>y.metaState),o=()=>re(i.boxes,t,r,!1),[u,h]=k.useState(!1),{control:p}=W(),{remove:c}=ve({control:p,name:o()}),j=[e.jsx(ee,{style:K.SUCCESS,onClick:y=>{y.preventDefault(),s(xt({boxId:t,parentFieldId:n,blockId:r})),c(l),h(!u)},children:a("Yes")}),e.jsx(ee,{style:K.DANGER,onClick:y=>{y.preventDefault(),h(!u)},children:a("No")})];return e.jsxs(q.Fragment,{children:[e.jsx(Ce,{title:a("Confirm deleting block"),visible:u,buttons:j,children:a("Are you sure?")}),e.jsx("a",{href:"#",onClick:y=>{y.preventDefault(),h(!u)},children:e.jsx(B,{icon:"bx-trash",width:18,color:"#F94144"})})]})};qt.propTypes={boxId:d.string.isRequired,parentFieldId:d.string.isRequired,blockId:d.string.isRequired};const Mt=({block:t})=>{const r=document.globals.globals,{setValue:l}=W(),s=ae(),{id:i}=el(),[o,u]=k.useState(!1),[h,p]=k.useState(null),[c,j]=k.useState([]),[y,b]=k.useState([]),[v,m]=k.useState(null),[f,E]=k.useState(!1);k.useEffect(()=>{p(null),j([]),b([]),m(null),E(!1)},[o]);const D=g=>{p(g),j([]),b([]),m(null),E(!1),je("fetchMetaAction",{id:g}).then(S=>{j(S.boxes)}).catch(S=>console.error(S))},R=g=>{b([]);const S=c.filter(C=>C.id===g)[0].fields;b(S)},x=g=>{m(g)},O=()=>{je("copyMetaBlockAction",{blockId:t.id,targetFieldId:v,delete:f}).then(g=>{g.success?(Re.success(`${a("Meta block was successfully copied")}.`),u(!o),i===t.groupId&&s(sl({id:i})).then(S=>{s(He(S.payload)),l("id",i),l("name",S.payload.name),l("label",S.payload.label),l("display",S.payload.display),S.payload.belongs&&S.payload.belongs.map((C,T)=>{l(`belongs.${T}.id`,C.id),l(`belongs.${T}.belongsTo`,C.belongsTo),l(`belongs.${T}.operator`,C.operator),l(`belongs.${T}.find`,C.find),l(`belongs.${T}.logic`,C.logic)}),S.payload.boxes&&S.payload.boxes.map((C,T)=>{l(`boxes.${T}`,C)})}).catch(S=>{console.error(S)})):Re.error(g.error)}).catch(g=>console.error(g))};return e.jsxs(q.Fragment,{children:[e.jsx(Ce,{title:a("Copy this meta block"),visible:o,buttons:[],children:e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label i-flex-center s-4",htmlFor:"group",children:a("Meta group")}),e.jsx("div",{className:"acpt-select",children:e.jsx("select",{id:"group",className:"form-control default",onChangeCapture:g=>D(g.target.value),children:r.find.meta.map(g=>e.jsx("option",{value:g.value,children:g.label}))})})]}),c&&c.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"form-label i-flex-center s-4",htmlFor:"box",children:a("Meta box")}),e.jsx("div",{className:"acpt-select",children:e.jsxs("select",{id:"box",className:"form-control default",onChangeCapture:g=>R(g.target.value),children:[e.jsx("option",{value:null,children:a("Select")}),c.map(g=>e.jsx("option",{value:g.id,children:g.name}))]})})]}),y&&y.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"form-label i-flex-center s-4",htmlFor:"field",children:a("Meta field")}),e.jsx("div",{className:"acpt-select",children:e.jsxs("select",{id:"field",className:"form-control default",onChangeCapture:g=>x(g.target.value),children:[e.jsx("option",{value:null,children:a("Select")}),y.map(g=>e.jsx("option",{value:g.id,children:g.name}))]})})]}),v&&e.jsxs("div",{children:[e.jsxs("div",{className:"w-100 i-flex-center s-4 mb-8",children:[e.jsx("input",{type:"checkbox",defaultValue:f,onClick:()=>E(!f),id:"deleteBlock"}),e.jsx("label",{htmlFor:"deleteBlock",children:a("Delete the meta block after copying")})]}),e.jsx(ee,{onClick:()=>O(),style:K.PRIMARY,children:a("Copy")})]})]})}),e.jsx("a",{href:"#",onClick:g=>{g.preventDefault(),u(!o)},children:e.jsx(B,{icon:"bx:copy",width:18})})]})};Mt.propTypes={block:d.object.isRequired};const Aa=({boxId:t,block:n,blockIndex:r,parentFieldId:l,bulkEdit:s=!1})=>{const{group:i,closedElements:o}=ne(m=>m.metaState),{formState:{errors:u},control:h}=W(),p=P({control:h,name:re(i.boxes,t,n.id)}),c=()=>o.filter(f=>f===n.id).length===1,j=ae(),y=()=>{Ra(n.id),c()?j(Vl({id:n.id})):j(Da({id:n.id}))},b=()=>{const m=ye(),f={id:m,boxId:t,name:"meta_box_field",label:"meta box field",type:F.TEXT,defaultValue:"",description:"",isRequired:!1,showInArchive:!1,quickEdit:!1,filterableInAdmin:!1,sort:1,advancedOptions:[],options:[],blocks:[],blockId:n.id,validationRules:[],visibilityConditions:[],hasManyRelation:[],children:[],parentId:null,isATextualField:!0,isFilterable:!0,isSaved:!1};j(ol({boxId:t,parentFieldId:null,parentBlockId:n.id,field:f})),j(Vl({id:n.id})),ze(1).then(()=>{ke(`${m}`)})},v=()=>!(typeof n.isSaved<"u"&&n.isSaved===!1);return e.jsxs("span",{className:"i-flex-center s-8",children:[e.jsx(U,{label:e.jsx("a",{href:"#",onClick:m=>{m.preventDefault();const f=gt(t,l,p);j(Bl({boxId:t,parentFieldId:l,block:f})),ze(1).then(()=>{ke(f.id)})},children:e.jsx(B,{icon:"bx:duplicate",width:18})}),tip:a("Duplicate this block"),icon:!1}),v()&&e.jsx(U,{label:e.jsx(Mt,{block:n}),tip:a("Copy this meta block"),icon:!1}),e.jsx(U,{label:e.jsx(qt,{boxId:t,blockId:n.id,blockIndex:r,parentFieldId:l}),tip:a("Delete this block"),icon:!1}),e.jsx(U,{label:e.jsx("a",{href:"#",onClick:m=>{m.preventDefault(),b()},children:e.jsx(B,{icon:"bx:plus-circle",width:18})}),tip:a("Add field"),icon:!1}),!s&&e.jsx(U,{label:e.jsx("a",{href:"#",onClick:m=>{m.preventDefault(),y()},children:e.jsx(B,{icon:"bx:expand-alt",width:18})}),tip:a("Hide/show this block"),icon:!1})]})};Aa.propTypes={bulkEdit:d.bool,blockIndex:d.number.isRequired,boxId:d.string.isRequired,parentFieldId:d.string,block:d.object.isRequired};const Pl=({boxId:t,block:n,listeners:r,attributes:l,formId:s,boxIndex:i,blockIndex:o,parentFieldIndex:u,parentFieldId:h})=>{const{group:p,closedElements:c,selectedElementsType:j}=ne(N=>N.metaState),{formState:{errors:y},register:b,control:v,resetField:m,setValue:f}=W();P({control:v,name:re(p.boxes,t,n.id)});const E=P({control:v,name:s("name")}),D=P({control:v,name:s("label")}),[R,x]=k.useState(!0),O=()=>{const N=s("name"),w=ul(y,N);return w?e.jsx("span",{className:"invalid-feedback",children:a(w.message)}):E||n.name},g=()=>D||n.label;ae();const[S,C]=k.useState(!1),T=()=>!(typeof n.isSaved<"u"&&n.isSaved===!1);return e.jsxs("div",{className:"flex-between s-8 for-xs",children:[e.jsx(fe,{id:s("id"),value:n.id,register:b}),e.jsxs("span",{className:"i-flex-center s-8",children:[e.jsx(U,{label:e.jsx(B,{icon:"hugeicons:blockchain-01",color:"#A972CA",width:18}),tip:a("Child block"),icon:!1}),e.jsx("span",{className:"cursor-move top-2 handle",...l,...r,children:e.jsx(B,{icon:"bx:dots-vertical-rounded",color:Ve(),width:18})}),j!=="box"&&j!=="field"&&T()&&e.jsx(pl,{elementType:"block",element:{id:n.id,boxId:t,parentFieldId:h}}),e.jsx("h3",{className:`${S?"hidden":""}`,children:O()}),e.jsx("span",{className:`color-gray ${S?"hidden":""}`,children:g()}),e.jsxs("div",{className:`i-flex-center s-8 ${S?"":"hidden"}`,children:[e.jsx("div",{children:e.jsx(ue,{size:"sm",id:s("label"),placeholder:a("Block label, non latin chars allowed."),defaultValue:n.label,register:b,errors:y,onChangeCapture:N=>{R&&f(s("name"),Qe(Ze(N.target.value)))},onClick:N=>{N.target.value==="new-block"&&m(s("label"))},validate:{maxLength:{value:255,message:"max length is 255"}}})}),e.jsx("div",{children:e.jsx(ue,{size:"sm",id:s("name"),placeholder:a("Block name. Allowed chars: [a-z0-9_-]"),defaultValue:n.name,register:b,errors:y,required:!0,onClick:N=>{N.target.value==="new_block"&&m(s("name"))},validate:{validate:cl,required:a("This field is mandatory"),maxLength:{value:255,message:"max length is 255"}}})}),e.jsx(U,{label:e.jsx("span",{className:`acpt-btn-switch ${R===!0?"active":""}`,onClick:N=>{N.preventDefault(),x(!R)},children:e.jsx(B,{icon:"bx-link",width:18})}),tip:a(`${R?"Auto slug ON":"Auto slug OFF"}`),icon:!1})]}),e.jsx(ee,{style:K.SECONDARY,size:"sm",onClick:N=>{N.preventDefault(),C(!S)},children:a(`${S?"Close":"Edit"}`)})]}),e.jsx(Aa,{blockIndex:o,boxId:t,parentFieldId:h,block:n})]})};Pl.propTypes={boxIndex:d.number.isRequired,blockIndex:d.number.isRequired,formId:d.func.isRequired,boxId:d.string.isRequired,parentFieldIndex:d.string,parentFieldId:d.string,block:d.object.isRequired,attributes:d.object,listeners:d.object};const Vt=({blockIndex:t,block:n,boxIndex:r,boxId:l,parentFieldIndex:s,parentFieldId:i,isMainView:o})=>{const{attributes:u,listeners:h,setNodeRef:p,isDragging:c,transform:j}=Ye({id:n.id}),y={transform:We.Translate.toString(j)},{group:b,closedElements:v}=ne(O=>O.metaState),m=()=>v.filter(g=>g===n.id).length===1,f=O=>`${re(b.boxes,l,n.id)}.${O}`,D=0<Sa.MAX_NESTING,R=()=>m()?"hidden":"mt-24",x={background:yt()};return o?e.jsx("tr",{id:n.id,className:`bg-white ${c?"b-rounded z-100 with-drop-shadow":""}`,ref:p,style:y,children:e.jsxs("td",{style:x,className:"with-active-border",colSpan:7,children:[e.jsx(Pl,{formId:f,boxIndex:r,attributes:u,listeners:h,boxId:l,block:n,blockIndex:t,parentFieldId:i}),e.jsx("div",{className:R(),children:e.jsx(gl,{addFieldEnabled:D,boxIndex:r,boxId:l,parentFieldIndex:s,parentFieldId:i,parentBlockId:n.id,fields:n.fields})})]})}):e.jsxs("div",{id:n.id,className:`bg-white b-rounded with-active-border p-24 ${c?"z-100 with-drop-shadow":"with-shadow"}`,ref:p,style:{...y,...x},children:[e.jsx(Pl,{formId:f,boxIndex:r,attributes:u,listeners:h,boxId:l,block:n,blockIndex:t,parentFieldId:i}),e.jsx("div",{className:R(),children:e.jsx(gl,{addFieldEnabled:D,boxIndex:r,boxId:l,parentFieldIndex:s,parentFieldId:i,parentBlockId:n.id,fields:n.fields})})]})};Vt.propTypes={isMainView:d.bool,blockIndex:d.number.isRequired,block:d.object.isRequired,boxId:d.string.isRequired,boxIndex:d.string.isRequired,parentFieldIndex:d.number.isRequired,parentFieldId:d.string.isRequired};const oa=({blockIndex:t,block:n,boxIndex:r,boxId:l,parentFieldIndex:s,parentFieldId:i,isMainView:o,bulkEdit:u=!1})=>{const{attributes:h,listeners:p,setNodeRef:c,isDragging:j,transform:y}=Ye({id:n.id}),b={transform:We.Translate.toString(y)},{group:v,closedElements:m,selectedElementsType:f}=ne(se=>se.metaState),E=ae(),D=Fa(v.boxes,l,n.id),{formState:{errors:R},register:x,control:O,resetField:g,setValue:S}=W(),C=se=>`${re(v.boxes,l,n.id)}.${se}`;P({control:O,name:re(v.boxes,l,n.id)});const T=P({control:O,name:C("name")}),N=P({control:O,name:C("label")}),{move:w}=ve({control:O,name:C("fields")}),_=()=>{const se=C("name"),me=ul(R,se);return me?e.jsx("span",{className:"invalid-feedback",children:a(me.message)}):T||n.name},M=()=>N||n.label,[V,G]=k.useState(!0),[ie,he]=k.useState(!1),[ge,oe]=k.useState(!1),[$,L]=k.useState(!1),Y=k.useRef(),de=k.useRef();ql([Y,de],()=>{he(!1),oe(!1),L(!1)});const H=se=>{const{active:me,over:Pe}=se;if(me.id===Pe.id)return;const qe=n.fields,Me=qe.findIndex(ll=>ll.id===me.id),Oe=qe.findIndex(ll=>ll.id===Pe.id),Le=Ae(qe,Me,Oe);w(Me,Oe),E(dl({boxId:l,parentFieldId:null,parentBlockId:n.id,sortedFields:Le}))},J=()=>{if(!o||!D||D===0)return null;let se="#a972ca";switch(D){case 1:return"#a972ca";case 2:return"#875ba2";case 3:return"#654479";default:case 4:return"#553965"}return se},te=()=>!(typeof n.isSaved<"u"&&n.isSaved===!1);if(o){var ce,be;return e.jsxs(q.Fragment,{children:[e.jsx(fe,{id:C("id"),value:n.id,register:x}),e.jsxs("tr",{id:n.id,ref:c,style:b,className:`bg-white b-rounded ${j?"z-100 with-drop-shadow":""}`,children:[e.jsx("td",{style:{borderLeft:`5px solid ${J()}`},children:e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx(U,{label:e.jsx(B,{icon:"hugeicons:blockchain-01",color:J(),width:18}),tip:a("Child block"),icon:!1}),e.jsx("span",{className:"cursor-move handle top-2",...h,...p,children:e.jsx(B,{icon:"bx:dots-vertical-rounded",color:Ve(),width:18})}),f!=="box"&&f!=="field"&&te()&&e.jsx(pl,{elementType:"block",element:{id:n.id,boxId:l,parentFieldId:i}})]})}),e.jsx("td",{children:ie||u?e.jsxs("div",{ref:Y,className:"w-100 i-flex-center s-8",children:[e.jsx(ue,{size:"sm",id:C("label"),placeholder:a("Block label, non latin chars allowed."),defaultValue:n.label,register:x,errors:R,onChangeCapture:se=>{V&&S(C("name"),Qe(Ze(se.target.value)))},onClick:se=>{se.target.value==="new-block"&&g(C("label"))},validate:{maxLength:{value:255,message:"max length is 255"}}}),e.jsx(U,{label:e.jsx("span",{className:`acpt-btn-switch ${V===!0?"active":""}`,onClick:se=>{se.preventDefault(),G(!V)},children:e.jsx(B,{icon:"bx-link",width:18})}),tip:a(`${V?"Auto slug ON":"Auto slug OFF"}`),icon:!1})]}):e.jsx("div",{className:"cursor-pointer",onClick:()=>{window.innerWidth>=960&&(he(!ie),oe(!ge),L(!1))},children:M()})}),e.jsx("td",{className:"hidden-xs",children:ie||u?e.jsx("div",{ref:de,children:e.jsx(ue,{size:"sm",id:C("name"),placeholder:a("Block name. Allowed chars: [a-z0-9_-]"),defaultValue:n.name,register:x,errors:R,required:!0,onClick:se=>{se.target.value==="new_block"&&g(C("name"))},validate:{validate:cl,required:a("This field is mandatory"),maxLength:{value:255,message:"max length is 255"}}})}):e.jsx("div",{className:"text-bold color-black cursor-pointer",onClick:()=>{window.innerWidth>=960&&(he(!ie),L(!$),oe(!1))},children:_()})}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{children:e.jsx(Aa,{bulkEdit:u,blockIndex:t,boxId:l,parentFieldId:i,block:n})})]}),n.fields&&((ce=n.fields)===null||ce===void 0?void 0:ce.length)>0&&e.jsx(_e,{onDragEnd:H,items:n.fields,children:e.jsx(q.Fragment,{children:n.fields&&((be=n.fields)===null||be===void 0?void 0:be.length)>0&&n.fields.map((se,me)=>e.jsx(Xl,{bulkEdit:u,isMainView:!0,boxIndex:r,fieldIndex:me,boxId:l,field:se,parentBlockId:n.id}))})})]})}return e.jsx("div",{id:n.id,className:`bg-white b-rounded with-shadow p-24 ${j?"z-100 with-drop-shadow":""}`,ref:c,style:b,children:e.jsx(Pl,{formId:C,boxIndex:r,attributes:h,listeners:p,boxId:l,block:n,blockIndex:t,parentFieldId:i})})};oa.propTypes={bulkEdit:d.bool,isMainView:d.bool,blockIndex:d.number.isRequired,block:d.object.isRequired,boxId:d.string.isRequired,boxIndex:d.string.isRequired,parentFieldIndex:d.number.isRequired,parentFieldId:d.string.isRequired};const Pa=({blockIndex:t,block:n,boxIndex:r,boxId:l,parentFieldIndex:s,parentFieldId:i,isMainView:o,bulkEdit:u=!1})=>{const{closedElements:h}=ne(c=>c.metaState),p=()=>{const c=h.filter(j=>j===n.id);return typeof c>"u"?!1:c.length>0};return u?e.jsx(oa,{bulkEdit:u,isMainView:o,blockIndex:t,block:n,boxIndex:r,boxId:l,parentFieldIndex:s,parentFieldId:i}):p()?e.jsx(oa,{bulkEdit:u,isMainView:o,blockIndex:t,block:n,boxIndex:r,boxId:l,parentFieldIndex:s,parentFieldId:i}):e.jsx(Vt,{isMainView:o,blockIndex:t,block:n,boxIndex:r,boxId:l,parentFieldIndex:s,parentFieldId:i})};Pa.propTypes={bulkEdit:d.bool,isMainView:d.bool,blockIndex:d.number.isRequired,block:d.object.isRequired,boxId:d.string.isRequired,boxIndex:d.string.isRequired,parentFieldIndex:d.number.isRequired,parentFieldId:d.string.isRequired};const da=({boxIndex:t,fieldIndex:n,boxId:r,field:l,parentFieldIndex:s,parentFieldId:i,parentBlockId:o,isMainView:u,bulkEdit:h=!1})=>{const{attributes:p,listeners:c,setNodeRef:j,isDragging:y,transform:b}=Ye({id:l.id}),v={transform:We.Translate.toString(b)},m=ae(),{group:f,selectedElementsType:E}=ne(Q=>Q.metaState),{formState:{errors:D},register:R,unregister:x,resetField:O,setError:g,clearErrors:S,setValue:C,control:T}=W(),{move:N}=ve({control:T,name:`${re(f.boxes,r,l.id)}.children`}),{move:w}=ve({control:T,name:`${re(f.boxes,r,l.id)}.blocks`}),[_,M]=k.useState(!0),[V,G]=k.useState(!1),[ie,he]=k.useState(!1),[ge,oe]=k.useState(!1),[$,L]=k.useState(!1),Y=k.useRef(),de=k.useRef(),H=k.useRef();ql([Y],()=>{he(!1)}),ql([de,H],()=>{G(!1),oe(!1),L(!1)});const J=Q=>Xe(f.boxes,r,l.id,Q),te=P({control:T,name:`boxes.${t}.fields`}),ce=P({control:T,name:`boxes.${t}.name`}),be=P({control:T,name:J("name")}),se=P({control:T,name:J("label")}),me=P({control:T,name:J("type")}),Pe=()=>{const Q=J("name"),X=ul(D,Q);return X?e.jsx("span",{className:"invalid-feedback",children:a(X.message)}):be||l.name},qe=()=>typeof se=="string"?se:l.label,Me=()=>me||l.type,Oe=Fa(f.boxes,r,l.id),Le=Q=>{if(Me()!==Q){const X={...l};X.type=Q,Q!==F.REPEATER&&(X.children=[]),Q!==F.FLEXIBLE&&(X.blocks=[]),Q!==F.POST&&(X.relations=[]),jt(Q)||(x(J("relations")),x(J("visibilityConditions")),x(J("validationRules")),X.visibilityConditions=[],X.validationRules=[],X.relations=[]),x(J("relations")),x(J("blocks")),x(J("children")),X.children||(X.children=[]),X.blocks||(X.blocks=[]),X.relations||(X.relations=[]),X.visibilityConditions||(X.visibilityConditions=[]),X.validationRules||(X.validationRules=[]),m(Nt({field:X,boxId:r}))}},ll=async Q=>{if(_){const X=Qe(Ze(Q));C(J("name"),X),await wl(X)?g(J("name"),{message:a("Name is already taken")}):S(J("name"))}},wl=async Q=>{const X=Qe(Ze(Q));let $e=[];if(te.map((Be,al)=>{al!==n&&$e.push(Be.name)}),$e.includes(X))return a("Name is already taken");if(l.name!==X&&(await je("checkMetaBoxFieldNameAction",{boxName:ce||l.boxName,fieldName:X})).exists===!0)return a("Name is already taken")},Zl=Q=>{const{active:X,over:$e}=Q;if(X.id===$e.id)return;const Be=l.blocks,al=Be.findIndex(tl=>tl.id===X.id),ml=Be.findIndex(tl=>tl.id===$e.id),la=Ae(Be,al,ml);w(al,ml),m(ka({boxId:r,parentFieldId:l.id,sortedBlocks:la}))},ea=Q=>{const{active:X,over:$e}=Q;if(X.id===$e.id)return;const Be=l.children,al=Be.findIndex(tl=>tl.id===X.id),ml=Be.findIndex(tl=>tl.id===$e.id),la=Ae(Be,al,ml);N(al,ml),m(dl({boxId:r,parentFieldId:l.id,parentBlockId:null,sortedFields:la}))},A=()=>{if(!u||!Oe||Oe===0)return null;let Q="#02C39A";switch(Oe){case 1:return"#02C39A";case 2:return"#029c7b";case 3:return"#01755c";default:case 4:return"#01624d"}return Q},Ee=()=>u?!Oe||Oe<2?24:24*Oe:null;return e.jsxs(q.Fragment,{children:[e.jsx(Va,{boxId:r,field:l,parentFieldId:i,parentBlockId:o}),e.jsxs("tr",{id:l.id,ref:j,style:v,className:`bg-white b-rounded ${y?"z-100 with-drop-shadow":""}`,children:[e.jsx("td",{style:{borderLeft:`5px solid ${A()}`,paddingLeft:`${Ee()}px`},children:e.jsxs("div",{className:"i-flex-center s-8",children:[(i||o)&&e.jsx(U,{label:e.jsx(B,{icon:"tabler:arrow-guide",color:A(),width:18}),tip:a("Child field"),icon:!1}),e.jsx("span",{className:"cursor-move handle top-2",...p,...c,children:e.jsx(B,{icon:"bx:dots-vertical-rounded",color:Ve(),width:18})}),E!=="box"&&E!=="block"&&Ea(l.isSaved)&&e.jsx(pl,{elementType:"field",element:Oa(l,r,i,o)})]})}),e.jsx("td",{className:"hidden-xs",children:V||h?e.jsxs("div",{ref:de,className:"w-100 i-flex-center s-8",children:[e.jsx(ue,{id:J("label"),register:R,errors:D,autoFocus:ge,defaultValue:l.label,placeholder:a("The field label, non latin characters are allowed"),onChangeCapture:_a(Q=>{ll(Q.target.value)},300),onClick:Q=>{Q.target.value==="meta box field"&&O(J("label"))},validate:{maxLength:{value:255,message:"max length is 255"}}}),e.jsx(U,{label:e.jsx("span",{className:`acpt-btn-switch ${_===!0?"active":""}`,onClick:Q=>{Q.preventDefault(),M(!_)},children:e.jsx(B,{icon:"bx-link",width:18})}),tip:a(`${_?"Auto slug ON":"Auto slug OFF"}`),icon:!1})]}):e.jsx("div",{className:"cursor-pointer",onClick:()=>{window.innerWidth>=960&&(G(!V),oe(!ge),L(!1))},children:qe()})}),e.jsx("td",{children:V||h?e.jsx("div",{ref:H,children:e.jsx(ue,{id:J("name"),register:R,errors:D,autoFocus:$,placeholder:a("Field slug (Ex. gallery or text_1)"),defaultValue:l.name,onClick:Q=>{Q.target.value==="meta_box_field"&&O(J("name"))},validate:{validate:{alphanumericallyValid:cl,checkIfNameIsValid:wl},required:a("This field is mandatory"),maxLength:{value:255,message:"max length is 255"}}})}):e.jsx("div",{className:"text-bold color-black cursor-pointer",onClick:()=>{window.innerWidth>=960&&(G(!V),L(!$),oe(!1))},children:Pe()})}),e.jsx("td",{className:"hidden-xs",children:e.jsx(Ma,{field:l,boxId:r})}),e.jsx("td",{children:ie||h?e.jsx("div",{ref:Y,style:{maxWidth:"200px"},children:e.jsx(le,{register:R,id:J("type"),errors:D,defaultValue:l.type,values:ut(Oe),onChangeCapture:Q=>{Le(Q.target.value)}})}):e.jsxs("div",{className:"i-flex-center s-8 cursor-pointer",onClick:()=>{window.innerWidth>=960&&he(!ie)},children:[e.jsx(Ul,{fieldType:Me(),css:"with-border b-rounded p-8"}),me===F.REPEATER&&l.children&&l.children.length>0&&e.jsx("span",{className:"px-8 py-4 font-sm bg-light-gray text-normal b-rounded",children:l.children.length}),me===F.FLEXIBLE&&l.blocks&&l.blocks.length>0&&e.jsx("span",{className:"px-8 py-4 font-sm bg-light-gray text-normal b-rounded",children:l.blocks.length})]})}),e.jsx("td",{children:e.jsx(qa,{bulkEdit:h,boxIndex:t,field:l,boxId:r,fieldIndex:n,parentFieldIndex:s,parentFieldId:i,parentBlockId:o})})]}),Ca(Me())&&l.children&&e.jsx(_e,{onDragEnd:ea,items:l.children,children:e.jsx(q.Fragment,{children:l.children&&l.children.length>0&&l.children.map((Q,X)=>e.jsx(Xl,{bulkEdit:h,isMainView:!0,boxIndex:t,fieldIndex:X,boxId:r,field:Q,parentFieldIndex:n,parentFieldId:l.id}))})}),wa(Me())&&l.blocks&&e.jsx(_e,{onDragEnd:Zl,items:l.blocks,children:e.jsx(q.Fragment,{children:l.blocks&&l.blocks.length>0&&l.blocks.map((Q,X)=>e.jsx(Pa,{bulkEdit:h,isMainView:!0,blockIndex:X,block:Q,boxIndex:t,boxId:r,parentFieldIndex:s,parentFieldId:l.id}))})})]})};da.propTypes={boxIndex:d.number.isRequired,fieldIndex:d.number.isRequired,boxId:d.string.isRequired,field:d.object.isRequired,parentFieldIndex:d.string,parentFieldId:d.string,parentBlockId:d.string,bulkEdit:d.bool};const At=({boxId:t,fieldId:n,optionId:r,parentFieldId:l,optionIndex:s})=>{const i=ae(),{group:o}=ne(b=>b.metaState),u=()=>`${re(o.boxes,t,n)}.options`,[h,p]=k.useState(!1),{control:c}=W(),{remove:j}=ve({control:c,name:u()}),y=[e.jsx(ee,{style:K.SUCCESS,onClick:b=>{b.preventDefault(),i(Ds({boxId:t,fieldId:n,parentFieldId:l,optionId:r})),j(s),p(!h)},children:a("Yes")}),e.jsx(ee,{style:K.DANGER,onClick:b=>{b.preventDefault(),p(!h)},children:a("No")})];return e.jsxs("span",{children:[e.jsx(Ce,{title:a("Confirm deleting option"),visible:h,buttons:y,children:a("Are you sure?")}),e.jsx("a",{href:"#",onClick:b=>{b.preventDefault(),p(!h)},children:e.jsx(U,{icon:!1,tip:a("Delete"),label:e.jsx(B,{icon:"bx-trash",width:18,color:"#F94144"})})})]})};At.propTypes={boxId:d.string.isRequired,fieldId:d.string.isRequired,parentFieldId:d.string,optionId:d.string.isRequired,optionIndex:d.number.isRequired};const Pt=({index:t,boxIndex:n,fieldIndex:r,boxId:l,fieldId:s,parentFieldId:i,option:o,handleIsDefault:u})=>{const{group:h}=ne(M=>M.metaState),p=M=>i?`${re(h.boxes,l,s)}.options.${t}.${M}`:`boxes.${n}.fields.${r}.options.${t}.${M}`,{register:c,formState:{errors:j},control:y,setValue:b,resetField:v}=W(),m=P({control:y,name:p("value")}),f=P({control:y,name:p("label")}),E=P({control:y,name:p("isDefault")}),{attributes:D,listeners:R,setNodeRef:x,isDragging:O,transform:g}=Ye({id:o.id}),S={transform:We.Translate.toString(g)},C=()=>o.label==="label"&&o.value==="value"?!0:o.label===o.value,[T,N]=k.useState(C()),w=()=>m||(o.value?o.value:null),_=()=>f||(o.label?o.label:null);return e.jsxs(q.Fragment,{children:[e.jsx(fe,{id:p("id"),value:o.id,register:c}),e.jsxs("tr",{style:S,ref:x,className:`bg-white ${O?"b-rounded z-100 with-drop-shadow":""}`,children:[e.jsx("td",{children:e.jsx("span",{className:"cursor-move top-2 handle",...D,...R,children:e.jsx(B,{icon:"bx:dots-vertical-rounded",color:Ve(),width:18})})}),e.jsx("td",{children:e.jsx(ue,{id:p("label"),register:c,errors:j,defaultValue:_(),onChangeCapture:M=>{T&&b(p("value"),M.target.value)},onClick:M=>{o.label&&M.target.value==="label"&&v(p("label"))},validate:{required:a("This field is mandatory"),maxLength:{value:255,message:"max length is 255"}}})}),e.jsx("td",{children:e.jsx(ue,{id:p("value"),register:c,errors:j,defaultValue:w(),onChangeCapture:M=>{T&&b(p("label"),M.target.value)},onClick:M=>{o.value&&M.target.value==="value"&&v(p("value"))},validate:{required:a("This field is mandatory"),maxLength:{value:255,message:"max length is 255"}}})}),e.jsx("td",{children:e.jsxs("span",{className:"i-flex-center s-8",children:[e.jsx(U,{label:e.jsx("button",{type:"button",className:`acpt-btn-switch ${T?"active":""}`,onClick:M=>{M.preventDefault(),N(!T)},children:e.jsx(B,{icon:"bx:bx-link",width:"18px"})}),tip:a(T?"Label and value are linked":"Label and value are unlinked"),icon:!1}),e.jsx(U,{label:e.jsx(Ge,{control:y,defaultValue:typeof E=="boolean"?E:o.isDefault,errors:j,icon:"bx:check",id:p("isDefault"),externalOnChange:u}),tip:a("Default value"),icon:!1})]})}),e.jsx("td",{children:e.jsx(At,{boxId:l,fieldId:s,optionId:o.id,parentFieldId:i,optionIndex:t})})]})]})};Pt.propTypes={index:d.number.isRequired,boxIndex:d.number.isRequired,fieldIndex:d.number.isRequired,boxId:d.string.isRequired,fieldId:d.string.isRequired,parentFieldId:d.string,option:d.object.isRequired,handleIsDefault:d.func};const ua=({boxId:t,fieldId:n,parentFieldId:r})=>{const l=ae(),[s,i]=k.useState(!1),[o,u]=k.useState(null),[h,p]=k.useState(null),[c,j]=k.useState(!1);k.useEffect(()=>{c&&(i(!0),je("fetchDatasetsAction",{}).then(v=>{let m=[{value:null,label:a("Select"),items:[]}];v.records&&v.records.map(f=>{m.push({value:f.id,label:f.label?f.label:f.name,items:f.items?f.items:[]})}),u(m),i(!1)}).catch(v=>{console.error(v.message),i(!1)}))},[c]);const y=()=>{const v=o.filter(f=>f.value===h);if(v&&v.length!==1)return;v[0].items.map(f=>{const E={id:ye(),boxId:t,fieldId:n,label:f.label,value:f.value,isDefault:f.isDefault};l(Ct({boxId:t,fieldId:n,parentFieldId:r,option:E}))}),Re.success(a("Dataset loaded correctly")),j(!c)},b=[e.jsx(ee,{style:K.PRIMARY,disabled:h===null,onClick:v=>{v.preventDefault(),y()},children:a("Load dataset")}),e.jsx(ee,{style:K.DANGER,onClick:v=>{v.preventDefault(),j(!c)},children:a("Close")})];return e.jsxs(q.Fragment,{children:[e.jsx(Ce,{title:a("Load dataset"),visible:c,padding:0,buttons:b,children:s?e.jsx("div",{className:"p-24",children:a("Loading...")}):e.jsx("div",{className:"p-24",children:e.jsx("select",{id:"dataset",className:"form-control default",onChangeCapture:v=>p(v.target.value),children:o&&o.map(v=>e.jsx("option",{value:v.value,children:v.label}))})})}),e.jsx("a",{href:"#",onClick:v=>{v.preventDefault(),j(!c)},children:a("Load dataset")})]})};ua.propTypes={boxId:d.string.isRequired,fieldId:d.string.isRequired,parentFieldId:d.string.isRequired};const Lt=({boxId:t,boxIndex:n,fieldIndex:r,fieldId:l,parentFieldId:s,options:i,isMulti:o})=>{const u=document.globals;u.settings;const h=u.globals,p=ae(),{group:c}=ne(x=>x.metaState),[j]=Ie(),y=()=>`${re(c.boxes,t,l)}.options`,{control:b,setValue:v,resetField:m}=W(),{move:f}=ve({control:b,name:y()}),E=x=>{const{active:O,over:g}=x;if(O.id===g.id)return;const S=i.findIndex(T=>T.id===O.id),C=i.findIndex(T=>T.id===g.id);f(S,C)},D=()=>{const x={id:ye(),boxId:t,fieldId:l,label:"label",value:"value",isDefault:!1};p(Ct({boxId:t,fieldId:l,parentFieldId:s,option:x}))},R=({id:x,checked:O})=>{if(!o)for(let g=0;g<i.length;g++){const S=y()+"."+g+".isDefault";S!==x?v(S,!1):v(S,O)}};return e.jsxs("div",{className:"mt-24",children:[e.jsx("label",{className:"form-label",children:a("Options")}),i&&i.length>0?e.jsxs("div",{className:"responsive with-shadow b-rounded",children:[e.jsxs("table",{className:`acpt-table ${h.is_rtl?"rtl":""}`,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"10px"}}),e.jsx("th",{children:a("Label")}),e.jsx("th",{children:a("Value")}),e.jsx("th",{style:{width:"10px"}}),e.jsx("th",{style:{width:"10px"}})]})}),e.jsx("tbody",{ref:j,children:e.jsx(_e,{onDragEnd:E,items:i,children:i&&i.map((x,O)=>e.jsx(Pt,{index:O,boxIndex:n,fieldIndex:r,boxId:t,fieldId:l,parentFieldId:s,option:x,handleIsDefault:R}))})})]}),e.jsxs("div",{className:"p-24 i-flex-center s-8",children:[e.jsx("a",{href:"#",onClick:x=>{x.preventDefault(),D()},children:a("Add option")}),e.jsx(ua,{boxId:t,fieldId:l,parentFieldId:s})]})]}):e.jsxs("div",{className:"mt-8 b-maxi bg-white b-rounded p-24 flex-column s-12 text-center",children:[e.jsx("span",{children:a('No options already created. Create the first one now by clicking the button "Add option"!')}),e.jsxs("div",{className:"i-flex-center justify-center s-8",children:[e.jsx("a",{href:"#",onClick:x=>{x.preventDefault(),D()},children:a("Add option")}),e.jsx(ua,{boxId:t,fieldId:l,parentFieldId:s})]})]})]})};Lt.propTypes={boxId:d.string.isRequired,fieldId:d.string.isRequired,parentFieldId:d.string,boxIndex:d.number.isRequired,fieldIndex:d.number.isRequired,options:d.array.isRequired,isMulti:d.bool.isRequired};const Bt=({boxId:t,boxIndex:n,parentFieldIndex:r,parentFieldId:l,childrenFields:s,nestingLevel:i})=>{const o=i<Sa.MAX_NESTING;return e.jsxs("div",{className:"mt-24",children:[e.jsx("label",{className:"form-label",children:a("Children")}),e.jsx(gl,{addFieldEnabled:o,boxIndex:n,boxId:t,parentFieldIndex:r,parentFieldId:l,fields:s})]})};Bt.propTypes={boxId:d.string.isRequired,parentFieldId:d.string.isRequired,boxIndex:d.number.isRequired,parentFieldIndex:d.number.isRequired,childrenFields:d.array.isRequired,nestingLevel:d.number.isRequired};const $t=({boxIndex:t,boxId:n,blocks:r,parentFieldIndex:l,parentFieldId:s,addBlockEnabled:i=!0})=>{const o=ae(),{group:u}=ne(y=>y.metaState),{control:h}=W(),{move:p}=ve({control:h,name:`${re(u.boxes,n,s)}.blocks`}),c=y=>{const{active:b,over:v}=y;if(b.id===v.id)return;const m=r.findIndex(D=>D.id===b.id),f=r.findIndex(D=>D.id===v.id),E=Ae(r,m,f);p(m,f),o(ka({boxId:n,parentFieldId:s,sortedBlocks:E}))},j=()=>{const y={id:ye(),boxId:n,fieldId:s,label:"new-block",name:"new_block",fields:[],isSaved:!1};o(Bl({boxId:n,parentFieldId:s,block:y}))};return e.jsx(q.Fragment,{children:r&&r.length>0?e.jsxs(q.Fragment,{children:[e.jsx("div",{className:"s-24 flex-column",children:e.jsx(_e,{onDragEnd:c,items:r,children:r&&r.map((y,b)=>e.jsx(Pa,{parentFieldId:s,boxIndex:t,parentFieldIndex:l,blockIndex:b,boxId:n,block:y}))})}),i&&e.jsx("div",{className:"mt-24",children:e.jsx(ee,{type:"button",style:K.SECONDARY,onClick:y=>{y.preventDefault(),j()},children:a("Add block")})})]}):e.jsxs("div",{className:"mt-24 bg-white b-maxi b-rounded p-24 flex-column s-12 text-center",children:[e.jsx("span",{children:a('No blocks already created. Create the first one now by clicking the button "Add block"!')}),i&&e.jsx("div",{children:e.jsx(ee,{type:"button",style:K.SECONDARY,onClick:y=>{y.preventDefault(),j()},children:a("Add block")})})]})})};$t.propTypes={boxIndex:d.number.isRequired,boxId:d.string.isRequired,blocks:d.array.isRequired,parentFieldIndex:d.string,parentFieldId:d.string,addBlockEnabled:d.bool};const Ut=({boxId:t,boxIndex:n,parentFieldIndex:r,parentFieldId:l,blocks:s,nestingLevel:i})=>{const o=i<Sa.MAX_NESTING,[u]=Ie();return e.jsxs("div",{ref:u,className:"mt-24",children:[e.jsx("label",{className:"form-label",children:a("Blocks")}),e.jsx($t,{addBlockEnabled:o,boxIndex:n,boxId:t,parentFieldIndex:r,parentFieldId:l,blocks:s})]})};Ut.propTypes={boxId:d.string.isRequired,parentFieldId:d.string.isRequired,boxIndex:d.number.isRequired,parentFieldIndex:d.number.isRequired,blocks:d.array.isRequired,nestingLevel:d.number.isRequired};const Kt="OneToOneUni",Gt="OneToOneBi",La="OneToManyUni",Ba="OneToManyBi",Ht="ManyToOneUni",zt="ManyToOneBi",$a="ManyToManyUni",Ua="ManyToManyBi",Di=[{value:null,label:a("Select")},{value:Kt,label:a("One to One - Unidirectional")},{value:Gt,label:a("One to One - Bidirectional")},{value:La,label:a("One to Many - Unidirectional")},{value:Ba,label:a("One to Many - Bidirectional")},{value:Ht,label:a("Many to One - Unidirectional")},{value:zt,label:a("Many to One - Bidirectional")},{value:$a,label:a("Many to Many - Unidirectional")},{value:Ua,label:a("Many to Many - Bidirectional")}],Ei=[{value:null,label:a("Select")},{value:Kt,label:a("One to One - Unidirectional")},{value:La,label:a("One to Many - Unidirectional")},{value:Ht,label:a("Many to One - Unidirectional")},{value:$a,label:a("Many to Many - Unidirectional")}],Yt=t=>t===t===La||t===Ba||t===$a||t===Ua,at=t=>t===Gt||t===Ba||t===zt||t===Ua,Wt=({field:t,formId:n})=>{const s=document.globals.globals.find,i=t.relations&&t.relations.length>0?t.relations[0]:null,{control:o,register:u,resetField:h,setValue:p,formState:{errors:c}}=W(),j=P({control:o,name:n("relations.0.relationship")}),y=P({control:o,name:"id"}),[b,v]=k.useState([]),[m,f]=k.useState([]),[E,D]=k.useState([]);k.useEffect(()=>{je("fetchMetaAction",{}).then(S=>{let C=[],T=[{label:a("Select"),value:null}];S.records&&S.records.length>0&&S.records.filter(N=>N.id!==y).map(N=>{let w=[];N.boxes.map(_=>{C.push(_),w.push({label:_.UIName+" ("+N.name+")",value:_.id})}),w&&w.length>0&&T.push({label:N.name,options:w})}),v(C),f(T),i&&i.inversedBoxId&&O(i.inversedBoxId,C)}).catch(S=>console.error(S))},[]);const R=S=>{at(S)||(h(n("relations.0.inversedBoxId")),h(n("relations.0.inversedFieldId")))},x=(S,C)=>{p(n(`relations.0.${S}.type`),C),h(n("relations.0.relationship")),h(n("relations.0.inversedBoxId")),h(n("relations.0.inversedFieldId"))},O=(S,C)=>{let T=[{label:a("Select"),value:null}];const N=C.filter(w=>w.id===S);N&&N.length===1&&N[0].fields.map(w=>{T.push({label:w.name,value:w.id}),w.blocks&&w.blocks.length>0&&w.blocks.map(_=>{_.fields&&_.fields.length>0&&_.fields.map(M=>{T.push({label:M.name,value:M.id}),M.blocks&&M.blocks.length>0&&M.blocks.map(V=>{V.fields&&V.fields.length>0&&V.fields.map(G=>{T.push({label:G.name,value:G.id})})})})}),w.children&&w.children.length>0&&w.children.map(_=>{T.push({label:_.name,value:_.id}),_.children&&_.children.length>0&&_.children.map(M=>{T.push({label:M.name,value:M.id})})})}),D(T)};if(Ne(s))return null;const g=()=>{let S=[{label:a("Select"),value:null}];const C=s[pe.CUSTOM_POST_TYPE].filter(N=>N.value!==null),T=s[pe.TAXONOMY].filter(N=>N.value!==null);return C&&C.length>0&&S.push({label:a("Custom post types"),originalLabel:pe.CUSTOM_POST_TYPE,options:C}),T&&T.length>0&&S.push({label:a("Taxonomies"),originalLabel:pe.TAXONOMY,options:T}),S.push({label:a("Option pages"),originalLabel:pe.OPTION_PAGE,options:[{label:a("All pages"),value:pe.OPTION_PAGE}]}),S.push({label:a("Users"),originalLabel:pe.USER,options:[{label:a("All users"),value:pe.USER}]}),S};return e.jsxs("div",{className:"mt-24",children:[e.jsx(fe,{id:n("relations.0.relatedEntity.type"),value:t.type,register:u}),e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:a("Related entities and relationship")}),e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{className:"container align-end",children:[e.jsxs("div",{className:"col-4",children:[e.jsx("div",{className:"mb-8",children:e.jsx(U,{label:e.jsx("label",{className:"form-label",htmlFor:n("relations.0.from.value"),children:a("From")}),tip:a("The first entity involved in the relationship")})}),e.jsx(le,{register:u,id:n("relations.0.from.value"),errors:c,values:g(),onChangeCapture:S=>{x("from",S.target.selectedOptions[0].parentElement.dataset.original)},validate:{required:a("This field is mandatory")}})]}),e.jsxs("div",{className:"col-4",children:[e.jsx("div",{className:"mb-8",children:e.jsx(U,{label:e.jsx("label",{className:"form-label",htmlFor:n("relations.0.to.value"),children:a("To")}),tip:a("The second entity involved in the relationship")})}),e.jsx(le,{register:u,id:n("relations.0.to.value"),errors:c,values:g(),onChangeCapture:S=>{x("to",S.target.selectedOptions[0].parentElement.dataset.original)},validate:{required:a("This field is mandatory")}})]}),e.jsxs("div",{className:"col-4",children:[e.jsx("div",{className:"mb-8",children:e.jsx(U,{label:e.jsx("label",{className:"form-label",htmlFor:n("relations.0.relationship"),children:a("Relationship")}),tip:a("The relationship between the selected entities")})}),e.jsx(le,{register:u,id:n("relations.0.relationship"),errors:c,values:t.parentId?Ei:Di,onChangeCapture:S=>{R(S.target.value)},validate:{required:a("This field is mandatory")}})]})]}),at(j)&&e.jsxs("div",{className:"container align-end",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("div",{className:"mb-8",children:e.jsx(U,{label:e.jsxs("label",{className:"form-label",htmlFor:n("relations.0.inversedBoxId"),children:[a("Target field"),". ",a("Select field box from list")]}),tip:a("The inversed field is the target post type field which is related with this one in a bidirectional relation")})}),e.jsx(le,{register:u,id:n("relations.0.inversedBoxId"),errors:c,values:m,defaultValue:i&&i.inversedBoxId?i.inversedBoxId:null,onChangeCapture:S=>{O(S.target.value,b)},validate:{required:a("This field is mandatory")}})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("div",{className:"mb-8",children:e.jsx(U,{label:e.jsxs("label",{className:"form-label",htmlFor:n("relations.0.inversedFieldId"),children:[a("Target field"),". ",a("Select the inversed field on target")]}),tip:a("The inversed field is the target post type field which is related with this one in a bidirectional relation")})}),e.jsx(le,{register:u,id:n("relations.0.inversedFieldId"),errors:c,values:E,defaultValue:i&&i.inversedFieldId?i.inversedFieldId:null,validate:{required:a("This field is mandatory")}})]})]})]})]})]})};Wt.propTypes={formId:d.func.isRequired,field:d.object.isRequired};const Jt=({handleDeleteField:t,clonedFieldId:n,meta:r})=>{const s=(()=>{let i=null,o=null;return r.map(u=>{u.boxes&&u.boxes.map(h=>{h.fields&&h.fields.map(p=>{p.id===n&&(i=`[${h.label?h.label:h.name}] - ${p.label?p.label:p.name}`,o=p.type)})})}),{label:i,type:o}})();return e.jsxs("div",{className:"i-flex-center s-12 bg-pale-gray b-rounded p-12",children:[e.jsxs("div",{className:"i-flex-center s-4",children:[e.jsx("span",{children:s.label?s.label:"Loading..."}),s.type&&e.jsx(Ul,{fieldType:s.type,css:"with-border b-rounded p-8"})]}),e.jsx(U,{label:e.jsx("a",{href:"#",onClick:i=>{i.preventDefault(),t&&t(n)},children:e.jsx(B,{icon:"bx-trash",width:18,color:"#F94144"})}),tip:a("Delete this meta field"),icon:!1})]})};Jt.propTypes={meta:d.array.isRequired,handleDeleteField:d.object,clonedFieldId:d.string.isRequired};const Xt=({fields:t,meta:n,id:r})=>{const{setValue:l}=W(),s=i=>{const o=t.filter(u=>u!==i);l(r,o)};return!t||t.length===0?null:e.jsx("div",{className:"flex flex-wrap justify-center s-8",children:t&&t.length>0&&t.map(i=>e.jsx(Jt,{meta:n,clonedFieldId:i,handleDeleteField:s}))})};Xt.propTypes={id:d.string.isRequired,meta:d.array.isRequired,fields:d.array.isRequired};const Qt=({id:t,group:n,field:r,gindex:l,watchedDefaultValueObject:s})=>{const u=document.globals.globals.is_rtl,{setValue:h}=W(),p=b=>{let v=[];return b.boxes&&b.boxes.map(m=>{m.fields&&m.fields.map(f=>{f.id!==r.id&&v.push(f.id)})}),v},c=(b,v)=>{b.id&&v&&(v==="deselect"?h(t,Wa(s.filter(m=>!p(b).includes(m)))):v==="select"&&h(t,Wa([...s,...p(b)])))},j=(b,v)=>{const m=s;b?(m.push(v),h(t,m)):h(t,m.filter(f=>f!==v))},y=b=>{const v=s;return Ne(v)?!1:v.includes(b)};return p(n).length===0?null:e.jsxs("table",{id:n.id,className:`acpt-table with-border ${u?"rtl":""}`,children:[n.id!==null&&e.jsx("thead",{children:e.jsx("tr",{children:e.jsx("th",{style:{padding:"12px 24px"},colSpan:2,children:e.jsxs("div",{className:"flex-center flex-between s-8",children:[e.jsx("span",{children:n.name}),e.jsx("div",{children:e.jsxs("select",{className:"form-control sm",onChangeCapture:b=>{b.preventDefault();const v=b.target.value;v&&c(n,v)},children:[e.jsx("option",{value:null,children:a("Action")}),e.jsx("option",{value:"select",children:a("Select all")}),e.jsx("option",{value:"deselect",children:a("Deselect all")})]})})]})})})}),n.boxes&&n.boxes.length>0&&n.boxes.map((b,v)=>e.jsx("tbody",{children:b.fields&&b.fields.length>0&&b.fields.map((m,f)=>m.id!==r.id?e.jsx(q.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{id:m.id,width:10,children:e.jsxs("label",{className:"checkbox",htmlFor:`${t}_${l}_${v}_${f}`,children:[e.jsx("input",{name:t,type:"checkbox",id:`${t}_${l}_${v}_${f}`,checked:y(m.id),value:m.id,onChangeCapture:E=>j(E.target.checked,m.id)}),e.jsx("span",{})]})}),e.jsx("td",{children:e.jsxs("div",{className:"i-flex-center s-4",children:[e.jsxs("label",{htmlFor:`${t}_${l}_${v}_${f}`,className:"cursor-pointer text-ellipsis",children:["[",b.label?b.label:b.name,"] - ",m.label?m.label:m.name]}),e.jsx(Ul,{fieldType:m.type,css:"with-border b-rounded p-8"})]})})]})}):e.jsx("tr",{children:e.jsx("td",{colSpan:2,children:a("No boxes registered")})}))}))]})};Qt.propTypes={id:d.string.isRequired,gindex:d.number.isRequired,watchedDefaultValueObject:d.object.isRequired,field:d.object.isRequired,group:d.object.isRequired};const Zt=({id:t,field:n})=>{document.globals.globals.is_rtl;const{control:s,getValues:i}=W(),[o,u]=k.useState(!1),[h,p]=k.useState([]),[c,j]=k.useState(!1),y=P({control:s,name:t}),b=()=>{if(y){if(typeof y=="object")return y;try{return JSON.parse(y)}catch{try{return JSON.parse(`["${y}"]`)}catch{return[]}}}return[]};k.useEffect(()=>{v()},[]),k.useEffect(()=>{o===!0&&v()},[o]);const v=()=>{j(!0),je("fetchMetaAction",{page:1,perPage:999}).then(f=>{let E=[];f.records&&f.records.length>0&&(E=f.records);const D=i();E&&E.length>0&&E.map((R,x)=>{D.id===R.id&&(E[x]=D)}),p(E),j(!1)}).catch(f=>{console.error(f),j(!1)})},m=[e.jsx(ee,{style:K.DANGER,onClick:f=>{f.preventDefault(),u(!o)},children:a("Close")})];return e.jsxs(q.Fragment,{children:[e.jsx(Ce,{title:a("Select fields to clone"),visible:o,buttons:m,children:e.jsx(q.Fragment,{children:c?e.jsx("div",{className:"p-24 text-center",children:"Loading..."}):e.jsx(q.Fragment,{children:h&&h.length>0?e.jsx("div",{className:"flex-column s-24",children:e.jsx("div",{className:"flex-column s-24",style:{maxHeight:"450px",overflowY:"auto",scrollbarWidth:"thin",scrollbarGutter:"stable",scrollbarColor:"var(--acpt-light-gray) var(--acpt-pale-gray)",overflowX:"hidden",padding:"0 12px"},children:h.map((f,E)=>e.jsx(Qt,{group:f,field:n,id:t,gindex:E,watchedDefaultValueObject:b()}))})}):e.jsx(jl,{style:K.SECONDARY,children:a("No fields registered.")})})})}),e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:a("Fields to clone")}),e.jsxs("div",{style:{alignItems:"center"},className:"flex-column s-24",children:[c?e.jsx("div",{children:"Loading..."}):e.jsx(q.Fragment,{children:b()&&typeof b()=="object"&&b().length>0&&e.jsx(Xt,{fields:b(),meta:h,id:t})}),e.jsx("a",{style:{margin:"auto"},className:"acpt-btn acpt-btn acpt-btn-secondary",href:"#",onClick:f=>{f.preventDefault(),u(!o)},children:e.jsxs("div",{className:"i-flex-center s-4",children:[e.jsx(B,{icon:"bx:bx-copy-alt",width:18}),e.jsx("span",{children:a("Select fields to clone")})]})})]})]})]})};Zt.propTypes={field:d.object.isRequired};var Ka={},Kl={},en={exports:{}};(function(t){(function(n){var r={},l=Array.prototype,s=Object.prototype,i=s.hasOwnProperty,o=s.toString,u=l.forEach,h=l.indexOf,p=l.slice,c=function(R,x,O){var g,S,C;if(R){if(u&&R.forEach===u)R.forEach(x,O);else if(R.length===+R.length){for(S=0,C=R.length;S<C;S++)if(S in R&&x.call(O,R[S],S,R)===r)return}else for(g in R)if(i.call(R,g)&&x.call(O,R[g],g,R)===r)return}},j=function(R){return!!(R&&R.constructor&&R.call&&R.apply)},y=function(R){return c(p.call(arguments,1),function(x){var O;for(O in x)x[O]!==void 0&&(R[O]=x[O])}),R},b=function(R,x,O){var g;if(x){if(h)return h.call(x,R,O);for(g=x.length,O=O?O<0?Math.max(0,g+O):O:0;O<g;O++)if(O in x&&x[O]===R)return O}return-1},v={};c("Boolean Number String Function Array Date RegExp Object".split(" "),function(R,x){v["[object "+R+"]"]=R.toLowerCase()});var m=function(R){return R==null?String(R):v[o.call(R)]||"object"},f={},E={};function D(R){var x=E[R]={};return c(R.split(/\s+/),function(O){x[O]=!0}),x}f.Callbacks=function(R){R=typeof R=="string"?E[R]||D(R):y({},R);var x,O,g,S,C,T,N=[],w=!R.once&&[],_=function(V){for(x=R.memory&&V,O=!0,T=S||0,S=0,C=N.length,g=!0;N&&T<C;T++)if(N[T].apply(V[0],V[1])===!1&&R.stopOnFalse){x=!1;break}g=!1,N&&(w?w.length&&_(w.shift()):x?N=[]:M.disable())},M={add:function(){if(N){var V=N.length;(function G(ie){c(ie,function(he){var ge=m(he);ge==="function"?(!R.unique||!M.has(he))&&N.push(he):he&&he.length&&ge!=="string"&&G(he)})})(arguments),g?C=N.length:x&&(S=V,_(x))}return this},remove:function(){return N&&c(arguments,function(V){for(var G;(G=b(V,N,G))>-1;)N.splice(G,1),g&&(G<=C&&C--,G<=T&&T--)}),this},has:function(V){return b(V,N)>-1},empty:function(){return N=[],this},disable:function(){return N=w=x=void 0,this},disabled:function(){return!N},lock:function(){return w=void 0,x||M.disable(),this},locked:function(){return!w},fireWith:function(V,G){return G=G||[],G=[V,G.slice?G.slice():G],N&&(!O||w)&&(g?w.push(G):_(G)),this},fire:function(){return M.fireWith(this,arguments),this},fired:function(){return!!O}};return M},f.Deferred=function(R){var x=[["resolve","done",f.Callbacks("once memory"),"resolved"],["reject","fail",f.Callbacks("once memory"),"rejected"],["notify","progress",f.Callbacks("memory")]],O="pending",g={state:function(){return O},always:function(){return S.done(arguments).fail(arguments),this},then:function(){var C=arguments;return f.Deferred(function(T){c(x,function(N,w){var _=N[0],M=C[w];S[N[1]](j(M)?function(){var V;try{V=M.apply(this,arguments)}catch(G){T.reject(G);return}V&&j(V.promise)?V.promise().done(T.resolve).fail(T.reject).progress(T.notify):T[_!=="notify"?"resolveWith":_+"With"](this===S?T:this,[V])}:T[_])}),C=null}).promise()},promise:function(C){return C!=null?y(C,g):g}},S={};return g.pipe=g.then,c(x,function(C,T){var N=C[2],w=C[3];g[C[1]]=N.add,w&&N.add(function(){O=w},x[T^1][2].disable,x[2][2].lock),S[C[0]]=N.fire,S[C[0]+"With"]=N.fireWith}),g.promise(S),R&&R.call(S,S),S},f.when=function(R){var x=0,O=m(R)==="array"&&arguments.length===1?R:p.call(arguments),g=O.length,S=g!==1||R&&j(R.promise)?g:0,C=S===1?R:f.Deferred(),T=function(M,V,G){return function(ie){V[M]=this,G[M]=arguments.length>1?p.call(arguments):ie,G===N?C.notifyWith(V,G):--S||C.resolveWith(V,G)}},N,w,_;if(g>1)for(N=new Array(g),w=new Array(g),_=new Array(g);x<g;x++)O[x]&&j(O[x].promise)?O[x].promise().done(T(x,_,O)).fail(C.reject).progress(T(x,w,N)):--S;return S||C.resolveWith(_,O),C.promise()},t.exports?t.exports=f:typeof n._<"u"?n._.mixin(f):n._=f})(vs)})(en);var Fi=en.exports,Nl={};Object.defineProperty(Nl,"__esModule",{value:!0});Nl.default=void 0;var Oi=[["Afghanistan ()","af","93"],["Albania (Shqipri)","al","355"],["Algeria ()","dz","213"],["American Samoa","as","1684"],["Andorra","ad","376"],["Angola","ao","244"],["Anguilla","ai","1264"],["Antigua and Barbuda","ag","1268"],["Argentina","ar","54"],["Armenia ()","am","374"],["Aruba","aw","297"],["Australia","au","61",0],["Austria (sterreich)","at","43"],["Azerbaijan (Azrbaycan)","az","994"],["Bahamas","bs","1242"],["Bahrain ()","bh","973"],["Bangladesh ()","bd","880"],["Barbados","bb","1246"],["Belarus ()","by","375"],["Belgium (Belgi)","be","32"],["Belize","bz","501"],["Benin (Bnin)","bj","229"],["Bermuda","bm","1441"],["Bhutan ()","bt","975"],["Bolivia","bo","591"],["Bosnia and Herzegovina (  )","ba","387"],["Botswana","bw","267"],["Brazil (Brasil)","br","55"],["British Indian Ocean Territory","io","246"],["British Virgin Islands","vg","1284"],["Brunei","bn","673"],["Bulgaria ()","bg","359"],["Burkina Faso","bf","226"],["Burundi (Uburundi)","bi","257"],["Cambodia ()","kh","855"],["Cameroon (Cameroun)","cm","237"],["Canada","ca","1",1,["204","226","236","249","250","289","306","343","365","367","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]],["Cape Verde (Kabu Verdi)","cv","238"],["Caribbean Netherlands","bq","599",1],["Cayman Islands","ky","1345"],["Central African Republic (Rpublique centrafricaine)","cf","236"],["Chad (Tchad)","td","235"],["Chile","cl","56"],["China ()","cn","86"],["Christmas Island","cx","61",2],["Cocos (Keeling) Islands","cc","61",1],["Colombia","co","57"],["Comoros ( )","km","269"],["Congo (DRC) (Jamhuri ya Kidemokrasia ya Kongo)","cd","243"],["Congo (Republic) (Congo-Brazzaville)","cg","242"],["Cook Islands","ck","682"],["Costa Rica","cr","506"],["Cte dIvoire","ci","225"],["Croatia (Hrvatska)","hr","385"],["Cuba","cu","53"],["Curaao","cw","599",0],["Cyprus ()","cy","357"],["Czech Republic (esk republika)","cz","420"],["Denmark (Danmark)","dk","45"],["Djibouti","dj","253"],["Dominica","dm","1767"],["Dominican Republic (Repblica Dominicana)","do","1",2,["809","829","849"]],["Ecuador","ec","593"],["Egypt ()","eg","20"],["El Salvador","sv","503"],["Equatorial Guinea (Guinea Ecuatorial)","gq","240"],["Eritrea","er","291"],["Estonia (Eesti)","ee","372"],["Ethiopia","et","251"],["Falkland Islands (Islas Malvinas)","fk","500"],["Faroe Islands (Froyar)","fo","298"],["Fiji","fj","679"],["Finland (Suomi)","fi","358",0],["France","fr","33"],["French Guiana (Guyane franaise)","gf","594"],["French Polynesia (Polynsie franaise)","pf","689"],["Gabon","ga","241"],["Gambia","gm","220"],["Georgia ()","ge","995"],["Germany (Deutschland)","de","49"],["Ghana (Gaana)","gh","233"],["Gibraltar","gi","350"],["Greece ()","gr","30"],["Greenland (Kalaallit Nunaat)","gl","299"],["Grenada","gd","1473"],["Guadeloupe","gp","590",0],["Guam","gu","1671"],["Guatemala","gt","502"],["Guernsey","gg","44",1],["Guinea (Guine)","gn","224"],["Guinea-Bissau (Guin Bissau)","gw","245"],["Guyana","gy","592"],["Haiti","ht","509"],["Honduras","hn","504"],["Hong Kong ()","hk","852"],["Hungary (Magyarorszg)","hu","36"],["Iceland (sland)","is","354"],["India ()","in","91"],["Indonesia","id","62"],["Iran ()","ir","98"],["Iraq ()","iq","964"],["Ireland","ie","353"],["Isle of Man","im","44",2],["Israel ()","il","972"],["Italy (Italia)","it","39",0],["Jamaica","jm","1876"],["Japan ()","jp","81"],["Jersey","je","44",3],["Jordan ()","jo","962"],["Kazakhstan ()","kz","7",1],["Kenya","ke","254"],["Kiribati","ki","686"],["Kosovo","xk","383"],["Kuwait ()","kw","965"],["Kyrgyzstan ()","kg","996"],["Laos ()","la","856"],["Latvia (Latvija)","lv","371"],["Lebanon ()","lb","961"],["Lesotho","ls","266"],["Liberia","lr","231"],["Libya ()","ly","218"],["Liechtenstein","li","423"],["Lithuania (Lietuva)","lt","370"],["Luxembourg","lu","352"],["Macau ()","mo","853"],["Macedonia (FYROM) ()","mk","389"],["Madagascar (Madagasikara)","mg","261"],["Malawi","mw","265"],["Malaysia","my","60"],["Maldives","mv","960"],["Mali","ml","223"],["Malta","mt","356"],["Marshall Islands","mh","692"],["Martinique","mq","596"],["Mauritania ()","mr","222"],["Mauritius (Moris)","mu","230"],["Mayotte","yt","262",1],["Mexico (Mxico)","mx","52"],["Micronesia","fm","691"],["Moldova (Republica Moldova)","md","373"],["Monaco","mc","377"],["Mongolia ()","mn","976"],["Montenegro (Crna Gora)","me","382"],["Montserrat","ms","1664"],["Morocco ()","ma","212",0],["Mozambique (Moambique)","mz","258"],["Myanmar (Burma) ()","mm","95"],["Namibia (Namibi)","na","264"],["Nauru","nr","674"],["Nepal ()","np","977"],["Netherlands (Nederland)","nl","31"],["New Caledonia (Nouvelle-Caldonie)","nc","687"],["New Zealand","nz","64"],["Nicaragua","ni","505"],["Niger (Nijar)","ne","227"],["Nigeria","ng","234"],["Niue","nu","683"],["Norfolk Island","nf","672"],["North Korea (   )","kp","850"],["Northern Mariana Islands","mp","1670"],["Norway (Norge)","no","47",0],["Oman ()","om","968"],["Pakistan ()","pk","92"],["Palau","pw","680"],["Palestine ()","ps","970"],["Panama (Panam)","pa","507"],["Papua New Guinea","pg","675"],["Paraguay","py","595"],["Peru (Per)","pe","51"],["Philippines","ph","63"],["Poland (Polska)","pl","48"],["Portugal","pt","351"],["Puerto Rico","pr","1",3,["787","939"]],["Qatar ()","qa","974"],["Runion (La Runion)","re","262",0],["Romania (Romnia)","ro","40"],["Russia ()","ru","7",0],["Rwanda","rw","250"],["Saint Barthlemy (Saint-Barthlemy)","bl","590",1],["Saint Helena","sh","290"],["Saint Kitts and Nevis","kn","1869"],["Saint Lucia","lc","1758"],["Saint Martin (Saint-Martin (partie franaise))","mf","590",2],["Saint Pierre and Miquelon (Saint-Pierre-et-Miquelon)","pm","508"],["Saint Vincent and the Grenadines","vc","1784"],["Samoa","ws","685"],["San Marino","sm","378"],["So Tom and Prncipe (So Tom e Prncipe)","st","239"],["Saudi Arabia (  )","sa","966"],["Senegal (Sngal)","sn","221"],["Serbia ()","rs","381"],["Seychelles","sc","248"],["Sierra Leone","sl","232"],["Singapore","sg","65"],["Sint Maarten","sx","1721"],["Slovakia (Slovensko)","sk","421"],["Slovenia (Slovenija)","si","386"],["Solomon Islands","sb","677"],["Somalia (Soomaaliya)","so","252"],["South Africa","za","27"],["South Korea ()","kr","82"],["South Sudan ( )","ss","211"],["Spain (Espaa)","es","34"],["Sri Lanka ( )","lk","94"],["Sudan ()","sd","249"],["Suriname","sr","597"],["Svalbard and Jan Mayen","sj","47",1],["Swaziland","sz","268"],["Sweden (Sverige)","se","46"],["Switzerland (Schweiz)","ch","41"],["Syria ()","sy","963"],["Taiwan ()","tw","886"],["Tajikistan","tj","992"],["Tanzania","tz","255"],["Thailand ()","th","66"],["Timor-Leste","tl","670"],["Togo","tg","228"],["Tokelau","tk","690"],["Tonga","to","676"],["Trinidad and Tobago","tt","1868"],["Tunisia ()","tn","216"],["Turkey (Trkiye)","tr","90"],["Turkmenistan","tm","993"],["Turks and Caicos Islands","tc","1649"],["Tuvalu","tv","688"],["U.S. Virgin Islands","vi","1340"],["Uganda","ug","256"],["Ukraine ()","ua","380"],["United Arab Emirates (  )","ae","971"],["United Kingdom","gb","44",0],["United States","us","1",0],["Uruguay","uy","598"],["Uzbekistan (Ozbekiston)","uz","998"],["Vanuatu","vu","678"],["Vatican City (Citt del Vaticano)","va","39",1],["Venezuela","ve","58"],["Vietnam (Vit Nam)","vn","84"],["Wallis and Futuna","wf","681"],["Western Sahara ( )","eh","212",1],["Yemen ()","ye","967"],["Zambia","zm","260"],["Zimbabwe","zw","263"],["land Islands","ax","358",1]],ca;function ki(t){return t.map(function(n){return{name:n[0],iso2:n[1],dialCode:n[2],priority:n[3]||0,areaCodes:n[4]||null}})}function ln(t){ca=ki(t||Oi)}function _i(){return ca||ln(),ca}var Ii={initialize:ln,getCountries:_i},qi=Ii;Nl.default=qi;var Gl={},Hl={},Cl={};Object.defineProperty(Cl,"__esModule",{value:!0});Cl.default=void 0;var Mi=Vi(Nl);function Vi(t){return t&&t.__esModule?t:{default:t}}function El(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?El=function(r){return typeof r}:El=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},El(t)}var Ai={arraysEqual:function(n,r){if(n===r)return!0;if(n===null||r===null||n.length!==r.length)return!1;for(var l=0;l<n.length;++l)if(n[l]!==r[l])return!1;return!0},shallowEquals:function(n,r){if(n===r)return!0;for(var l in n)if(n[l]!==r[l])if(Array.isArray(n[l])&&Array.isArray(r[l])){if(!this.arraysEqual(n[l],r[l]))return!1}else return!1;for(var s in r)if(n.hasOwnProperty(s)===!1)return!1;return!0},trim:function(n){var r=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;return n?n.replace(r,""):""},isNumeric:function(n){return n-parseFloat(n)>=0},retrieveLiIndex:function(n){if(!n)return-1;for(var r=n.parentNode.childNodes,l=0,s=0,i=r.length;s<i;s++){if(r[s]===n)return l;r[s].nodeType===1&&r[s].tagName.toLowerCase()==="li"&&(l+=1)}return-1},getNumeric:function(n){return n.replace(/\D/g,"")},startsWith:function(n,r){return n.substr(0,r.length).toUpperCase()===r},isWindow:function(n){return n!==null&&n===n.window},getWindow:function(n){return this.isWindow(n)?n:n.nodeType===9&&n.defaultView},offset:function(n){var r=null,l=null,s={top:0,left:0},i=n&&n.ownerDocument;return r=i.documentElement,El(n.getBoundingClientRect)!=="undefined"&&(s=n.getBoundingClientRect()),l=this.getWindow(i),{top:s.top+l.pageYOffset-r.clientTop,left:s.left+l.pageXOffset-r.clientLeft}},getOuterHeight:function(n){return n.offsetHeight+parseFloat(window.getComputedStyle(n).getPropertyValue("margin-top"))+parseFloat(window.getComputedStyle(n).getPropertyValue("margin-bottom"))},getCountryData:function(n,r,l,s,i){for(var o=l?Mi.default.getCountries():n,u=0;u<o.length;u++)if(o[u].iso2===r)return o[u];return s?null:(typeof i=="function"&&i(r),{})},findIndex:function(n,r){var l=-1;return n.some(function(s,i){if(r(s))return l=i,!0}),l},getCursorPositionAfterFormating:function(n,r,l){if(r===l)return n.length;var s=0;if(r.length>l.length)for(var i=0,o=0;i<n.length&&o<l.length;i+=1)n[i]!==l[o]?isNaN(l[o])&&!isNaN(n[i])?(i-=1,o+=1,s+=1):s-=1:o+=1;else for(var u=0,h=0;u<n.length&&h<l.length;h+=1)n[u]!==l[h]?isNaN(n[u])&&!isNaN(l[h])?(h-=1,u+=1,s-=1):s+=1:u+=1;return n.length+s}};Cl.default=Ai;var zl={};Object.defineProperty(zl,"__esModule",{value:!0});zl.default=void 0;var bl=Pi(k);function Pi(t){return t&&t.__esModule?t:{default:t}}var Ga=function(n){var r=n.dialCode,l=n.isoCode,s=n.name,i=n.onMouseOver,o=n.onFocus,u=n.onClick,h=n.flagRef,p=n.innerFlagRef,c=n.countryClass;return bl.default.createElement("li",{className:c,"data-dial-code":r,"data-country-code":l,onMouseOver:i,onFocus:o,onClick:u},bl.default.createElement("div",{ref:h,className:"flag-box"},bl.default.createElement("div",{ref:p,className:"iti-flag ".concat(l)})),bl.default.createElement("span",{className:"country-name"},s),bl.default.createElement("span",{className:"dial-code"},"+ ".concat(r)))};Ga.defaultProps={onFocus:function(){},onMouseOver:function(){},onClick:function(){}};var Li=Ga;zl.default=Li;Ga.__docgenInfo={description:"",methods:[],displayName:"FlagBox",props:{onFocus:{defaultValue:{value:"() => {}",computed:!1},type:{name:"func"},required:!1,description:""},onMouseOver:{defaultValue:{value:"() => {}",computed:!1},type:{name:"func"},required:!1,description:""},onClick:{defaultValue:{value:"() => {}",computed:!1},type:{name:"func"},required:!1,description:""},dialCode:{type:{name:"string"},required:!0,description:""},isoCode:{type:{name:"string"},required:!0,description:""},name:{type:{name:"string"},required:!0,description:""},flagRef:{type:{name:"func"},required:!1,description:""},innerFlagRef:{type:{name:"func"},required:!1,description:""},countryClass:{type:{name:"string"},required:!0,description:""}}};Object.defineProperty(Hl,"__esModule",{value:!0});Hl.default=void 0;var Sl=$i(k),tt=Ha(Ia),ta=Ha(Cl),Bi=Ha(zl);function Ha(t){return t&&t.__esModule?t:{default:t}}function $i(t){if(t&&t.__esModule)return t;var n={};if(t!=null){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var l=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};l.get||l.set?Object.defineProperty(n,r,l):n[r]=t[r]}}return n.default=t,n}function Fl(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Fl=function(r){return typeof r}:Fl=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Fl(t)}function Ui(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function Ki(t,n){for(var r=0;r<n.length;r++){var l=n[r];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function Gi(t,n,r){return n&&Ki(t.prototype,n),t}function Hi(t,n){return n&&(Fl(n)==="object"||typeof n=="function")?n:nl(t)}function pa(t){return pa=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},pa(t)}function zi(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&ha(t,n)}function ha(t,n){return ha=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},ha(t,n)}function nl(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function na(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}var an=function(t){zi(n,t);function n(){var r,l;Ui(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return l=Hi(this,(r=pa(n)).call.apply(r,[this].concat(i))),na(nl(nl(l)),"setDropdownPosition",function(){l.listElement.classList.remove("hide");var u=l.props.inputTop,h=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop,p=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=l.props.inputOuterHeight,j=ta.default.getOuterHeight(l.listElement),y=u+c+j<h+p,b=u-j>h,v=!y&&b?"-".concat(j-1,"px"):"";l.listElement.style.top=v,l.listElement.classList.remove("v-hide")}),na(nl(nl(l)),"appendListItem",function(u){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,p=l.props.preferredCountries.length;return u.map(function(c,j){var y=h?j:j+p,b={country:!0,highlight:l.props.highlightedCountry===y,preferred:h},v=(0,tt.default)(b),m=l.props.isMobile?function(){}:l.handleMouseOver,f=h?"pref-":"";return Sl.default.createElement(Bi.default,{key:"".concat(f).concat(c.iso2),dialCode:c.dialCode,isoCode:c.iso2,name:c.name,onMouseOver:m,onClick:function(){return l.props.setFlag(c.iso2)},onFocus:m,flagRef:function(D){l.selectedFlag=D},innerFlagRef:function(D){l.selectedFlagInner=D},countryClass:v})})}),na(nl(nl(l)),"handleMouseOver",function(u){if(u.currentTarget.getAttribute("class").indexOf("country")>-1){var h=ta.default.retrieveLiIndex(u.currentTarget);l.props.changeHighlightCountry(!0,h)}}),l}return Gi(n,[{key:"shouldComponentUpdate",value:function(l){var s=!ta.default.shallowEquals(this.props,l);return s&&l.showDropdown&&(this.listElement.classList.add("v-hide"),this.setDropdownPosition()),s}},{key:"render",value:function(){var l=this,s=this.props,i=s.preferredCountries,o=s.countries,u=s.showDropdown,h=(0,tt.default)("country-list",{hide:!u}),p=this.appendListItem(i,!0),c=this.appendListItem(o),j=Sl.default.createElement("div",{className:"divider"});return Sl.default.createElement("ul",{ref:function(b){l.listElement=b},className:h},p,i.length>0?j:null,c)}}]),n}(Sl.Component);Hl.default=an;an.__docgenInfo={description:"",methods:[{name:"setDropdownPosition",docblock:null,modifiers:[],params:[],returns:null},{name:"appendListItem",docblock:null,modifiers:[],params:[{name:"countries",type:null},{name:"isPreferred",type:null}],returns:null},{name:"handleMouseOver",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null}],displayName:"CountryList",props:{setFlag:{type:{name:"func"},required:!1,description:""},countries:{type:{name:"arrayOf",value:{name:"object"}},required:!1,description:""},inputTop:{type:{name:"number"},required:!1,description:""},inputOuterHeight:{type:{name:"number"},required:!1,description:""},preferredCountries:{type:{name:"arrayOf",value:{name:"object"}},required:!1,description:""},highlightedCountry:{type:{name:"number"},required:!1,description:""},changeHighlightCountry:{type:{name:"func"},required:!1,description:""},showDropdown:{type:{name:"bool"},required:!1,description:""},isMobile:{type:{name:"bool"},required:!1,description:""}}};var Yl={};Object.defineProperty(Yl,"__esModule",{value:!0});Yl.default=void 0;var sa=Ji(k),Yi=Wi(xs);function Wi(t){return t&&t.__esModule?t:{default:t}}function Ji(t){if(t&&t.__esModule)return t;var n={};if(t!=null){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var l=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};l.get||l.set?Object.defineProperty(n,r,l):n[r]=t[r]}}return n.default=t,n}function Ol(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ol=function(r){return typeof r}:Ol=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ol(t)}function Xi(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function Qi(t,n){for(var r=0;r<n.length;r++){var l=n[r];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function Zi(t,n,r){return n&&Qi(t.prototype,n),t}function er(t,n){return n&&(Ol(n)==="object"||typeof n=="function")?n:lr(t)}function lr(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ma(t){return ma=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},ma(t)}function ar(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&fa(t,n)}function fa(t,n){return fa=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},fa(t,n)}var tn=function(t){ar(n,t);function n(r){var l;return Xi(this,n),l=er(this,ma(n).call(this,r)),l.modalTarget=document.createElement("div"),l.modalTarget.className="intl-tel-input iti-container",l}return Zi(n,[{key:"componentDidMount",value:function(){document.body.appendChild(this.modalTarget)}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.modalTarget)}},{key:"render",value:function(){return Yi.default.createPortal(sa.default.createElement(sa.Fragment,null,this.props.children),this.modalTarget)}}]),n}(sa.Component);Yl.default=tn;tn.__docgenInfo={description:"",methods:[],displayName:"RootModal",props:{children:{type:{name:"node"},required:!1,description:""}}};Object.defineProperty(Gl,"__esModule",{value:!0});Gl.default=void 0;var Je=sr(k),nt=za(Ia),tr=za(Hl),nr=za(Yl);function za(t){return t&&t.__esModule?t:{default:t}}function sr(t){if(t&&t.__esModule)return t;var n={};if(t!=null){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var l=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};l.get||l.set?Object.defineProperty(n,r,l):n[r]=t[r]}}return n.default=t,n}function kl(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?kl=function(r){return typeof r}:kl=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},kl(t)}function ir(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function rr(t,n){for(var r=0;r<n.length;r++){var l=n[r];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function or(t,n,r){return n&&rr(t.prototype,n),t}function dr(t,n){return n&&(kl(n)==="object"||typeof n=="function")?n:Ue(t)}function ba(t){return ba=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},ba(t)}function ur(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&va(t,n)}function va(t,n){return va=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},va(t,n)}function Ue(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vl(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}var nn=function(t){ur(n,t);function n(){var r,l;ir(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return l=dr(this,(r=ba(n)).call.apply(r,[this].concat(i))),vl(Ue(Ue(l)),"genSelectedDialCode",function(){var u=l.props,h=u.separateDialCode,p=u.dialCode;return h?Je.default.createElement("div",{className:"selected-dial-code"},p):null}),vl(Ue(Ue(l)),"genArrow",function(){var u=l.props,h=u.allowDropdown,p=u.showDropdown,c=(0,nt.default)("arrow",p?"up":"down");return h?Je.default.createElement("div",{className:c}):null}),vl(Ue(Ue(l)),"genFlagClassName",function(){return(0,nt.default)("iti-flag",vl({},l.props.countryCode,!!l.props.countryCode))}),vl(Ue(Ue(l)),"genCountryList",function(){var u=l.props,h=u.dropdownContainer,p=u.showDropdown,c=u.isMobile,j=u.allowDropdown,y=u.setFlag,b=u.countries,v=u.inputTop,m=u.inputOuterHeight,f=u.preferredCountries,E=u.highlightedCountry,D=u.changeHighlightCountry;return Je.default.createElement(tr.default,{ref:function(x){l.countryList=x},dropdownContainer:h,isMobile:c,showDropdown:j&&p,setFlag:y,countries:b,inputTop:v,inputOuterHeight:m,preferredCountries:f,highlightedCountry:E,changeHighlightCountry:D})}),l}return or(n,[{key:"render",value:function(){var l=this.props,s=l.refCallback,i=l.allowDropdown,o=l.clickSelectedFlag,u=l.handleSelectedFlagKeydown,h=l.titleTip,p=l.dropdownContainer,c=l.showDropdown;return Je.default.createElement("div",{ref:s,className:"flag-container"},Je.default.createElement("div",{className:"selected-flag",tabIndex:i?"0":"",onClick:o,onKeyDown:u,title:h},Je.default.createElement("div",{className:this.genFlagClassName()}),this.genSelectedDialCode(),this.genArrow()),p&&c?Je.default.createElement(nr.default,null,this.genCountryList()):this.genCountryList())}}]),n}(Je.Component);Gl.default=nn;nn.__docgenInfo={description:"",methods:[{name:"genSelectedDialCode",docblock:null,modifiers:[],params:[],returns:null},{name:"genArrow",docblock:null,modifiers:[],params:[],returns:null},{name:"genFlagClassName",docblock:null,modifiers:[],params:[],returns:null},{name:"genCountryList",docblock:null,modifiers:[],params:[],returns:null}],displayName:"FlagDropDown",props:{allowDropdown:{type:{name:"bool"},required:!1,description:""},dropdownContainer:{type:{name:"string"},required:!1,description:""},separateDialCode:{type:{name:"bool"},required:!1,description:""},dialCode:{type:{name:"string"},required:!1,description:""},countryCode:{type:{name:"string"},required:!1,description:""},showDropdown:{type:{name:"bool"},required:!1,description:""},clickSelectedFlag:{type:{name:"func"},required:!1,description:""},handleSelectedFlagKeydown:{type:{name:"func"},required:!1,description:""},isMobile:{type:{name:"bool"},required:!1,description:""},setFlag:{type:{name:"func"},required:!1,description:""},countries:{type:{name:"arrayOf",value:{name:"object"}},required:!1,description:""},inputTop:{type:{name:"number"},required:!1,description:""},inputOuterHeight:{type:{name:"number"},required:!1,description:""},preferredCountries:{type:{name:"arrayOf",value:{name:"object"}},required:!1,description:""},highlightedCountry:{type:{name:"number"},required:!1,description:""},changeHighlightCountry:{type:{name:"func"},required:!1,description:""},titleTip:{type:{name:"string"},required:!1,description:""},refCallback:{type:{name:"func"},required:!0,description:""}}};var Wl={};Object.defineProperty(Wl,"__esModule",{value:!0});Wl.default=void 0;var st=cr(k);function cr(t){if(t&&t.__esModule)return t;var n={};if(t!=null){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var l=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};l.get||l.set?Object.defineProperty(n,r,l):n[r]=t[r]}}return n.default=t,n}function _l(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_l=function(r){return typeof r}:_l=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_l(t)}function xa(){return xa=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(t[l]=r[l])}return t},xa.apply(this,arguments)}function pr(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function hr(t,n){for(var r=0;r<n.length;r++){var l=n[r];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function mr(t,n,r){return n&&hr(t.prototype,n),t}function fr(t,n){return n&&(_l(n)==="object"||typeof n=="function")?n:Ke(t)}function ga(t){return ga=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},ga(t)}function br(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&ya(t,n)}function ya(t,n){return ya=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},ya(t,n)}function Ke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tl(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}var sn=function(t){br(n,t);function n(){var r,l;pr(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return l=fr(this,(r=ga(n)).call.apply(r,[this].concat(i))),Tl(Ke(Ke(l)),"state",{hasFocus:!1}),Tl(Ke(Ke(l)),"refHandler",function(u){l.tel=u,l.props.refCallback(u)}),Tl(Ke(Ke(l)),"handleBlur",function(u){l.setState({hasFocus:!1}),typeof l.props.handleOnBlur=="function"&&l.props.handleOnBlur(u)}),Tl(Ke(Ke(l)),"handleFocus",function(u){l.setState({hasFocus:!0}),typeof l.props.handleOnFocus=="function"&&l.props.handleOnFocus(u)}),l}return mr(n,[{key:"componentDidUpdate",value:function(){this.state.hasFocus&&this.tel.setSelectionRange(this.props.cursorPosition,this.props.cursorPosition)}},{key:"render",value:function(){return st.default.createElement("input",xa({},this.props.inputProps,{ref:this.refHandler,type:"tel",autoComplete:this.props.autoComplete,className:this.props.className,disabled:this.props.disabled,readOnly:this.props.readonly,name:this.props.fieldName,id:this.props.fieldId,value:this.props.value,placeholder:this.props.placeholder,onChange:this.props.handleInputChange,onBlur:this.handleBlur,onFocus:this.handleFocus,autoFocus:this.props.autoFocus}))}}]),n}(st.Component);Wl.default=sn;sn.__docgenInfo={description:"",methods:[{name:"refHandler",docblock:null,modifiers:[],params:[{name:"element",type:null}],returns:null},{name:"handleBlur",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"handleFocus",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null}],displayName:"TelInput",props:{className:{type:{name:"string"},required:!1,description:""},disabled:{type:{name:"bool"},required:!1,description:""},readonly:{type:{name:"bool"},required:!1,description:""},fieldName:{type:{name:"string"},required:!1,description:""},fieldId:{type:{name:"string"},required:!1,description:""},value:{type:{name:"string"},required:!1,description:""},placeholder:{type:{name:"string"},required:!1,description:""},handleInputChange:{type:{name:"func"},required:!1,description:""},handleOnBlur:{type:{name:"func"},required:!1,description:""},handleOnFocus:{type:{name:"func"},required:!1,description:""},autoFocus:{type:{name:"bool"},required:!1,description:""},autoComplete:{type:{name:"string"},required:!1,description:""},inputProps:{type:{name:"object"},required:!1,description:""},refCallback:{type:{name:"func"},required:!0,description:""},cursorPosition:{type:{name:"number"},required:!1,description:""}}};var Jl={};Object.defineProperty(Jl,"__esModule",{value:!0});Jl.KEYS=void 0;var vr={UP:38,DOWN:40,ENTER:13,ESC:27,PLUS:43,A:65,Z:90,SPACE:32,TAB:9};Jl.KEYS=vr;Object.defineProperty(Kl,"__esModule",{value:!0});Kl.default=void 0;var Rl=jr(k),xr=hl(Ia),ia=hl(Fi),il=hl(Nl),gr=hl(Gl),yr=hl(Wl),xe=hl(Cl),De=Jl;function hl(t){return t&&t.__esModule?t:{default:t}}function jr(t){if(t&&t.__esModule)return t;var n={};if(t!=null){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var l=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};l.get||l.set?Object.defineProperty(n,r,l):n[r]=t[r]}}return n.default=t,n}function Il(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Il=function(r){return typeof r}:Il=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Il(t)}function Nr(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function Cr(t,n){return n&&(Il(n)==="object"||typeof n=="function")?n:I(t)}function ja(t){return ja=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},ja(t)}function it(t,n){for(var r=0;r<n.length;r++){var l=n[r];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function rt(t,n,r){return n&&it(t.prototype,n),r&&it(t,r),t}function wr(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&Na(t,n)}function Na(t,n){return Na=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},Na(t,n)}function I(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function z(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}var Sr=/Android.+Mobile|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i,Ya=function(t){wr(n,t),rt(n,null,[{key:"getDerivedStateFromProps",value:function(l,s){var i=null;return typeof l.value<"u"&&s.value!==l.value&&(i={value:l.value}),s.disabled!==l.disabled&&(i={disabled:l.disabled}),i}}]);function n(r){var l;return Nr(this,n),l=Cr(this,ja(n).call(this,r)),z(I(I(l)),"updateFlagOnDefaultCountryChange",function(s){l.setFlag(s,!1)}),z(I(I(l)),"getTempCountry",function(s){if(s==="auto")return"auto";var i=xe.default.getCountryData(l.countries,s);return i.iso2||(l.props.preferredCountries.length>0?i=xe.default.getCountryData(l.countries,l.props.preferredCountries[0]):i=il.default.getCountries()[0]),i.iso2}),z(I(I(l)),"setNumber",function(s,i){l.updateFlagFromNumber(s),l.updateValFromNumber(s,!i)}),z(I(I(l)),"setFlagDropdownRef",function(s){l.flagDropDown=s}),z(I(I(l)),"setTelRef",function(s){l.tel=s}),z(I(I(l)),"setFlag",function(s,i){var o=l.selectedCountryData&&l.selectedCountryData.iso2?l.selectedCountryData:{};l.selectedCountryData=s?xe.default.getCountryData(l.countries,s,!1,!1,l.props.noCountryDataHandler):{},l.selectedCountryData.iso2&&(l.defaultCountry=l.selectedCountryData.iso2);var u=s?"".concat(l.selectedCountryData.name,": +").concat(l.selectedCountryData.dialCode):"Unknown",h=l.state.dialCode;l.props.separateDialCode&&(h=l.selectedCountryData.dialCode?"+".concat(l.selectedCountryData.dialCode):"",o.dialCode&&delete l.wrapperClass["iti-sdc-".concat(o.dialCode.length+1)],h&&(l.wrapperClass["iti-sdc-".concat(h.length)]=!0));var p=0;s&&s!=="auto"&&(p=xe.default.findIndex(l.preferredCountries,function(j){return j.iso2===s}),p===-1&&(p=xe.default.findIndex(l.countries,function(j){return j.iso2===s}),p===-1&&(p=0),p+=l.preferredCountries.length)),l.tel&&l.state.showDropdown&&l.tel.focus();var c=l.updateDialCode(l.selectedCountryData.dialCode,!i);l.setState({value:c,showDropdown:!1,highlightedCountry:p,countryCode:s,title:u,dialCode:h},function(){if(l.updatePlaceholder(l.props),l.wrapperClass.active=!1,!i&&o.iso2!==s&&typeof l.props.onSelectFlag=="function"){var j=l.state.value,y=l.formatFullNumber(j),b=l.isValidNumber(y);l.props.onSelectFlag(j,l.selectedCountryData,y,b)}})}),z(I(I(l)),"getExtension",function(s){return window.intlTelInputUtils?window.intlTelInputUtils.getExtension(l.getFullNumber(s),l.selectedCountryData.iso2):""}),z(I(I(l)),"getNumber",function(s,i){return window.intlTelInputUtils?window.intlTelInputUtils.formatNumber(l.getFullNumber(s),l.selectedCountryData.iso2,i):""}),z(I(I(l)),"getFullNumber",function(s){var i=l.props.separateDialCode?"+".concat(l.selectedCountryData.dialCode):"";return i+s}),z(I(I(l)),"getDialCode",function(s){var i="";if(s.charAt(0)==="+")for(var o="",u=0,h=s.length;u<h;u++){var p=s.charAt(u);if(xe.default.isNumeric(p)&&(o+=p,l.countryCodes[o]&&(i=s.substr(0,u+1)),o.length===4))break}return i}),z(I(I(l)),"isUnknownNanp",function(s,i){return i==="+1"&&xe.default.getNumeric(s).length>=4}),z(I(I(l)),"addCountryCode",function(s,i,o,u){o in s||(s[o]=[]);var h=u||0;return s[o][h]=i,s}),z(I(I(l)),"processAllCountries",function(){l.props.onlyCountries.length?l.filterCountries(l.props.onlyCountries,function(s){return s!==-1}):l.props.excludeCountries.length?l.filterCountries(l.props.excludeCountries,function(s){return s===-1}):l.countries=il.default.getCountries()}),z(I(I(l)),"processCountryCodes",function(){l.countryCodes={};for(var s=0;s<l.countries.length;s++){var i=l.countries[s];if(l.addCountryCode(l.countryCodes,i.iso2,i.dialCode,i.priority),i.areaCodes)for(var o=0;o<i.areaCodes.length;o++)l.addCountryCode(l.countryCodes,i.iso2,i.dialCode+i.areaCodes[o])}}),z(I(I(l)),"processPreferredCountries",function(){l.preferredCountries=[];for(var s=0,i=l.props.preferredCountries.length;s<i;s++){var o=l.props.preferredCountries[s].toLowerCase(),u=xe.default.getCountryData(l.countries,o,!0);u&&l.preferredCountries.push(u)}}),z(I(I(l)),"setInitialState",function(){var s=l.props.value||l.props.defaultValue||"";l.getDialCode(s)?l.updateFlagFromNumber(s,!0):l.tempCountry!=="auto"&&(l.tempCountry?l.setFlag(l.tempCountry,!0):(l.defaultCountry=l.preferredCountries.length?l.preferredCountries[0].iso2:l.countries[0].iso2,s||l.setFlag(l.defaultCountry,!0)),!s&&!l.nationalMode&&!l.autoHideDialCode&&!l.props.separateDialCode&&l.setState({value:"+".concat(l.selectedCountryData.dialCode)}));var i=!0;s&&l.updateValFromNumber(s,l.props.formatOnInit,i)}),z(I(I(l)),"initRequests",function(){Es(()=>import("./libphonenumber-B-m7LxQQ.js"),[]).then(function(){l.loadUtils(),l.utilsScriptDeferred.resolve()}).catch(function(){return"An error occurred while loading the component"}),l.tempCountry==="auto"?l.loadAutoCountry():l.autoCountryDeferred.resolve()}),z(I(I(l)),"loadCountryFromLocalStorage",function(){try{return window.localStorage!==void 0?window.localStorage.getItem("itiAutoCountry"):""}catch{return""}}),z(I(I(l)),"loadAutoCountry",function(){var s=l.loadCountryFromLocalStorage();s&&(l.autoCountry=s),l.autoCountry?l.autoCountryLoaded():l.startedLoadingAutoCountry||(l.startedLoadingAutoCountry=!0,typeof l.props.geoIpLookup=="function"&&l.props.geoIpLookup(function(i){l.autoCountry=i.toLowerCase(),window.localStorage!==void 0&&window.localStorage.setItem("itiAutoCountry",l.autoCountry),l.autoCountryLoaded()}))}),z(I(I(l)),"cap",function(s){var i=l.tel?l.tel.getAttribute("maxlength"):s;return i&&s.length>i?s.substr(0,i):s}),z(I(I(l)),"removeEmptyDialCode",function(){var s=l.state.value,i=s.charAt(0)==="+";if(i){var o=xe.default.getNumeric(s);(!o||l.selectedCountryData.dialCode===o)&&l.setState({value:""})}}),z(I(I(l)),"handleUpDownKey",function(s){var i=l.flagDropDown.querySelectorAll(".highlight")[0],o=i?i.previousElementSibling:void 0,u=i?i.nextElementSibling:void 0,h=s===De.KEYS.UP?o:u;if(h){h.getAttribute("class").indexOf("divider")>-1&&(h=s===De.KEYS.UP?h.previousElementSibling:h.nextElementSibling),l.scrollTo(h);var p=xe.default.retrieveLiIndex(h);l.setState({showDropdown:!0,highlightedCountry:p})}}),z(I(I(l)),"handleEnterKey",function(){var s=l.flagDropDown.querySelectorAll(".highlight")[0];if(s){var i=xe.default.retrieveLiIndex(s),o=s.getAttribute("data-country-code");l.setState({showDropdown:!1,highlightedCountry:i,countryCode:o},function(){l.setFlag(l.state.countryCode),l.unbindDocumentClick()})}}),z(I(I(l)),"searchForCountry",function(s){for(var i=0,o=l.countries.length;i<o;i++)if(xe.default.startsWith(l.countries[i].name,s)){var u=l.flagDropDown.querySelector('.country-list [data-country-code="'.concat(l.countries[i].iso2,'"]:not(.preferred)')),h=xe.default.retrieveLiIndex(u);l.setState({showDropdown:!0,highlightedCountry:h}),l.scrollTo(u,!0);break}}),z(I(I(l)),"formatNumber",function(s){if(window.intlTelInputUtils&&l.selectedCountryData){var i=window.intlTelInputUtils.numberFormat.INTERNATIONAL;(!l.props.separateDialCode&&l.nationalMode||s.charAt(0)!=="+")&&(i=window.intlTelInputUtils.numberFormat.NATIONAL),s=window.intlTelInputUtils.formatNumber(s,l.selectedCountryData.iso2,i)}return s}),z(I(I(l)),"updateValFromNumber",function(s,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(i&&window.intlTelInputUtils&&l.selectedCountryData){var u=!l.props.separateDialCode&&(l.nationalMode||s.charAt(0)!=="+")?window.intlTelInputUtils.numberFormat.NATIONAL:window.intlTelInputUtils.numberFormat.INTERNATIONAL;s=window.intlTelInputUtils.formatNumber(s,l.selectedCountryData.iso2,u)}s=l.beforeSetNumber(s),l.setState({showDropdown:!1,value:s},function(){o&&l.notifyPhoneNumberChange(s),l.unbindDocumentClick()})}),z(I(I(l)),"updateFlagFromNumber",function(s,i){s&&l.nationalMode&&l.selectedCountryData&&l.selectedCountryData.dialCode==="1"&&s.charAt(0)!=="+"&&(s.charAt(0)!=="1"&&(s="1".concat(s)),s="+".concat(s));var o=l.getDialCode(s),u=null;if(o){var h=l.countryCodes[xe.default.getNumeric(o)],p=l.selectedCountryData&&h.indexOf(l.selectedCountryData.iso2)!==-1;if(!p||l.isUnknownNanp(s,o)){for(var c=0;c<h.length;c++)if(h[c]){u=h[c];break}}}else s.charAt(0)==="+"&&xe.default.getNumeric(s).length&&(u=null);u!==null&&l.setFlag(u,i)}),z(I(I(l)),"filterCountries",function(s,i){var o;for(o=0;o<s.length;o++)s[o]=s[o].toLowerCase();for(l.countries=[],o=0;o<il.default.getCountries().length;o++)i(s.indexOf(il.default.getCountries()[o].iso2))&&l.countries.push(il.default.getCountries()[o])}),z(I(I(l)),"processCountryData",function(){il.default.initialize(l.props.countriesData),l.processAllCountries.call(I(I(l))),l.processCountryCodes.call(I(I(l))),l.processPreferredCountries.call(I(I(l)))}),z(I(I(l)),"handleOnBlur",function(s){if(l.removeEmptyDialCode(),typeof l.props.onPhoneNumberBlur=="function"){var i=l.state.value,o=l.formatFullNumber(i),u=l.isValidNumber(o);l.props.onPhoneNumberBlur(u,i,l.selectedCountryData,o,l.getExtension(i),s)}}),z(I(I(l)),"handleOnFocus",function(s){if(typeof l.props.onPhoneNumberFocus=="function"){var i=l.state.value,o=l.formatFullNumber(i),u=l.isValidNumber(o);l.props.onPhoneNumberFocus(u,i,l.selectedCountryData,o,l.getExtension(i),s)}}),z(I(I(l)),"bindDocumentClick",function(){l.isOpening=!0,document.querySelector("html").addEventListener("click",l.handleDocumentClick)}),z(I(I(l)),"unbindDocumentClick",function(){document.querySelector("html").removeEventListener("click",l.handleDocumentClick)}),z(I(I(l)),"clickSelectedFlag",function(s){var i=l.props,o=i.allowDropdown,u=i.onFlagClick,h=l.state,p=h.showDropdown,c=h.disabled,j=h.readonly;!p&&!c&&!j&&o?l.setState({showDropdown:!0,offsetTop:xe.default.offset(l.tel).top,outerHeight:xe.default.getOuterHeight(l.tel)},function(){var y=l.flagDropDown.querySelector(".highlight");y&&l.scrollTo(y,!0)}):p&&l.toggleDropdown(!1),typeof u=="function"&&u(s)}),z(I(I(l)),"updatePlaceholder",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:l.props;if(window.intlTelInputUtils&&s.autoPlaceholder&&l.selectedCountryData){var i=window.intlTelInputUtils.numberType[s.numberType],o=l.selectedCountryData.iso2?window.intlTelInputUtils.getExampleNumber(l.selectedCountryData.iso2,l.nationalMode,i):"";o=l.beforeSetNumber(o,s),typeof s.customPlaceholder=="function"&&(o=s.customPlaceholder(o,l.selectedCountryData)),l.setState({placeholder:o})}}),z(I(I(l)),"toggleDropdown",function(s){l.setState({showDropdown:!!s},function(){l.state.showDropdown||l.unbindDocumentClick()})}),z(I(I(l)),"scrollTo",function(s,i){try{var o=l.flagDropDown.querySelector(".country-list"),u=parseFloat(window.getComputedStyle(o).getPropertyValue("height")),h=xe.default.offset(o).top,p=h+u,c=xe.default.getOuterHeight(s),j=xe.default.offset(s).top,y=j+c,b=u/2-c/2,v=j-h+o.scrollTop;if(j<h)i&&(v-=b),o.scrollTop=v;else if(y>p){i&&(v+=b);var m=u-c;o.scrollTop=v-m}}catch{}}),z(I(I(l)),"updateDialCode",function(s,i){var o=l.state.value;if(!s)return o;var u=o;if(s="+".concat(s),o.charAt(0)==="+"){var h=l.getDialCode(o);h?u=o.replace(h,s):u=s}else l.nationalMode||l.props.separateDialCode||(o?u=s+o:(i||!l.autoHideDialCode)&&(u=s));return u!==o&&l.notifyPhoneNumberChange(u),u}),z(I(I(l)),"generateMarkup",function(){l.wrapperClass["separate-dial-code"]=l.props.separateDialCode,l.isMobile&&l.props.useMobileFullscreenDropdown&&(document.querySelector("body").classList.add("iti-mobile"),l.dropdownContainer="body",window.addEventListener("scroll",l.handleWindowScroll))}),z(I(I(l)),"handleSelectedFlagKeydown",function(s){!l.state.showDropdown&&(s.which===De.KEYS.UP||s.which===De.KEYS.DOWN||s.which===De.KEYS.SPACE||s.which===De.KEYS.ENTER)&&(s.preventDefault(),s.stopPropagation(),l.toggleDropdown(!0)),s.which===De.KEYS.TAB&&l.toggleDropdown(!1)}),z(I(I(l)),"isValidNumber",function(s){var i=xe.default.trim(s),o=l.nationalMode||l.props.separateDialCode?l.selectedCountryData.iso2:"";return window.intlTelInputUtils?window.intlTelInputUtils.isValidNumber(i,o):!1}),z(I(I(l)),"formatFullNumber",function(s){return window.intlTelInputUtils?l.getNumber(s,window.intlTelInputUtils.numberFormat.INTERNATIONAL):s}),z(I(I(l)),"notifyPhoneNumberChange",function(s){if(typeof l.props.onPhoneNumberChange=="function"){var i=l.formatFullNumber(s),o=l.isValidNumber(i);l.props.onPhoneNumberChange(o,s,l.selectedCountryData,i,l.getExtension(s))}}),z(I(I(l)),"beforeSetNumber",function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l.props;if(i.separateDialCode){var o=l.getDialCode(s);if(o){l.selectedCountryData.areaCodes!==null&&(o="+".concat(l.selectedCountryData.dialCode));var u=s[o.length]===" "||s[o.length]==="-"?o.length+1:o.length;s=s.substr(u)}}return l.cap(s)}),z(I(I(l)),"handleWindowScroll",function(){l.setState({showDropdown:!1},function(){window.removeEventListener("scroll",l.handleWindowScroll)})}),z(I(I(l)),"handleDocumentKeyDown",function(s){var i;s.preventDefault(),s.which===De.KEYS.UP||s.which===De.KEYS.DOWN?l.handleUpDownKey(s.which):s.which===De.KEYS.ENTER?l.handleEnterKey():s.which===De.KEYS.ESC?l.setState({showDropdown:!1}):(s.which>=De.KEYS.A&&s.which<=De.KEYS.Z||s.which===De.KEYS.SPACE)&&(i&&clearTimeout(i),l.query||(l.query=""),l.query+=String.fromCharCode(s.which),l.searchForCountry(l.query),i=setTimeout(function(){l.query=""},1e3))}),z(I(I(l)),"handleDocumentClick",function(s){var i=s.target.getAttribute("class");(i===null||i&&i.indexOf("country")===-1&&i.indexOf("selected-flag")===-1&&i.indexOf("iti-flag")===-1&&i.indexOf("iti-arrow")===-1)&&(l.isOpening=!1),l.isOpening||l.toggleDropdown(!1),l.isOpening=!1}),z(I(I(l)),"handleInputChange",function(s){var i=s.target.selectionStart,o=s.target.value,u=l.state.value,h=o===""?o:o.substring(0,i),p=o.length<u.length?o:l.formatNumber(s.target.value),c=l.props.format?p:s.target.value;i=xe.default.getCursorPositionAfterFormating(h,o,c),l.props.value!==void 0?l.setState({cursorPosition:i},function(){l.updateFlagFromNumber(c),l.notifyPhoneNumberChange(c)}):l.setState({value:c,cursorPosition:i},function(){l.updateFlagFromNumber(c),l.notifyPhoneNumberChange(c)})}),z(I(I(l)),"changeHighlightCountry",function(s,i){l.setState({showDropdown:s,highlightedCountry:i})}),z(I(I(l)),"loadUtils",function(){window.intlTelInputUtils&&l.utilsScriptDeferred.resolve()}),z(I(I(l)),"autoCountryLoaded",function(){l.tempCountry==="auto"&&(l.tempCountry=l.autoCountry,l.autoCountryDeferred.resolve())}),l.wrapperClass={},l.autoCountry="",l.tempCountry="",l.startedLoadingAutoCountry=!1,l.deferreds=[],l.autoCountryDeferred=new ia.default.Deferred,l.utilsScriptDeferred=new ia.default.Deferred,l.isOpening=!1,l.isMobile=typeof navigator<"u"&&Sr.test(navigator.userAgent),l.preferredCountries=[],l.countries=[],l.countryCodes={},l.windowLoaded=!1,l.query="",l.selectedCountryData={},l.state={showDropdown:!1,highlightedCountry:0,value:r.value||r.defaultValue,disabled:r.disabled,readonly:!1,offsetTop:0,outerHeight:0,placeholder:"",title:"",countryCode:"us",dialCode:"",cursorPosition:(r.value||r.defaultValue).length},l}return rt(n,[{key:"componentDidMount",value:function(){var l=this;this.autoHideDialCode=this.props.autoHideDialCode,this.allowDropdown=this.props.allowDropdown,this.nationalMode=this.props.nationalMode,this.dropdownContainer="",this.nationalMode&&(this.autoHideDialCode=!1),this.props.separateDialCode&&(this.autoHideDialCode=!1,this.nationalMode=!1,this.allowDropdown=!0),this.processCountryData.call(this),this.tempCountry=this.getTempCountry(this.props.defaultCountry),document.readyState==="complete"?this.windowLoaded=!0:window.addEventListener("load",function(){l.windowLoaded=!0}),this.generateMarkup(),this.setInitialState(),this.initRequests(),this.deferreds.push(this.autoCountryDeferred.promise()),this.deferreds.push(this.utilsScriptDeferred.promise()),ia.default.when(this.deferreds).done(function(){l.setInitialState()}),document.addEventListener("keydown",this.handleDocumentKeyDown)}},{key:"shouldComponentUpdate",value:function(l,s){return s.showDropdown?(document.addEventListener("keydown",this.handleDocumentKeyDown),this.bindDocumentClick()):(document.removeEventListener("keydown",this.handleDocumentKeyDown),this.unbindDocumentClick()),!0}},{key:"componentDidUpdate",value:function(l){this.props.value!==l.value&&this.updateFlagFromNumber(this.props.value),typeof this.props.customPlaceholder=="function"&&l.customPlaceholder!==this.props.customPlaceholder&&this.updatePlaceholder(this.props),this.props.allowDropdown!==l.allowDropdown&&(this.allowDropdown=this.props.allowDropdown),this.props.defaultCountry!==l.defaultCountry&&this.updateFlagOnDefaultCountryChange(this.props.defaultCountry)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleDocumentKeyDown),window.removeEventListener("scroll",this.handleWindowScroll),this.unbindDocumentClick()}},{key:"render",value:function(){var l=this.props.inputClassName,s=Object.assign({},this.props.style||{});this.wrapperClass["allow-dropdown"]=this.allowDropdown,this.wrapperClass.expanded=this.state.showDropdown;var i=(0,xr.default)(this.wrapperClass,this.props.containerClassName),o=this.selectedCountryData?"".concat(this.selectedCountryData.name,": +").concat(this.selectedCountryData.dialCode):"Unknown",u=this.props.value!==void 0?this.props.value:this.state.value;return Rl.default.createElement("div",{className:i,style:s},Rl.default.createElement(gr.default,{refCallback:this.setFlagDropdownRef,allowDropdown:this.allowDropdown,dropdownContainer:this.dropdownContainer,separateDialCode:this.props.separateDialCode,dialCode:this.state.dialCode,clickSelectedFlag:this.clickSelectedFlag,setFlag:this.setFlag,countryCode:this.state.countryCode,isMobile:this.isMobile,handleSelectedFlagKeydown:this.handleSelectedFlagKeydown,changeHighlightCountry:this.changeHighlightCountry,countries:this.countries,showDropdown:this.state.showDropdown,inputTop:this.state.offsetTop,inputOuterHeight:this.state.outerHeight,preferredCountries:this.preferredCountries,highlightedCountry:this.state.highlightedCountry,titleTip:o}),Rl.default.createElement(yr.default,{refCallback:this.setTelRef,handleInputChange:this.handleInputChange,handleOnBlur:this.handleOnBlur,handleOnFocus:this.handleOnFocus,className:l,disabled:this.state.disabled,readonly:this.state.readonly,fieldName:this.props.fieldName,fieldId:this.props.fieldId,value:u,placeholder:this.props.placeholder!==void 0?this.props.placeholder:this.state.placeholder,autoFocus:this.props.autoFocus,autoComplete:this.props.autoComplete,inputProps:this.props.telInputProps,cursorPosition:this.state.cursorPosition}))}}]),n}(Rl.Component);Ya.defaultProps={containerClassName:"intl-tel-input",inputClassName:"",fieldName:"",fieldId:"",defaultValue:"",countriesData:null,allowDropdown:!0,autoHideDialCode:!0,autoPlaceholder:!0,customPlaceholder:null,excludeCountries:[],formatOnInit:!0,separateDialCode:!1,defaultCountry:"",geoIpLookup:null,nationalMode:!0,numberType:"MOBILE",noCountryDataHandler:null,onlyCountries:[],preferredCountries:["us","gb"],onPhoneNumberChange:null,onPhoneNumberBlur:null,onPhoneNumberFocus:null,onSelectFlag:null,disabled:!1,autoFocus:!1,useMobileFullscreenDropdown:!0,autoComplete:"off",telInputProps:{},format:!1,onFlagClick:null};var Tr=Ya;Kl.default=Tr;Ya.__docgenInfo={description:"",methods:[{name:"getDerivedStateFromProps",docblock:null,modifiers:["static"],params:[{name:"nextProps",type:null},{name:"prevState",type:null}],returns:null},{name:"updateFlagOnDefaultCountryChange",docblock:null,modifiers:[],params:[{name:"countryCode",type:null}],returns:null},{name:"getTempCountry",docblock:null,modifiers:[],params:[{name:"countryCode",type:null}],returns:null},{name:"setNumber",docblock:null,modifiers:[],params:[{name:"number",type:null},{name:"preventFormat",type:null}],returns:null},{name:"setFlagDropdownRef",docblock:null,modifiers:[],params:[{name:"ref",type:null}],returns:null},{name:"setTelRef",docblock:null,modifiers:[],params:[{name:"ref",type:null}],returns:null},{name:"setFlag",docblock:null,modifiers:[],params:[{name:"countryCode",type:null},{name:"isInit",type:null}],returns:null},{name:"getExtension",docblock:null,modifiers:[],params:[{name:"number",type:null}],returns:null},{name:"getNumber",docblock:null,modifiers:[],params:[{name:"number",type:null},{name:"format",type:null}],returns:null},{name:"getFullNumber",docblock:null,modifiers:[],params:[{name:"number",type:null}],returns:null},{name:"getDialCode",docblock:null,modifiers:[],params:[{name:"number",type:null}],returns:null},{name:"isUnknownNanp",docblock:null,modifiers:[],params:[{name:"number",type:null},{name:"dialCode",type:null}],returns:null},{name:"addCountryCode",docblock:null,modifiers:[],params:[{name:"countryCodes",type:null},{name:"iso2",type:null},{name:"dialCode",type:null},{name:"priority",type:null}],returns:null},{name:"processAllCountries",docblock:null,modifiers:[],params:[],returns:null},{name:"processCountryCodes",docblock:null,modifiers:[],params:[],returns:null},{name:"processPreferredCountries",docblock:null,modifiers:[],params:[],returns:null},{name:"setInitialState",docblock:null,modifiers:[],params:[],returns:null},{name:"initRequests",docblock:null,modifiers:[],params:[],returns:null},{name:"loadCountryFromLocalStorage",docblock:null,modifiers:[],params:[],returns:null},{name:"loadAutoCountry",docblock:null,modifiers:[],params:[],returns:null},{name:"cap",docblock:null,modifiers:[],params:[{name:"number",type:null}],returns:null},{name:"removeEmptyDialCode",docblock:null,modifiers:[],params:[],returns:null},{name:"handleUpDownKey",docblock:null,modifiers:[],params:[{name:"key",type:null}],returns:null},{name:"handleEnterKey",docblock:null,modifiers:[],params:[],returns:null},{name:"searchForCountry",docblock:null,modifiers:[],params:[{name:"query",type:null}],returns:null},{name:"formatNumber",docblock:null,modifiers:[],params:[{name:"number",type:null}],returns:null},{name:"updateValFromNumber",docblock:null,modifiers:[],params:[{name:"number",type:null},{name:"doFormat",type:null},{name:"doNotify",type:null}],returns:null},{name:"updateFlagFromNumber",docblock:null,modifiers:[],params:[{name:"number",type:null},{name:"isInit",type:null}],returns:null},{name:"filterCountries",docblock:null,modifiers:[],params:[{name:"countryArray",type:null},{name:"processFunc",type:null}],returns:null},{name:"processCountryData",docblock:null,modifiers:[],params:[],returns:null},{name:"handleOnBlur",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"handleOnFocus",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"bindDocumentClick",docblock:null,modifiers:[],params:[],returns:null},{name:"unbindDocumentClick",docblock:null,modifiers:[],params:[],returns:null},{name:"clickSelectedFlag",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"updatePlaceholder",docblock:null,modifiers:[],params:[{name:"props",type:null}],returns:null},{name:"toggleDropdown",docblock:null,modifiers:[],params:[{name:"status",type:null}],returns:null},{name:"scrollTo",docblock:null,modifiers:[],params:[{name:"element",type:null},{name:"middle",type:null}],returns:null},{name:"updateDialCode",docblock:null,modifiers:[],params:[{name:"newDialCode",type:null},{name:"hasSelectedListItem",type:null}],returns:null},{name:"generateMarkup",docblock:null,modifiers:[],params:[],returns:null},{name:"handleSelectedFlagKeydown",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"isValidNumber",docblock:null,modifiers:[],params:[{name:"number",type:null}],returns:null},{name:"formatFullNumber",docblock:null,modifiers:[],params:[{name:"number",type:null}],returns:null},{name:"notifyPhoneNumberChange",docblock:null,modifiers:[],params:[{name:"newNumber",type:null}],returns:null},{name:"beforeSetNumber",docblock:null,modifiers:[],params:[{name:"number",type:null},{name:"props",type:null}],returns:null},{name:"handleWindowScroll",docblock:null,modifiers:[],params:[],returns:null},{name:"handleDocumentKeyDown",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"handleDocumentClick",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"handleInputChange",docblock:null,modifiers:[],params:[{name:"e",type:null}],returns:null},{name:"changeHighlightCountry",docblock:null,modifiers:[],params:[{name:"showDropdown",type:null},{name:"selectedIndex",type:null}],returns:null},{name:"loadUtils",docblock:null,modifiers:[],params:[],returns:null},{name:"autoCountryLoaded",docblock:null,modifiers:[],params:[],returns:null}],displayName:"IntlTelInput",props:{containerClassName:{defaultValue:{value:"'intl-tel-input'",computed:!1},type:{name:"string"},required:!1,description:"Container CSS class name."},inputClassName:{defaultValue:{value:"''",computed:!1},type:{name:"string"},required:!1,description:"Text input CSS class name."},fieldName:{defaultValue:{value:"''",computed:!1},type:{name:"string"},required:!1,description:"It's used as `input` field `name` attribute."},fieldId:{defaultValue:{value:"''",computed:!1},type:{name:"string"},required:!1,description:"It's used as `input` field `id` attribute."},defaultValue:{defaultValue:{value:"''",computed:!1},type:{name:"string"},required:!1,description:"The value used to initialize input. This will only work on uncontrolled component."},countriesData:{defaultValue:{value:"null",computed:!1},type:{name:"arrayOf",value:{name:"array"}},required:!1,description:"Countries data can be configured, it defaults to data defined in `AllCountries`."},allowDropdown:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:`Whether or not to allow the dropdown. If disabled, there is no dropdown arrow, and the selected flag is not clickable.
Also we display the selected flag on the right instead because it is just a marker of state.`},autoHideDialCode:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:"If there is just a dial code in the input: remove it on blur, and re-add it on focus."},autoPlaceholder:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:"Add or remove input placeholder with an example number for the selected country."},customPlaceholder:{defaultValue:{value:"null",computed:!1},type:{name:"func"},required:!1,description:"Change the placeholder generated by autoPlaceholder. Must return a string."},excludeCountries:{defaultValue:{value:"[]",computed:!1},type:{name:"arrayOf",value:{name:"string"}},required:!1,description:"Don't display the countries you specify. (Array)"},formatOnInit:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:"Format the input value during initialisation."},separateDialCode:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:`Display the country dial code next to the selected flag so it's not part of the typed number.
Note that this will disable nationalMode because technically we are dealing with international numbers,
but with the dial code separated.`},defaultCountry:{defaultValue:{value:"''",computed:!1},type:{name:"string"},required:!1,description:"Default country."},geoIpLookup:{defaultValue:{value:"null",computed:!1},type:{name:"func"},required:!1,description:"GeoIp lookup function."},nationalMode:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:"Don't insert international dial codes."},numberType:{defaultValue:{value:"'MOBILE'",computed:!1},type:{name:"string"},required:!1,description:"Number type to use for placeholders."},noCountryDataHandler:{defaultValue:{value:"null",computed:!1},type:{name:"func"},required:!1,description:'The function which can catch the "no this default country" exception.'},onlyCountries:{defaultValue:{value:"[]",computed:!1},type:{name:"arrayOf",value:{name:"string"}},required:!1,description:"Display only these countries."},preferredCountries:{defaultValue:{value:"['us', 'gb']",computed:!1},type:{name:"arrayOf",value:{name:"string"}},required:!1,description:"The countries at the top of the list. defaults to United States and United Kingdom."},onPhoneNumberChange:{defaultValue:{value:"null",computed:!1},type:{name:"func"},required:!1,description:"Optional validation callback function. It returns validation status, input box value and selected country data."},onPhoneNumberBlur:{defaultValue:{value:"null",computed:!1},type:{name:"func"},required:!1,description:"Optional validation callback function. It returns validation status, input box value and selected country data."},onPhoneNumberFocus:{defaultValue:{value:"null",computed:!1},type:{name:"func"},required:!1,description:"Optional validation callback function. It returns validation status, input box value and selected country data."},onSelectFlag:{defaultValue:{value:"null",computed:!1},type:{name:"func"},required:!1,description:"Allow main app to do things when a country is selected."},disabled:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:"Disable this component."},autoFocus:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:"Enable auto focus"},useMobileFullscreenDropdown:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:"Render fullscreen flag dropdown when mobile useragent is detected. The dropdown element is rendered as a direct child of document.body"},autoComplete:{defaultValue:{value:"'off'",computed:!1},type:{name:"string"},required:!1,description:"Set the value of the autoComplete attribute on the input. For example, set it to phone to tell the browser where to auto complete phone numbers."},telInputProps:{defaultValue:{value:"{}",computed:!1},type:{name:"object"},required:!1,description:"Pass through arbitrary props to the tel input element."},format:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:"Format the number."},onFlagClick:{defaultValue:{value:"null",computed:!1},type:{name:"func"},required:!1,description:"Allow main app to do things when flag icon is clicked."},value:{type:{name:"string"},required:!1,description:"The value of the input field. Useful for making input value controlled from outside the component."},placeholder:{type:{name:"string"},required:!1,description:"Static placeholder for input controller. When defined it takes priority over autoPlaceholder."},style:{type:{name:"custom",raw:"StylePropTypes"},required:!1,description:"Style object for the wrapper div. Useful for setting 100% width on the wrapper, etc."}}};Object.defineProperty(Ka,"__esModule",{value:!0});var rn=Ka.default=void 0,Rr=Dr(Kl);function Dr(t){return t&&t.__esModule?t:{default:t}}var Er=Rr.default;rn=Ka.default=Er;const on=({formId:t,field:n})=>{var r,l,s,i,o;const{register:u,control:h,formState:{errors:p},setValue:c,clearErrors:j}=W(),y=P({control:h,name:t("advancedOptions")});P({control:h,name:t("defaultValue")});const b=P({control:h,name:t("relations")}),m=is(n.defaultValue)?JSON.parse(n.defaultValue):n.defaultValue,[f,E]=k.useState(m),[D,R]=k.useState(m&&m.from?m.from:null),[x,O]=k.useState(m&&m.to?m.to:null),[g,S]=k.useState(m&&m.url?m.url:null),[C,T]=k.useState(m&&m.urlLabel?m.urlLabel:null),[N,w]=k.useState(m&&m.currencyValue?m.currencyValue:null),[_,M]=k.useState(m&&m.currency?m.currency:null),[V,G]=k.useState(m&&m.length?m.length:null),[ie,he]=k.useState(m&&m.lengthValue?m.lengthValue:null),[ge,oe]=k.useState(m&&m.weight?m.weight:null),[$,L]=k.useState(m&&m.weightValue?m.weightValue:null),Y=[F.ICON,F.TABLE,F.REPEATER,F.FLEXIBLE,F.PASSWORD,F.SELECT_MULTI,F.SELECT,F.RADIO,F.CHECKBOX],de=(J,te)=>J?e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(Z,{id:t("defaultValue"),label:a("The default value for this field")}),e.jsx(Te,{id:t("defaultValue"),register:u,errors:p,placeholder:a("Default value"),defaultValue:typeof m=="object"?m:null,values:te,clearErrors:j,setValue:c})]})}):e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(Z,{id:t("defaultValue"),label:a("The default value for this field")}),e.jsx(le,{id:t("defaultValue"),register:u,errors:p,placeholder:a("Default value"),defaultValue:typeof m=="string"?m:null,values:te})]})});if(!n.type||Y.includes(n.type))return null;const H=(J,te,ce=!1,be=null)=>{if(!wp||!wp.media){alert(a("The media gallery is not available. You must admin_enqueue this function: wp_enqueue_media()"));return}const se=wp.media({title:a(J),library:{type:[te]},multiple:ce});se.on("select",function(me){let Pe=[];if(be!==null&&se.state().get("selection").length>be){E(null),c(t("defaultValue"),null),alert("Files limit reached");return}se.state().get("selection").map(qe=>{Pe.push(qe.toJSON().url)}),E(Pe.join(",")),c(t("defaultValue"),Pe.join(","))}),se.open()};switch(n.type){case F.AUDIO_MULTI:return e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(Z,{id:t("defaultValue"),label:a("The default value for this field")}),e.jsx(fe,{id:t("defaultValue"),value:f,register:u}),e.jsxs("div",{className:"p-24 bg-white with-border b-rounded",children:[e.jsx("div",{className:"mb-8",children:f!==null&&typeof f=="string"&&f!==""?e.jsx("div",{className:"flex-column s-8",children:(r=f.split(","))===null||r===void 0?void 0:r.map(A=>e.jsx("audio",{className:"acpt-audio-player",controls:!0,src:A}))}):e.jsx("span",{children:a("No file selected")})}),e.jsxs("div",{className:"i-flex-center s-8 for-xs mt-8-for-xs",children:[e.jsx("button",{className:"acpt-btn acpt-btn-secondary acpt-btn-default",onClick:A=>{A.preventDefault(),H("Select files","audio","add")},children:a("Select files")}),e.jsx("button",{className:"acpt-btn acpt-btn-danger acpt-btn-default",onClick:A=>{A.preventDefault(),E(null),c(t("defaultValue"),null)},children:a("Clear")})]})]})]})});case F.IMAGE_SLIDER:return e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(Z,{id:t("defaultValue"),label:a("The default value for this field")}),e.jsx(fe,{id:t("defaultValue"),value:f,register:u}),e.jsxs("div",{className:"p-24 bg-white with-border b-rounded",children:[e.jsx("div",{className:"mb-8",children:f!==null&&typeof f=="string"&&f!==""?e.jsx("div",{className:"i-flex-center s-8 for-xs",children:(l=f.split(","))===null||l===void 0?void 0:l.map(A=>e.jsx("img",{className:"with-border b-rounded p-8",style:{width:"100px",height:"70px",objectFit:"cover"},src:A,alt:""}))}):e.jsx("span",{children:a("No image selected")})}),e.jsxs("div",{className:"i-flex-center s-8 for-xs mt-8-for-xs",children:[e.jsx("button",{className:"acpt-btn acpt-btn-secondary acpt-btn-default",onClick:A=>{A.preventDefault(),H("Select images","image","add",2)},children:a("Select images")}),e.jsx("button",{className:"acpt-btn acpt-btn-danger acpt-btn-default",onClick:A=>{A.preventDefault(),E(null),c(t("defaultValue"),null)},children:a("Clear")})]})]})]})});case F.GALLERY:return e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(Z,{id:t("defaultValue"),label:a("The default value for this field")}),e.jsx(fe,{id:t("defaultValue"),value:f,register:u}),e.jsxs("div",{className:"p-24 bg-white with-border b-rounded",children:[e.jsx("div",{className:"mb-8",children:f!==null&&typeof f=="string"&&f!==""?e.jsx("div",{className:"i-flex-center s-8 for-xs",children:(s=f.split(","))===null||s===void 0?void 0:s.map(A=>e.jsx("img",{className:"with-border b-rounded p-8",style:{width:"100px",height:"70px",objectFit:"cover"},src:A,alt:""}))}):e.jsx("span",{children:a("No image selected")})}),e.jsxs("div",{className:"i-flex-center s-8 for-xs mt-8-for-xs",children:[e.jsx("button",{className:"acpt-btn acpt-btn-secondary acpt-btn-default",onClick:A=>{A.preventDefault(),H("Select images","image","add")},children:a("Select images")}),e.jsx("button",{className:"acpt-btn acpt-btn-danger acpt-btn-default",onClick:A=>{A.preventDefault(),E(null),c(t("defaultValue"),null)},children:a("Clear")})]})]})]})});case F.AUDIO:return e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(Z,{id:t("defaultValue"),label:a("The default value for this field")}),e.jsx(fe,{id:t("defaultValue"),value:f,register:u}),e.jsxs("div",{className:"p-24 bg-white with-border b-rounded",children:[e.jsx("div",{className:"mb-8",children:f!==null&&typeof f=="string"&&f!==""?e.jsx("audio",{className:"acpt-audio-player",controls:!0,src:f}):e.jsx("span",{children:a("No file selected")})}),e.jsxs("div",{className:"i-flex-center s-8 for-xs mt-8-for-xs",children:[e.jsx("button",{className:"acpt-btn acpt-btn-secondary acpt-btn-default",onClick:A=>{A.preventDefault(),H("Upload a File","audio")},children:a("Upload a File")}),e.jsx("button",{className:"acpt-btn acpt-btn-danger acpt-btn-default",onClick:A=>{A.preventDefault(),E(null),c(t("defaultValue"),null)},children:a("Clear")})]})]})]})});case F.FILE:return e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(Z,{id:t("defaultValue"),label:a("The default value for this field")}),e.jsx(fe,{id:t("defaultValue"),value:f,register:u}),e.jsxs("div",{className:"p-24 bg-white with-border b-rounded",children:[e.jsx("div",{className:"mb-8",children:f!==null&&typeof f=="string"&&f!==""?e.jsx("a",{href:f,target:"_blank",children:f}):e.jsx("span",{children:a("No file selected")})}),e.jsxs("div",{className:"i-flex-center s-8 for-xs mt-8-for-xs",children:[e.jsx("button",{className:"acpt-btn acpt-btn-secondary acpt-btn-default",onClick:A=>{A.preventDefault(),H("Upload a File","document")},children:a("Upload a File")}),e.jsx("button",{className:"acpt-btn acpt-btn-danger acpt-btn-default",onClick:A=>{A.preventDefault(),E(null),c(t("defaultValue"),null)},children:a("Clear")})]})]})]})});case F.VIDEO:return e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(Z,{id:t("defaultValue"),label:a("The default value for this field")}),e.jsx(fe,{id:t("defaultValue"),value:f,register:u}),e.jsxs("div",{className:"p-24 bg-white with-border b-rounded",children:[e.jsx("div",{className:"mb-8",children:f!==null&&typeof f=="string"&&f!==""?e.jsx("video",{controls:!0,children:e.jsx("source",{src:f,type:"video/mp4"})}):e.jsx("span",{children:a("No video selected")})}),e.jsxs("div",{className:"i-flex-center s-8 for-xs mt-8-for-xs",children:[e.jsx("button",{className:"acpt-btn acpt-btn-secondary acpt-btn-default",onClick:A=>{A.preventDefault(),H("Upload a Video","video")},children:a("Upload a Video")}),e.jsx("button",{className:"acpt-btn acpt-btn-danger acpt-btn-default",onClick:A=>{A.preventDefault(),E(null),c(t("defaultValue"),null)},children:a("Clear")})]})]})]})});case F.IMAGE:return e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(Z,{id:t("defaultValue"),label:a("The default value for this field")}),e.jsx(fe,{id:t("defaultValue"),value:f,register:u}),e.jsxs("div",{className:"p-24 bg-white with-border b-rounded",children:[e.jsx("div",{className:"mb-8",children:f!==null&&typeof f=="string"&&f!==""?e.jsx("img",{className:"with-border b-rounded p-8",style:{maxWidth:"200px",objectFit:"cover"},src:f,alt:""}):e.jsx("span",{children:a("No image selected")})}),e.jsxs("div",{className:"i-flex-center s-8 for-xs mt-8-for-xs",children:[e.jsx("button",{className:"acpt-btn acpt-btn-secondary acpt-btn-default",onClick:A=>{A.preventDefault(),H("Upload an Image","image")},children:a("Upload an Image")}),e.jsx("button",{className:"acpt-btn acpt-btn-danger acpt-btn-default",onClick:A=>{A.preventDefault(),E(null),c(t("defaultValue"),null)},children:a("Clear")})]})]})]})});case F.EMAIL:return e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(Z,{id:t("defaultValue"),label:a("The default value for this field")}),e.jsx(ue,{type:"email",id:t("defaultValue"),register:u,errors:p,placeholder:a("Default value"),defaultValue:typeof m=="string"?m:null,validate:{maxLength:{value:255,message:"max length is 255"}}})]})});case F.DATE:return e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(Z,{id:t("defaultValue"),label:a("The default value for this field")}),e.jsx(ue,{type:"date",id:t("defaultValue"),register:u,errors:p,placeholder:a("Default value"),defaultValue:typeof m=="string"?m:null,validate:{maxLength:{value:255,message:"max length is 255"}}})]})});case F.DATE_TIME:return e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(Z,{id:t("defaultValue"),label:a("The default value for this field")}),e.jsx(ue,{type:"datetime-local",id:t("defaultValue"),register:u,errors:p,placeholder:a("Default value"),defaultValue:typeof m=="string"?m:null,validate:{maxLength:{value:255,message:"max length is 255"}}})]})});case F.TIME:return e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(Z,{id:t("defaultValue"),label:a("The default value for this field")}),e.jsx(ue,{type:"time",id:t("defaultValue"),register:u,errors:p,placeholder:a("Default value"),defaultValue:typeof m=="string"?m:null,validate:{maxLength:{value:255,message:"max length is 255"}}})]})});case F.COLOR:return e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(Z,{id:t("defaultValue"),label:a("The default value for this field")}),e.jsx(Ni,{id:t("defaultValue"),register:u,errors:p,placeholder:a("Default value"),defaultValue:typeof m=="string"?m:null,validate:{maxLength:{value:255,message:"max length is 255"}}})]})});case F.HTML:return e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(Z,{id:t("defaultValue"),label:a("The default value for this field")}),e.jsx(Si,{theme:"vs-dark",height:"250px",language:"html",options:{selectOnLineNumbers:!0},defaultValue:m,onChange:A=>{c(t("defaultValue"),A)}})]})});case F.RANGE:case F.NUMBER:const J=y&&y[8]&&y[8].value!==""?y[8].value:null,te=y&&y[9]&&y[9].value!==""?y[9].value:null,ce=y&&y[10]&&y[10].value!==""?y[10].value:null;return e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(Z,{id:t("defaultValue"),label:a("The default value for this field")}),e.jsx(ue,{type:"number",min:J,max:te,step:ce,id:t("defaultValue"),register:u,errors:p,placeholder:a("Default value"),defaultValue:typeof m=="string"?m:null,validate:{maxLength:{value:255,message:"max length is 255"}}})]})});case F.RATING:return e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(Z,{id:t("defaultValue"),label:a("The default value for this field")}),e.jsx(le,{type:"number",id:t("defaultValue"),register:u,errors:p,placeholder:a("Default value"),defaultValue:typeof m=="string"?m:null,values:[{label:"5.00/5.00",value:10},{label:"4.50/5.00",value:9},{label:"4.00/5.00",value:8},{label:"3.50/5.00",value:7},{label:"3.00/5.00",value:6},{label:"2.50/5.00",value:5},{label:"2.00/5.00",value:4},{label:"1.50/5.00",value:3},{label:"1.00/5.00",value:2},{label:"0.50/5.00",value:1}]})]})});case F.TOGGLE:return e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(Z,{id:t("defaultValue"),label:a("The default value for this field")}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle",htmlFor:t("defaultValue"),children:[e.jsx("input",{id:t("defaultValue"),name:t("defaultValue"),type:"checkbox",defaultChecked:m==1,onChangeCapture:A=>{c(t("defaultValue"),A.target.checked?"1":"0")}}),e.jsx("span",{className:"slider round"})]})})]})});case F.CURRENCY:const be=document.globals.globals.uom.currency;return e.jsxs("div",{className:"container align-end",children:[e.jsxs("div",{className:"col-3",children:[e.jsx(Z,{id:t("defaultValue_currency_value"),label:a("The default value for this field")}),e.jsx("input",{id:t("defaultValue_currency_value"),name:t("defaultValue_currency_value"),type:"number",min:.01,step:.01,className:"form-control",defaultValue:N,onChangeCapture:A=>{w(A.target.value),c(t("defaultValue"),JSON.stringify({currency:_,currencyValue:A.target.value}))}})]}),e.jsxs("div",{className:"col-3",children:[e.jsx(Z,{id:t("defaultValue_currency"),label:""}),e.jsx("div",{className:"acpt-select",children:e.jsx("select",{id:t("defaultValue_currency"),name:t("defaultValue_currency"),placeholder:a("Currency"),defaultValue:_||"USD",className:"form-control",onChangeCapture:A=>{M(A.target.value),c(t("defaultValue"),JSON.stringify({currencyValue:N,currency:A.target.value}))},children:be&&be.map((A,Ee)=>e.jsx("option",{value:A.value,children:A.label},Ee))})})]})]});case F.LENGTH:const se=document.globals.globals.uom.length;return e.jsxs("div",{className:"container align-end",children:[e.jsxs("div",{className:"col-3",children:[e.jsx(Z,{id:t("defaultValue_length_value"),label:a("The default value for this field")}),e.jsx("input",{id:t("defaultValue_length_value"),name:t("defaultValue_length_value"),type:"number",min:.01,step:.01,className:"form-control",defaultValue:ie,onChangeCapture:A=>{he(A.target.value),c(t("defaultValue"),JSON.stringify({length:V,lengthValue:A.target.value}))}})]}),e.jsxs("div",{className:"col-3",children:[e.jsx(Z,{id:t("defaultValue_length"),label:""}),e.jsx("div",{className:"acpt-select",children:e.jsx("select",{id:t("defaultValue_length"),name:t("defaultValue_length"),placeholder:a("Length"),defaultValue:V||" KILOMETER",className:"form-control",onChangeCapture:A=>{G(A.target.value),c(t("defaultValue"),JSON.stringify({lengthValue:ie,length:A.target.value}))},children:se&&se.map((A,Ee)=>e.jsx("option",{value:A.value,children:A.label},Ee))})})]})]});case F.WEIGHT:const me=document.globals.globals.uom.weight;return e.jsxs("div",{className:"container align-end",children:[e.jsxs("div",{className:"col-3",children:[e.jsx(Z,{id:t("defaultValue_weight_value"),label:`${a("The default value for this field")}. ${a("From")}`}),e.jsx("input",{id:t("defaultValue_weight_value"),name:t("defaultValue_weight_value"),type:"number",min:.01,step:.01,className:"form-control",defaultValue:$,onChangeCapture:A=>{L(A.target.value),c(t("defaultValue"),JSON.stringify({weight:ge,weightValue:A.target.value}))}})]}),e.jsxs("div",{className:"col-3",children:[e.jsx(Z,{id:t("defaultValue_currency"),label:""}),e.jsx("div",{className:"acpt-select",children:e.jsx("select",{id:t("defaultValue_weight"),name:t("defaultValue_weight"),placeholder:a("Weight"),defaultValue:ge||"KILOGRAM",className:"form-control",onChangeCapture:A=>{oe(A.target.value),c(t("defaultValue"),JSON.stringify({weightValue:$,weight:A.target.value}))},children:me&&me.map((A,Ee)=>e.jsx("option",{value:A.value,children:A.label},Ee))})})]})]});case F.DATE_RANGE:return e.jsxs("div",{className:"container align-end",children:[e.jsxs("div",{className:"col-6",children:[e.jsx(Z,{id:t("defaultValue_from"),label:`${a("The default value for this field")}. ${a("From")}`}),e.jsx("input",{id:t("defaultValue_from"),name:t("defaultValue_from"),type:"date",className:"form-control",defaultValue:D,onChangeCapture:A=>{R(A.target.value),c(t("defaultValue"),JSON.stringify({to:x,from:A.target.value}))}})]}),e.jsxs("div",{className:"col-6",children:[e.jsx(Z,{id:t("defaultValue_to"),label:a("To")}),e.jsx("input",{id:t("defaultValue_to"),name:t("defaultValue_to"),type:"date",className:"form-control",defaultValue:x,disabled:!D,min:D,onChangeCapture:A=>{O(A.target.value),c(t("defaultValue"),JSON.stringify({from:D,to:A.target.value}))}})]})]});case F.URL:const Pe=y&&y[44]&&y[44].value!==""?y[44].value:"absolute";return e.jsxs("div",{className:"container align-end",children:[e.jsxs("div",{className:"col-6",children:[e.jsx(Z,{id:t("defaultValue_url"),label:a("URL")}),e.jsx("input",{id:t("defaultValue_url"),name:t("defaultValue_url"),type:Pe==="absolute"?"url":"text",className:"form-control",defaultValue:g,onChangeCapture:A=>{S(A.target.value),c(t("defaultValue"),JSON.stringify({urlLabel:C,url:A.target.value}))}})]}),e.jsxs("div",{className:"col-6",children:[e.jsx(Z,{id:t("defaultValue_url_label"),label:a("Label")}),e.jsx("input",{id:t("defaultValue_url_label"),name:t("defaultValue_url_label"),type:"text",className:"form-control",defaultValue:C,onChangeCapture:A=>{T(A.target.value),c(t("defaultValue"),JSON.stringify({url:g,urlLabel:A.target.value}))}})]})]});case F.PHONE:const qe=(A,Ee,Q,X,$e)=>{c(t("defaultValue"),JSON.stringify({phone:Ee,country:{dial:Q.dialCode,iso2:Q.iso2,name:Q.name}}))};return e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(Z,{id:t("defaultValue"),label:a("The default value for this field")}),e.jsx(rn,{defaultValue:m&&m.phone,containerClassName:"intl-tel-input",inputClassName:"form-control",defaultCountry:m&&m!==null&&m!==void 0&&(i=m.country)!==null&&i!==void 0&&i.iso2?m.country.iso2:"us",preferredCountries:m&&m!==null&&m!==void 0&&(o=m.country)!==null&&o!==void 0&&o.iso2?[m.country.iso2]:["us"],onPhoneNumberChange:qe,onPhoneNumberBlur:qe,onSelectFlag:qe})]})});case F.POST:if(!b)return null;const Me=Yt(b[0].relationship),Oe=b[0].to.type,Le=b[0].to.value;switch(Oe){default:case pe.CUSTOM_POST_TYPE:let A=document.globals.globals.find.POST_ID;return Le&&(A=A.filter(X=>X.label===Le)),de(Me,A);case pe.TAXONOMY:let Ee=document.globals.globals.find.TERM_ID;return Le&&(Ee=Ee.filter(X=>X.taxonomy===Le)),de(Me,Ee);case pe.USER:let Q=document.globals.globals.find.USER_ID;return Le&&(Q=Q.filter(X=>X.label===Le)),de(Me,Q)}case F.POST_OBJECT:case F.POST_OBJECT_MULTI:const ll=document.globals.globals.find.POST_ID;return de(n.type===F.POST_OBJECT_MULTI,ll);case F.TERM_OBJECT:case F.TERM_OBJECT_MULTI:const wl=document.globals.globals.find.TERM_ID;return de(n.type===F.TERM_OBJECT_MULTI,wl);case F.USER:case F.USER_MULTI:const Zl=document.globals.globals.find.USER_ID;return de(n.type===F.USER_MULTI,Zl);case F.COUNTRY:const ea=[{label:"Afghanistan ()",value:"Afghanistan ()"},{label:"land Islands (land)",value:"land Islands (land)"},{label:"Albania (Shqipri)",value:"Albania (Shqipri)"},{label:"Algeria ()",value:"Algeria ()"},{label:"American Samoa",value:"American Samoa"},{label:"Andorra",value:"Andorra"},{label:"Angola",value:"Angola"},{label:"Anguilla",value:"Anguilla"},{label:"Antarctica",value:"Antarctica"},{label:"Antigua and Barbuda",value:"Antigua and Barbuda"},{label:"Argentina",value:"Argentina"},{label:"Armenia ()",value:"Armenia ()"},{label:"Aruba",value:"Aruba"},{label:"Australia",value:"Australia"},{label:"Austria (sterreich)",value:"Austria (sterreich)"},{label:"Azerbaijan (Azrbaycan)",value:"Azerbaijan (Azrbaycan)"},{label:"Bahamas",value:"Bahamas"},{label:"Bahrain ()",value:"Bahrain ()"},{label:"Bangladesh ()",value:"Bangladesh ()"},{label:"Barbados",value:"Barbados"},{label:"Belarus ()",value:"Belarus ()"},{label:"Belgium (Belgi)",value:"Belgium (Belgi)"},{label:"Belize",value:"Belize"},{label:"Benin (Bnin)",value:"Benin (Bnin)"},{label:"Bermuda",value:"Bermuda"},{label:"Bhutan ()",value:"Bhutan ()"},{label:"Bolivia",value:"Bolivia"},{label:"Bosnia and Herzegovina (  )",value:"Bosnia and Herzegovina (  )"},{label:"Botswana",value:"Botswana"},{label:"Bouvet Island (Bouvetya)",value:"Bouvet Island (Bouvetya)"},{label:"Brazil (Brasil)",value:"Brazil (Brasil)"},{label:"British Indian Ocean Territory",value:"British Indian Ocean Territory"},{label:"British Virgin Islands",value:"British Virgin Islands"},{label:"Brunei",value:"Brunei"},{label:"Bulgaria ()",value:"Bulgaria ()"},{label:"Burkina Faso",value:"Burkina Faso"},{label:"Burundi (Uburundi)",value:"Burundi (Uburundi)"},{label:"Cambodia ()",value:"Cambodia ()"},{label:"Cameroon (Cameroun)",value:"Cameroon (Cameroun)"},{label:"Canada",value:"Canada"},{label:"Cape Verde (Kabu Verdi)",value:"Cape Verde (Kabu Verdi)"},{label:"Caribbean Netherlands",value:"Caribbean Netherlands"},{label:"Cayman Islands",value:"Cayman Islands"},{label:"Central African Republic (Rpublique Centrafricaine)",value:"Central African Republic (Rpublique Centrafricaine)"},{label:"Chad (Tchad)",value:"Chad (Tchad)"},{label:"Chile",value:"Chile"},{label:"China ()",value:"China ()"},{label:"Christmas Island",value:"Christmas Island"},{label:"Cocos (Keeling) Islands (Kepulauan Cocos (Keeling))",value:"Cocos (Keeling) Islands (Kepulauan Cocos (Keeling))"},{label:"Colombia",value:"Colombia"},{label:"Comoros ( )",value:"Comoros ( )"},{label:"Congo (DRC) (Jamhuri ya Kidemokrasia ya Kongo)",value:"Congo (DRC) (Jamhuri ya Kidemokrasia ya Kongo)"},{label:"Congo (Republic) (Congo-Brazzaville)",value:"Congo (Republic) (Congo-Brazzaville)"},{label:"Cook Islands",value:"Cook Islands"},{label:"Costa Rica",value:"Costa Rica"},{label:"Cte dIvoire",value:"Cte dIvoire"},{label:"Croatia (Hrvatska)",value:"Croatia (Hrvatska)"},{label:"Cuba",value:"Cuba"},{label:"Curaao",value:"Curaao"},{label:"Cyprus ()",value:"Cyprus ()"},{label:"Czech Republic (esk republika)",value:"Czech Republic (esk republika)"},{label:"Denmark (Danmark)",value:"Denmark (Danmark)"},{label:"Djibouti",value:"Djibouti"},{label:"Dominica",value:"Dominica"},{label:"Dominican Republic (Repblica Dominicana)",value:"Dominican Republic (Repblica Dominicana)"},{label:"Ecuador",value:"Ecuador"},{label:"Egypt ()",value:"Egypt ()"},{label:"El Salvador",value:"El Salvador"},{label:"Equatorial Guinea (Guinea Ecuatorial)",value:"Equatorial Guinea (Guinea Ecuatorial)"},{label:"Eritrea",value:"Eritrea"},{label:"Estonia (Eesti)",value:"Estonia (Eesti)"},{label:"Ethiopia",value:"Ethiopia"},{label:"Falkland Islands (Islas Malvinas)",value:"Falkland Islands (Islas Malvinas)"},{label:"Faroe Islands (Froyar)",value:"Faroe Islands (Froyar)"},{label:"Fiji",value:"Fiji"},{label:"Finland (Suomi)",value:"Finland (Suomi)"},{label:"France",value:"France"},{label:"French Guiana (Guyane franaise)",value:"French Guiana (Guyane franaise)"},{label:"French Polynesia (Polynsie franaise)",value:"French Polynesia (Polynsie franaise)"},{label:"French Southern Territories (Terres australes franaises)",value:"French Southern Territories (Terres australes franaises)"},{label:"Gabon",value:"Gabon"},{label:"Gambia",value:"Gambia"},{label:"Georgia ()",value:"Georgia ()"},{label:"Germany (Deutschland)",value:"Germany (Deutschland)"},{label:"Ghana (Gaana)",value:"Ghana (Gaana)"},{label:"Gibraltar",value:"Gibraltar"},{label:"Greece ()",value:"Greece ()"},{label:"Greenland (Kalaallit Nunaat)",value:"Greenland (Kalaallit Nunaat)"},{label:"Grenada",value:"Grenada"},{label:"Guadeloupe",value:"Guadeloupe"},{label:"Guam",value:"Guam"},{label:"Guatemala",value:"Guatemala"},{label:"Guernsey",value:"Guernsey"},{label:"Guinea (Guine)",value:"Guinea (Guine)"},{label:"Guinea-Bissau (Guin Bissau)",value:"Guinea-Bissau (Guin Bissau)"},{label:"Guyana",value:"Guyana"},{label:"Haiti",value:"Haiti"},{label:"Heard Island and Mcdonald Islands",value:"Heard Island and Mcdonald Islands"},{label:"Honduras",value:"Honduras"},{label:"Hong Kong ()",value:"Hong Kong ()"},{label:"Hungary (Magyarorszg)",value:"Hungary (Magyarorszg)"},{label:"Iceland (sland)",value:"Iceland (sland)"},{label:"India ()",value:"India ()"},{label:"Indonesia",value:"Indonesia"},{label:"Iran ()",value:"Iran ()"},{label:"Iraq ()",value:"Iraq ()"},{label:"Ireland",value:"Ireland"},{label:"Isle of Man",value:"Isle of Man"},{label:"Israel ()",value:"Israel ()"},{label:"Italy (Italia)",value:"Italy (Italia)"},{label:"Jamaica",value:"Jamaica"},{label:"Japan ()",value:"Japan ()"},{label:"Jersey",value:"Jersey"},{label:"Jordan ()",value:"Jordan ()"},{label:"Kazakhstan ()",value:"Kazakhstan ()"},{label:"Kenya",value:"Kenya"},{label:"Kiribati",value:"Kiribati"},{label:"Kosovo (Kosov)",value:"Kosovo (Kosov)"},{label:"Kuwait ()",value:"Kuwait ()"},{label:"Kyrgyzstan ()",value:"Kyrgyzstan ()"},{label:"Laos ()",value:"Laos ()"},{label:"Latvia (Latvija)",value:"Latvia (Latvija)"},{label:"Lebanon ()",value:"Lebanon ()"},{label:"Lesotho",value:"Lesotho"},{label:"Liberia",value:"Liberia"},{label:"Libya ()",value:"Libya ()"},{label:"Liechtenstein",value:"Liechtenstein"},{label:"Lithuania (Lietuva)",value:"Lithuania (Lietuva)"},{label:"Luxembourg",value:"Luxembourg"},{label:"Macau ()",value:"Macau ()"},{label:"Macedonia (FYROM) ()",value:"Macedonia (FYROM) ()"},{label:"Madagascar (Madagasikara)",value:"Madagascar (Madagasikara)"},{label:"Malawi",value:"Malawi"},{label:"Malaysia",value:"Malaysia"},{label:"Maldives",value:"Maldives"},{label:"Mali",value:"Mali"},{label:"Malta",value:"Malta"},{label:"Marshall Islands",value:"Marshall Islands"},{label:"Martinique",value:"Martinique"},{label:"Mauritania ()",value:"Mauritania ()"},{label:"Mauritius (Moris)",value:"Mauritius (Moris)"},{label:"Mayotte",value:"Mayotte"},{label:"Mexico (Mxico)",value:"Mexico (Mxico)"},{label:"Micronesia",value:"Micronesia"},{label:"Moldova (Republica Moldova)",value:"Moldova (Republica Moldova)"},{label:"Monaco",value:"Monaco"},{label:"Mongolia ()",value:"Mongolia ()"},{label:"Montenegro (Crna Gora)",value:"Montenegro (Crna Gora)"},{label:"Montserrat",value:"Montserrat"},{label:"Morocco ()",value:"Morocco ()"},{label:"Mozambique (Moambique)",value:"Mozambique (Moambique)"},{label:"Myanmar (Burma) ()",value:"Myanmar (Burma) ()"},{label:"Namibia (Namibi)",value:"Namibia (Namibi)"},{label:"Nauru",value:"Nauru"},{label:"Nepal ()",value:"Nepal ()"},{label:"Netherlands (Nederland)",value:"Netherlands (Nederland)"},{label:"New Caledonia (Nouvelle-Caldonie)",value:"New Caledonia (Nouvelle-Caldonie)"},{label:"New Zealand",value:"New Zealand"},{label:"Nicaragua",value:"Nicaragua"},{label:"Niger (Nijar)",value:"Niger (Nijar)"},{label:"Nigeria",value:"Nigeria"},{label:"Niue",value:"Niue"},{label:"Norfolk Island",value:"Norfolk Island"},{label:"North Korea (   )",value:"North Korea (   )"},{label:"Northern Mariana Islands",value:"Northern Mariana Islands"},{label:"Norway (Norge)",value:"Norway (Norge)"},{label:"Oman ()",value:"Oman ()"},{label:"Pakistan ()",value:"Pakistan ()"},{label:"Palau",value:"Palau"},{label:"Palestine ()",value:"Palestine ()"},{label:"Panama (Panam)",value:"Panama (Panam)"},{label:"Papua New Guinea",value:"Papua New Guinea"},{label:"Paraguay",value:"Paraguay"},{label:"Peru (Per)",value:"Peru (Per)"},{label:"Philippines",value:"Philippines"},{label:"Pitcairn Islands",value:"Pitcairn Islands"},{label:"Poland (Polska)",value:"Poland (Polska)"},{label:"Portugal",value:"Portugal"},{label:"Puerto Rico",value:"Puerto Rico"},{label:"Qatar ()",value:"Qatar ()"},{label:"Runion (La Runion)",value:"Runion (La Runion)"},{label:"Romania (Romnia)",value:"Romania (Romnia)"},{label:"Russia ()",value:"Russia ()"},{label:"Rwanda",value:"Rwanda"},{label:"Saint Barthlemy (Saint-Barthlemy)",value:"Saint Barthlemy (Saint-Barthlemy)"},{label:"Saint Helena",value:"Saint Helena"},{label:"Saint Kitts and Nevis",value:"Saint Kitts and Nevis"},{label:"Saint Lucia",value:"Saint Lucia"},{label:"Saint Martin (Saint-Martin (partie franaise))",value:"Saint Martin (Saint-Martin (partie franaise))"},{label:"Saint Pierre and Miquelon (Saint-Pierre-et-Miquelon)",value:"Saint Pierre and Miquelon (Saint-Pierre-et-Miquelon)"},{label:"Saint Vincent and the Grenadines",value:"Saint Vincent and the Grenadines"},{label:"Samoa",value:"Samoa"},{label:"San Marino",value:"San Marino"},{label:"So Tom and Prncipe (So Tom e Prncipe)",value:"So Tom and Prncipe (So Tom e Prncipe)"},{label:"Saudi Arabia (  )",value:"Saudi Arabia (  )"},{label:"Senegal (Sngal)",value:"Senegal (Sngal)"},{label:"Serbia ()",value:"Serbia ()"},{label:"Seychelles",value:"Seychelles"},{label:"Sierra Leone",value:"Sierra Leone"},{label:"Singapore",value:"Singapore"},{label:"Sint Maarten",value:"Sint Maarten"},{label:"Slovakia (Slovensko)",value:"Slovakia (Slovensko)"},{label:"Slovenia (Slovenija)",value:"Slovenia (Slovenija)"},{label:"Solomon Islands",value:"Solomon Islands"},{label:"Somalia (Soomaaliya)",value:"Somalia (Soomaaliya)"},{label:"South Africa",value:"South Africa"},{label:"South Georgia & South Sandwich Islands",value:"South Georgia & South Sandwich Islands"},{label:"South Korea ()",value:"South Korea ()"},{label:"South Sudan ( )",value:"South Sudan ( )"},{label:"Spain (Espaa)",value:"Spain (Espaa)"},{label:"Sri Lanka ( )",value:"Sri Lanka ( )"},{label:"Sudan ()",value:"Sudan ()"},{label:"Suriname",value:"Suriname"},{label:"Svalbard and Jan Mayen (Svalbard og Jan Mayen)",value:"Svalbard and Jan Mayen (Svalbard og Jan Mayen)"},{label:"Swaziland",value:"Swaziland"},{label:"Sweden (Sverige)",value:"Sweden (Sverige)"},{label:"Switzerland (Schweiz)",value:"Switzerland (Schweiz)"},{label:"Syria ()",value:"Syria ()"},{label:"Taiwan ()",value:"Taiwan ()"},{label:"Tajikistan",value:"Tajikistan"},{label:"Tanzania",value:"Tanzania"},{label:"Thailand ()",value:"Thailand ()"},{label:"Timor-Leste",value:"Timor-Leste"},{label:"Togo",value:"Togo"},{label:"Tokelau",value:"Tokelau"},{label:"Tonga",value:"Tonga"},{label:"Trinidad and Tobago",value:"Trinidad and Tobago"},{label:"Tunisia ()",value:"Tunisia ()"},{label:"Turkey (Trkiye)",value:"Turkey (Trkiye)"},{label:"Turkmenistan",value:"Turkmenistan"},{label:"Turks and Caicos Islands",value:"Turks and Caicos Islands"},{label:"Tuvalu",value:"Tuvalu"},{label:"Uganda",value:"Uganda"},{label:"Ukraine ()",value:"Ukraine ()"},{label:"United Arab Emirates (  )",value:"United Arab Emirates (  )"},{label:"United Kingdom",value:"United Kingdom"},{label:"United States",value:"United States"},{label:"U.S. Minor Outlying Islands",value:"U.S. Minor Outlying Islands"},{label:"U.S. Virgin Islands",value:"U.S. Virgin Islands"},{label:"Uruguay",value:"Uruguay"},{label:"Uzbekistan (Ozbekiston)",value:"Uzbekistan (Ozbekiston)"},{label:"Vanuatu",value:"Vanuatu"},{label:"Vatican City (Citt del Vaticano)",value:"Vatican City (Citt del Vaticano)"},{label:"Venezuela",value:"Venezuela"},{label:"Vietnam (Vit Nam)",value:"Vietnam (Vit Nam)"},{label:"Wallis and Futuna",value:"Wallis and Futuna"},{label:"Western Sahara ( )",value:"Western Sahara ( )"},{label:"Yemen ()",value:"Yemen ()"},{label:"Zambia",value:"Zambia"},{label:"Zimbabwe",value:"Zimbabwe"}];return e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(Z,{id:t("defaultValue"),label:a("The default value for this field")}),e.jsx(le,{type:"number",id:t("defaultValue"),register:u,errors:p,placeholder:a("Default value"),defaultValue:typeof m=="string"?m:null,values:ea})]})});case F.CLONE:return e.jsx(Zt,{id:t("defaultValue[]"),field:n});default:return e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(Z,{id:t("defaultValue"),label:a("The default value for this field")}),e.jsx(ue,{id:t("defaultValue"),register:u,errors:p,placeholder:a("Default value"),defaultValue:typeof m=="string"?m:null,validate:{maxLength:{value:255,message:"max length is 255"}}})]})})}};on.propTypes={formId:d.func.isRequired,field:d.object.isRequired};const dn=({formId:t,boxIndex:n,fieldIndex:r,boxId:l,field:s})=>{const{group:i}=ne(N=>N.metaState),o=ae(),[u,h]=k.useState(!0),{register:p,unregister:c,control:j,formState:{errors:y},resetField:b,reset:v,setValue:m,setError:f,clearErrors:E}=W(),D=P({control:j,name:t("type")}),R=P({control:j,name:`boxes.${n}.fields`}),x=P({control:j,name:`boxes.${n}.name`}),O=Fa(i.boxes,l,s.id),g=()=>D||s.type,S=N=>{if(g()!==N){const w={...s};w.type=N,N!==F.REPEATER&&(w.children=[]),N!==F.FLEXIBLE&&(w.blocks=[]),N!==F.POST&&(w.relations=[]),jt(N)||(c(t("validationRules")),w.validationRules=[]),c(t("relations")),c(t("blocks")),c(t("children")),w.children||(w.children=[]),w.blocks||(w.blocks=[]),w.relations||(w.relations=[]),w.visibilityConditions||(w.visibilityConditions=[]),w.validationRules||(w.validationRules=[]),o(Nt({field:w,boxId:l}))}},C=async N=>{if(u){const w=Qe(Ze(N));m(t("name"),w),await T(w)?f(t("name"),{message:a("Name is already taken")}):E(t("name"))}},T=async N=>{const w=Qe(Ze(N));let _=[];if(R&&R.map((M,V)=>{V!==r&&_.push(M.name)}),_.includes(w))return a("Name is already taken");if(s.name!==w&&(await je("checkMetaBoxFieldNameAction",{boxName:x||s.boxName,fieldName:w})).exists===!0)return a("Name is already taken")};return e.jsxs(q.Fragment,{children:[e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{className:"container align-end",children:[e.jsxs("div",{className:"col-4",children:[e.jsx(Z,{isRequired:!1,id:t("label"),label:e.jsxs("div",{className:"flex-between",children:[e.jsx("span",{children:a("Field label")}),e.jsx("a",{href:"#",style:{fontWeight:"normal"},onClick:N=>{N.preventDefault(),h(!u)},children:a(`${u?"Auto slug ON":"Auto slug OFF"}`)})]})}),e.jsx(ue,{id:t("label"),register:p,errors:y,defaultValue:s.label,placeholder:a("The field label, non latin characters are allowed"),onChangeCapture:_a(N=>{C(N.target.value)},300),onClick:N=>{N.target.value==="meta box field"&&b(t("label"))},validate:{maxLength:{value:255,message:"max length is 255"}}})]}),e.jsxs("div",{className:"col-4",children:[e.jsx(Z,{isRequired:!0,id:t("name"),label:a("Field slug")}),e.jsx(ue,{id:t("name"),register:p,errors:y,placeholder:a("Field slug (Ex. gallery or text_1)"),defaultValue:s.name,onClick:N=>{N.target.value==="meta_box_field"&&b(t("name"))},validate:{validate:{alphanumericallyValid:cl,checkIfNameIsValid:T},required:a("This field is mandatory"),maxLength:{value:255,message:"max length is 255"}}})]}),e.jsxs("div",{className:"col-4",children:[e.jsx(Z,{isRequired:!0,id:t("type"),label:a("Choose the field type")}),e.jsx(le,{register:p,id:t("type"),errors:y,defaultValue:s.type,values:ut(O),onChangeCapture:N=>{S(N.target.value)}})]})]}),e.jsx("div",{className:"container align-end",children:e.jsxs("div",{className:"col-12",children:[e.jsx(Z,{id:t("description"),label:a("The description of this field (showed only on admin panel)")}),e.jsx(Ci,{id:t("description"),register:p,defaultValue:s.description,errors:y,placeholder:a("A brief description"),characterLimit:255,rows:4,validate:{maxLength:{value:255,message:"max length is 255"}}})]})}),e.jsx(on,{field:s,formId:t})]}),rs(g())&&e.jsx(Lt,{boxId:l,fieldId:s.id,boxIndex:n,fieldIndex:r,parentFieldId:s.parentId?s.parentId:null,options:s.options?s.options:[],isMulti:s.type===F.SELECT_MULTI||s.type===F.CHECKBOX}),Ca(g())&&e.jsx(Bt,{nestingLevel:O,boxId:l,parentFieldId:s.id,boxIndex:n,parentFieldIndex:r,childrenFields:s.children}),wa(g())&&e.jsx(Ut,{nestingLevel:O,boxId:l,parentFieldId:s.id,boxIndex:n,parentFieldIndex:r,blocks:s.blocks}),os(g())&&e.jsx(Wt,{formId:t,field:s})]})};dn.propTypes={formId:d.func.isRequired,boxIndex:d.number.isRequired,fieldIndex:d.number.isRequired,boxId:d.string.isRequired,field:d.object.isRequired};const un=({id:t,values:n,description:r,validate:l,register:s,style:i,errors:o})=>{const u=ul(o,t);return e.jsxs(q.Fragment,{children:[e.jsxs("div",{className:`${i==="inline"?"i-flex-center":"flex-column"} s-8`,style:{minHeight:"46px"},children:[Object.keys(n).map((h,p)=>e.jsxs("label",{className:"radio",htmlFor:`${t}_${p}`,children:[e.jsx("input",{name:t,value:n[h].value,defaultChecked:n[h].checked,"aria-invalid":u?"true":"false",type:"radio",id:`${t}_${p}`,...s(t,{...l})}),e.jsx("span",{children:n[h].label})]})),u&&e.jsx("div",{className:"invalid-feedback",children:u.message})]}),r&&e.jsx("div",{className:"form-description",children:r}),u&&e.jsx("div",{className:"invalid-feedback",children:u.message})]})};un.propTypes={id:d.string.isRequired,description:d.string,values:d.arrayOf(d.object).isRequired,validate:d.func,register:d.func.isRequired,errors:d.array.isRequired,style:d.string};const cn=({renderAdvancedField:t})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:a("Display settings")}),e.jsx("div",{className:"flex-column s-24",children:e.jsx("div",{className:"container align-end",children:e.jsx("div",{className:"col-12",children:t({type:"radio",index:37,innerKey:"display",placeholder:a("Display"),label:a("Display"),options:{options:ds}})})})})]});cn.propTypes={renderAdvancedField:d.func.isRequired};const pn=({fieldType:t,renderAdvancedField:n})=>{const r=[F.LENGTH,F.NUMBER,F.RANGE,F.CURRENCY,F.DATE,F.DATE_TIME,F.LENGTH,F.NUMBER,F.TIME,F.WEIGHT],l=[F.EDITOR,F.TEXTAREA],s=[F.PHONE,F.EMAIL,F.TEXT,F.URL];return r.includes(t)===!1&&l.includes(t)===!1&&s.includes(t)===!1?null:e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:a("Textual fields settings")}),e.jsx("div",{className:"flex-column s-24",children:e.jsxs("div",{className:"container align-end",children:[r.includes(t)&&e.jsxs(q.Fragment,{children:[e.jsx("div",{className:"col-4",children:n({type:"integer",index:8,innerKey:"min",placeholder:a("The minimum value (used only by numeric and textual fields)"),label:a("Min value (used only by numeric and textual fields)"),options:{}})}),e.jsx("div",{className:"col-4",children:n({type:"integer",index:9,innerKey:"max",placeholder:a("The maximum value (used only by numeric and textual fields)"),label:a("Max value (used only by numeric and textual fields)"),options:{}})}),e.jsx("div",{className:"col-4",children:n({type:"integer",index:10,innerKey:"step",placeholder:a("Step value (used only by numeric fields)"),label:a("Step value (used only by numeric fields)"),options:{}})})]}),l.includes(t)&&e.jsxs(q.Fragment,{children:[e.jsx("div",{className:"col-6",children:n({type:"integer",index:8,innerKey:"min",placeholder:a("The minimum value (used only by numeric and textual fields)"),label:a("Min value (used only by numeric and textual fields)"),options:{}})}),e.jsx("div",{className:"col-6",children:n({type:"integer",index:9,innerKey:"max",placeholder:a("The maximum value (used only by numeric and textual fields)"),label:a("Max value (used only by numeric and textual fields)"),options:{}})})]}),s.includes(t)&&e.jsxs(q.Fragment,{children:[e.jsx("div",{className:"col-4",children:n({type:"integer",index:8,innerKey:"min",placeholder:a("The minimum value (used only by numeric and textual fields)"),label:a("Min value (used only by numeric and textual fields)"),options:{}})}),e.jsx("div",{className:"col-4",children:n({type:"integer",index:9,innerKey:"max",placeholder:a("The maximum value (used only by numeric and textual fields)"),label:a("Max value (used only by numeric and textual fields)"),options:{}})}),e.jsx("div",{className:"col-4",children:n({type:"text",index:11,innerKey:"pattern",placeholder:a("Pattern value (used only by numeric and textual fields)"),label:a("Pattern value (used only by textual fields)"),options:{}})})]})]})})]})};pn.propTypes={fieldType:d.string.isRequired,renderAdvancedField:d.func.isRequired};const hn=({renderAdvancedField:t})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:a("File field settings")}),e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:"col-4",children:t({type:"select",index:14,innerKey:"accepts",placeholder:a("Input file accepts"),label:a("Input file accepts"),options:{multiple:!0,options:[{label:"image",value:"image"},{label:"video",value:"video"},{label:"document",value:"document"},{label:"audio",value:"audio"}]}})}),e.jsx("div",{className:"col-4",children:t({type:"radio",index:34,innerKey:"render",placeholder:a("Render as"),label:a("Render as"),options:{options:yl}})}),e.jsx("div",{className:"col-4",children:t({type:"radio",index:5,innerKey:"hide_url_label",placeholder:a("Hide the label"),label:a("Hide the label"),options:{options:Fe}})})]}),e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:"col-6",children:t({type:"integer",index:16,innerKey:"max_size",placeholder:a("Maximum size"),label:`${a("Maximum size")} (Mb)`,options:{min:"0"}})}),e.jsx("div",{className:"col-6",children:t({type:"integer",index:17,innerKey:"min_size",placeholder:a("Minimum size"),label:`${a("Minimum size")} (Mb)`,options:{min:"0"}})})]})]})]});hn.propTypes={renderAdvancedField:d.func.isRequired};const mn=({renderAdvancedField:t,fieldType:n})=>{const r=[{label:a("On the top"),value:"top"},{label:a("On the left"),value:"left"},{label:a("On the right"),value:"right"},{label:a("No display"),value:"none"}],l=[{label:a("Center"),value:"center"},{label:a("Top"),value:"flex-start"},{label:a("Bottom"),value:"flex-end"}];return e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:a("General settings")}),e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:"col-4",children:t({type:"select",index:1,innerKey:"headline",placeholder:a("Select the headline location (default: on the left)"),label:a("Headline location"),options:{options:r}})}),e.jsx("div",{className:"col-4",children:t({type:"select",index:29,innerKey:"vertical_alignment",placeholder:a("Select the field vertical alignment (default: center)"),label:a("Vertical alignment"),options:{options:l}})}),e.jsx("div",{className:"col-4",children:t({type:"integer",index:2,innerKey:"width",placeholder:a("Field width in % ([1-100] default value: 100)"),label:a("Field width"),options:{min:1,max:100,step:1}})})]}),Fs(n)&&e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:"col-6",children:t({type:"text",index:6,innerKey:"before",placeholder:a("This text will appear before input"),label:a("Text before. HTML is allowed (ex. &lt;small&gt;)"),options:{}})}),e.jsx("div",{className:"col-6",children:t({type:"text",index:7,innerKey:"after",placeholder:a("This text will appear after input"),label:a("Text after. HTML is allowed (ex. &lt;small&gt;)"),options:{}})})]}),e.jsx("div",{className:"container align-end",children:e.jsx("div",{className:"col-12",children:t({type:"text",index:18,innerKey:"css",placeholder:a("These CSS classes will be applied to back-end editor fields"),label:a("Add CSS classes to back-end editor fields (ex. class-active pulse)"),options:{}})})})]})]})};mn.propTypes={fieldType:d.string.isRequired,renderAdvancedField:d.func.isRequired};const fn=({renderAdvancedField:t,fieldType:n})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:a("Textarea settings")}),e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:`col-${n===F.TEXTAREA?4:6}`,children:t({type:"integer",index:25,innerKey:"cols",placeholder:a("The cols value (used only by textarea fields)"),label:a("Cols"),options:{min:"0",max:"999999",step:"1"}})}),e.jsx("div",{className:`col-${n===F.TEXTAREA?4:6}`,children:t({type:"integer",index:26,innerKey:"rows",placeholder:a("The rows value (used only by textarea fields)"),label:a("Rows"),options:{min:"0",max:"999999",step:"1"}})}),n===F.TEXTAREA&&e.jsx("div",{className:"col-4",children:t({type:"radio",index:38,innerKey:"allow_html",label:a("Allow HTML"),options:{options:Fe}})})]}),n===F.EDITOR&&e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:"col-4",children:t({type:"radio",index:35,innerKey:"media",label:a("Disable media upload"),options:{options:Fe}})}),e.jsx("div",{className:"col-4",children:t({type:"select",index:39,innerKey:"toolbar",placeholder:a("Toolbar"),label:a("Toolbar"),options:{options:us}})}),e.jsx("div",{className:"col-4",children:t({type:"select",index:40,innerKey:"tabs",placeholder:a("Tabs"),label:a("Tabs"),options:{options:cs}})})]})]})]});fn.propTypes={fieldType:d.string.isRequired,renderAdvancedField:d.func.isRequired};const bn=({renderAdvancedField:t})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:a("Radio field settings")}),e.jsx("div",{children:t({type:"radio",index:4,innerKey:"hide_blank_radio",placeholder:a("Hide the blank value"),label:a("Hide the blank value"),options:{options:Fe}})})]});bn.propTypes={renderAdvancedField:d.func.isRequired};const vn=({renderAdvancedField:t,fieldType:n})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:a("Date field settings")}),e.jsx("div",{className:"flex-column s-24",children:e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:"col-4",children:t({type:"date",index:8,innerKey:"min",placeholder:a("The minimum value (used only by numeric and textual fields)"),label:a("Min value (used only by numeric and textual fields)"),options:{}})}),e.jsx("div",{className:"col-4",children:t({type:"date",index:9,innerKey:"max",placeholder:a("The maximum value (used only by numeric and textual fields)"),label:a("Max value (used only by numeric and textual fields)"),options:{}})}),e.jsx("div",{className:"col-4",children:t({type:"select",index:27,innerKey:"date_format",placeholder:a("Date format"),label:a("Date format"),options:{options:ct}})})]})})]});vn.propTypes={fieldType:d.string.isRequired,renderAdvancedField:d.func.isRequired};const xn=({renderAdvancedField:t})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:a("Datetime field settings")}),e.jsx("div",{className:"flex-column s-24",children:e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:"col-3",children:t({type:"date",index:8,innerKey:"min",placeholder:a("The minimum value (used only by numeric and textual fields)"),label:a("Min value (used only by numeric and textual fields)"),options:{}})}),e.jsx("div",{className:"col-3",children:t({type:"date",index:9,innerKey:"max",placeholder:a("The maximum value (used only by numeric and textual fields)"),label:a("Max value (used only by numeric and textual fields)"),options:{}})}),e.jsx("div",{className:"col-3",children:t({type:"select",index:27,innerKey:"date_format",placeholder:a("Date format"),label:a("Date format"),options:{options:ct}})}),e.jsx("div",{className:"col-3",children:t({type:"select",index:28,innerKey:"time_format",placeholder:a("Time format"),label:a("Time format"),options:{options:pt}})})]})})]});xn.propTypes={renderAdvancedField:d.func.isRequired};const gn=({renderAdvancedField:t})=>{const n=[{value:"PASSWORD_DEFAULT",label:"DEFAULT"},{value:"PASSWORD_BCRYPT",label:"BCRYPT"},{value:"PASSWORD_ARGON2I",label:"ARGON2I"},{value:"PASSWORD_ARGON2ID",label:"ARGON2ID)"}];return e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:a("Password field settings")}),e.jsx("div",{children:t({type:"select",index:32,innerKey:"algorithm",placeholder:a("Algorithm"),label:a("Algorithm"),options:{options:n}})})]})};gn.propTypes={renderAdvancedField:d.func.isRequired};const yn=({renderAdvancedField:t})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:a("Time field settings")}),e.jsx("div",{children:t({type:"select",index:28,innerKey:"time_format",placeholder:a("Time format"),label:a("Time format"),options:{options:pt}})})]});yn.propTypes={renderAdvancedField:d.func.isRequired};const jn=({renderAdvancedField:t})=>{const n=[{label:a("Row"),value:"row"},{label:a("Block"),value:"block"},{label:a("Table"),value:"table"}];return e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:a("Clone field settings")}),e.jsx("div",{children:t({type:"select",index:20,innerKey:"layout",placeholder:a("The look of the field for admins and editors."),label:a("Field layout"),options:{options:n}})})]})};jn.propTypes={renderAdvancedField:d.func.isRequired};const Nn=({renderAdvancedField:t})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:a("Audio field settings")}),e.jsx("div",{className:"flex-column s-24",children:e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:"col-4",children:t({type:"radio",index:33,innerKey:"custom_audio_player",placeholder:a("Use the custom audio player"),label:a("Use the custom audio player"),options:{options:Fe}})}),e.jsx("div",{className:"col-4",children:t({type:"radio",index:36,innerKey:"disable_cover",placeholder:a("Disable cover in custom the audio player"),label:a("Disable cover in the custom audio player"),options:{options:Fe}})}),e.jsx("div",{className:"col-4",children:t({type:"radio",index:34,innerKey:"render",placeholder:a("Render as"),label:a("Render as"),options:{options:yl}})})]})})]});Nn.propTypes={renderAdvancedField:d.func.isRequired};const Cn=({renderAdvancedField:t,baseFormId:n})=>{const{control:r}=W(),l=P({control:r,name:n("advancedOptions.5.value")}),s=[{label:a("Absolute (ex. http://example.com)"),value:"absolute"},{label:a("Relative (ex. /path/example/field)"),value:"relative"}];return e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:a("URL field settings")}),e.jsx("div",{className:"flex-column s-24",children:e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:"col-4",children:t({type:"select",index:44,innerKey:"url_type",placeholder:a("URL structure type"),label:a("URL structure type"),options:{options:s}})}),e.jsx("div",{className:"col-4",children:t({type:"radio",index:5,innerKey:"hide_url_label",placeholder:a("Hide the label"),label:a("Hide the label"),options:{options:Fe}})}),e.jsx("div",{className:"col-4",children:t({type:"radio",index:34,innerKey:"render",placeholder:a("Render as"),label:a("Render as"),options:{options:ps.filter(i=>l==1?i.value!=="label":!0)}})})]})})]})};Cn.propTypes={baseFormId:d.string.isRequired,renderAdvancedField:d.func.isRequired};const wn=({renderAdvancedField:t,relationship:n=null})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:a("Relational field settings")}),n&&Yt(n)?e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:"col-3",children:t({type:"select",index:20,innerKey:"layout",placeholder:a("The look of the field for admins and editors."),label:a("Field layout"),options:{options:Al()}})}),e.jsx("div",{className:"col-3",children:t({type:"radio",index:45,innerKey:"selector",placeholder:a("Field selector"),label:a("Field selector"),options:{options:xl}})}),e.jsx("div",{className:"col-3",children:t({type:"integer",index:12,innerKey:"minimum_blocks",placeholder:a("The limit on how many elements are required ([1-100])"),label:a("Minimum elements allowed"),options:{min:"0"}})}),e.jsx("div",{className:"col-3",children:t({type:"integer",index:13,innerKey:"maximum_blocks",placeholder:a("The limit on how many elements are allowed ([1-100])"),label:a("Maximum elements allowed"),options:{min:"0"}})})]}):e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:"col-6",children:t({type:"select",index:20,innerKey:"layout",placeholder:a("The look of the field for admins and editors."),label:a("Field layout"),options:{options:Al()}})}),e.jsx("div",{className:"col-6",children:t({type:"radio",index:45,innerKey:"selector",placeholder:a("Field selector"),label:a("Field selector"),options:{options:xl}})})]})]});wn.propTypes={renderAdvancedField:d.func.isRequired,relationship:d.string};const Sn=({renderAdvancedField:t,isMulti:n=!1})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:a("Post object settings")}),e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:"col-3",children:t({type:"select",index:20,innerKey:"layout",placeholder:a("The look of the field for admins and editors."),label:a("Field layout"),options:{options:Al()}})}),e.jsx("div",{className:"col-3",children:t({type:"select",index:21,innerKey:"filter_post_type",placeholder:a("Filter by post type"),label:a("Filter by post type"),options:{options:document.globals.globals.find.customPostType}})}),e.jsx("div",{className:"col-3",children:t({type:"select",index:22,innerKey:"filter_post_status",placeholder:a("Filter by post status"),label:a("Filter by post status"),options:{options:Ti}})}),e.jsx("div",{className:"col-3",children:t({type:"select",index:23,innerKey:"filter_taxonomy",placeholder:a("Filter by taxonomy"),label:a("Filter by taxonomy"),options:{options:document.globals.globals.find.TERM_ID}})})]}),e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:`col-${n?"4":"12"}`,children:t({type:"radio",index:45,innerKey:"selector",placeholder:a("Field selector"),label:a("Field selector"),options:{options:xl}})}),n&&e.jsxs(q.Fragment,{children:[e.jsx("div",{className:"col-4",children:t({type:"integer",index:12,innerKey:"minimum_blocks",placeholder:a("The limit on how many elements are required ([1-100])"),label:a("Minimum elements allowed"),options:{min:"0"}})}),e.jsx("div",{className:"col-4",children:t({type:"integer",index:13,innerKey:"maximum_blocks",placeholder:a("The limit on how many elements are allowed ([1-100])"),label:a("Maximum elements allowed"),options:{min:"0"}})})]})]})]})]});Sn.propTypes={renderAdvancedField:d.func.isRequired,isMulti:d.bool};const Tn=({renderAdvancedField:t})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:a("Image settings")}),e.jsx("div",{className:"flex-column s-24",children:e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:"col-6",children:t({type:"radio",index:31,innerKey:"set_thumbnail",placeholder:a("Set as post thumbnail"),label:a("Set as post thumbnail"),options:{options:Fe}})}),e.jsx("div",{className:"col-6",children:t({type:"radio",index:34,innerKey:"render",placeholder:a("Render as"),label:a("Render as"),options:{options:yl}})})]})})]});Tn.propTypes={renderAdvancedField:d.func.isRequired};const Rn=({renderAdvancedField:t})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:a("Image slider settings")}),e.jsx("div",{className:"flex-column s-24",children:e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:"col-6",children:t({type:"radio",index:31,innerKey:"set_thumbnail",placeholder:a("Set the first image as post thumbnail"),label:a("Set the first image as post thumbnail"),options:{options:Fe}})}),e.jsx("div",{className:"col-6",children:t({type:"integer",index:41,innerKey:"default_percent",placeholder:a("The default percent value"),label:a("Default percent"),options:{min:"0",max:"100",step:"1"}})})]})})]});Rn.propTypes={renderAdvancedField:d.func.isRequired};const Dn=({renderAdvancedField:t,isMulti:n})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:a("Term object settings")}),e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:"col-6",children:t({type:"select",index:23,innerKey:"filter_taxonomy",placeholder:a("Filter by taxonomy"),label:a("Filter by taxonomy"),options:{options:document.globals.globals.find.taxonomy}})}),e.jsx("div",{className:"col-6",children:t({type:"radio",index:30,innerKey:"sync_taxonomy",placeholder:a("Sync with post terms"),label:a("Sync with post terms"),options:{options:Fe}})})]}),e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:`col-${n?"4":"12"}`,children:t({type:"radio",index:45,innerKey:"selector",placeholder:a("Field selector"),label:a("Field selector"),options:{options:xl}})}),n&&e.jsxs(q.Fragment,{children:[e.jsx("div",{className:"col-4",children:t({type:"integer",index:12,innerKey:"minimum_blocks",placeholder:a("The limit on how many elements are required ([1-100])"),label:a("Minimum elements allowed"),options:{min:"0"}})}),e.jsx("div",{className:"col-4",children:t({type:"integer",index:13,innerKey:"maximum_blocks",placeholder:a("The limit on how many elements are allowed ([1-100])"),label:a("Maximum elements allowed"),options:{min:"0"}})})]})]})]})]});Dn.propTypes={renderAdvancedField:d.func.isRequired,isMulti:d.bool};const Fr=[{label:"Administrator",value:"administrator"},{label:"Editor",value:"editor"},{label:"Author",value:"author"},{label:"Contributor",value:"contributor"},{label:"Viewer",value:"viewer"},{label:"Subscriber",value:"subscriber"}],En=({renderAdvancedField:t,isMulti:n})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:a("User settings")}),e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:"col-6",children:t({type:"select",index:20,innerKey:"layout",placeholder:a("The look of the field for admins and editors."),label:a("Field layout"),options:{options:Al()}})}),e.jsx("div",{className:"col-6",children:t({type:"select",index:24,innerKey:"filter_role",placeholder:a("Filter by role"),label:a("Filter by role"),options:{multiple:!0,options:Fr}})})]}),e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:`col-${n?"4":"12"}`,children:t({type:"radio",index:45,innerKey:"selector",placeholder:a("Field selector"),label:a("Field selector"),options:{options:xl}})}),n&&e.jsxs(q.Fragment,{children:[e.jsx("div",{className:"col-4",children:t({type:"integer",index:12,innerKey:"minimum_blocks",placeholder:a("The limit on how many elements are required ([1-100])"),label:a("Minimum elements allowed"),options:{min:"0"}})}),e.jsx("div",{className:"col-4",children:t({type:"integer",index:13,innerKey:"maximum_blocks",placeholder:a("The limit on how many elements are allowed ([1-100])"),label:a("Maximum elements allowed"),options:{min:"0"}})})]})]})]})]});En.propTypes={renderAdvancedField:d.func.isRequired,isMulti:d.bool};const Fn=({renderAdvancedField:t,leadingFieldOptions:n})=>{const r=[{label:a("Row"),value:"row"},{label:a("Block"),value:"block"},{label:a("Table"),value:"table"}];return e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:a("Nestable fields layout settings")}),e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:"col-6",children:t({type:"select",index:19,innerKey:"leading_field",placeholder:a("The leading field (which will be displayed when the repeater is collapsed)."),label:a("Leading field"),options:{options:n}})}),e.jsx("div",{className:"col-6",children:t({type:"select",index:20,innerKey:"layout",placeholder:a("The look of the field for admins and editors."),label:a("Field layout"),options:{options:r}})})]}),e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:"col-4",children:t({type:"integer",index:3,innerKey:"columns",placeholder:a("Field columns ([1-6] only for repeater field)"),label:a("Field columns"),options:{min:1,max:6,step:1}})}),e.jsx("div",{className:"col-4",children:t({type:"integer",index:12,innerKey:"minimum_blocks",placeholder:a("The limit on how many elements are required ([1-100])"),label:a("Minimum elements allowed"),options:{min:"0"}})}),e.jsx("div",{className:"col-4",children:t({type:"integer",index:13,innerKey:"maximum_blocks",placeholder:a("The limit on how many elements are allowed ([1-100])"),label:a("Maximum elements allowed"),options:{min:"0"}})})]})]})]})};Fn.propTypes={renderAdvancedField:d.func.isRequired,leadingFieldOptions:d.array.isRequired};const On=({renderAdvancedField:t})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:a("Gallery settings")}),e.jsx("div",{className:"flex-column s-24",children:e.jsxs("div",{className:"container align-end",children:[e.jsx("div",{className:"col-6",children:t({type:"radio",index:31,innerKey:"set_thumbnail",placeholder:a("Set the first image as post thumbnail"),label:a("Set the first image as post thumbnail"),options:{options:Fe}})}),e.jsx("div",{className:"col-6",children:t({type:"radio",index:34,innerKey:"render",placeholder:a("Render as"),label:a("Render as"),options:{options:yl}})})]})})]});On.propTypes={renderAdvancedField:d.func.isRequired};const kn=({renderAdvancedField:t})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:a("Video settings")}),e.jsx("div",{className:"flex-column s-24",children:e.jsx("div",{className:"container align-end",children:e.jsx("div",{className:"col-12",children:t({type:"radio",index:34,innerKey:"render",placeholder:a("Render as"),label:a("Render as"),options:{options:yl}})})})})]});kn.propTypes={renderAdvancedField:d.func.isRequired};const _n=({renderAdvancedField:t})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:a("Text settings")}),e.jsx("div",{className:"flex-column s-24",children:e.jsx("div",{className:"container align-end",children:e.jsx("div",{className:"col-4",children:t({type:"radio",index:38,innerKey:"allow_html",label:a("Allow HTML"),options:{options:Fe}})})})})]});_n.propTypes={renderAdvancedField:d.func.isRequired};const In=({renderAdvancedField:t})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:a("ID settings")}),e.jsx("div",{className:"flex-column s-24",children:e.jsx("div",{className:"container align-end",children:e.jsx("div",{className:"col-6",children:t({type:"select",index:42,innerKey:"id_strategy",placeholder:a("Select the ID generation strategy"),label:a("Select the ID generation strategy"),options:{options:hs}})})})})]});In.propTypes={renderAdvancedField:d.func.isRequired};const qn=({renderAdvancedField:t})=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:a("HTML settings")}),e.jsx("div",{className:"flex-column s-24",children:e.jsx("div",{className:"container align-end",children:e.jsx("div",{className:"col-4",children:t({type:"radio",index:43,innerKey:"allow_dangerous_content",label:a("Allow dangerous content"),options:{options:Fe}})})})})]});qn.propTypes={renderAdvancedField:d.func.isRequired};const Mn=({field:t,formId:n})=>{var r;const{control:l,register:s,formState:{errors:i},setValue:o,clearErrors:u}=W(),h=P({control:l,name:n("children")}),p=P({control:l,name:n("relations")}),c=P({control:l,name:n("blocks")});let j=[];h&&h.length>0&&h.map(b=>{Dl(b.type)&&j.push({label:b.label?b.label:b.name,value:b.id})}),c&&c.length>0&&c.map(b=>{b.fields&&b.fields.length>0&&b.fields.map(v=>{Dl(v.type)&&j.push({label:v.label?v.label:v.name,value:v.id})})});const y=({type:b,index:v,innerKey:m,label:f,placeholder:E,options:D})=>{const R=g=>`${n(`advancedOptions.${v}.${g}`)}`,x=()=>{if(!t.advancedOptions)return null;const g=t.advancedOptions[v];return g||null},O=()=>{let g={};return D.min&&(g.min={value:D.min,message:a("min length is")+" "+D.min}),D.max&&(g.max={value:D.max,message:a("max length is")+" "+D.max}),g};return e.jsxs(q.Fragment,{children:[e.jsx(fe,{id:R("id"),value:x()?x().id:ye(),register:s}),e.jsx(fe,{id:R("key"),value:x()?x().key:m,register:s}),e.jsx(Z,{id:R("value"),label:e.jsx("span",{dangerouslySetInnerHTML:{__html:f}})}),b==="toggle"&&e.jsx(ra,{id:R("value"),register:s,errors:i,placeholder:E,defaultValue:x()?x().value:null}),b==="integer"&&e.jsx(ue,{type:"number",id:R("value"),register:s,errors:i,placeholder:E,min:D.min?D.min:null,max:D.max?D.max:null,step:D.step?D.step:null,defaultValue:x()?x().value:null,validate:O()}),b==="date"&&e.jsx(ue,{type:"date",id:R("value"),register:s,errors:i,placeholder:E,defaultValue:x()?x().value:null}),b==="radio"&&D&&D.options&&e.jsx(q.Fragment,{children:e.jsx(un,{style:"inline",register:s,id:R("value"),errors:i,placeholder:E,values:D.options,defaultValue:x()?x().value:null})}),b==="select"&&D&&D.options&&e.jsx(q.Fragment,{children:D.multiple&&D.multiple===!0?e.jsx(Te,{clearErrors:u,errors:i,id:R("value"),register:s,setValue:o,values:D.options,defaultValue:x()?x().value:null}):e.jsx(le,{register:s,id:R("value"),errors:i,placeholder:E,values:D.options,defaultValue:x()?x().value:null})}),b==="text"&&e.jsx(ue,{id:R("value"),register:s,errors:i,placeholder:E,defaultValue:x()?x().value:null})]})};return e.jsxs("div",{className:"flex-column s-24",children:[e.jsx(mn,{fieldType:t.type,renderAdvancedField:y}),t.type===F.TEXT&&e.jsx(_n,{renderAdvancedField:y}),Os(t.type)&&e.jsx(fn,{renderAdvancedField:y,fieldType:t.type}),Dl(t.type)&&e.jsx(pn,{renderAdvancedField:y,fieldType:t.type}),ks(t.type)&&e.jsx(qn,{renderAdvancedField:y}),_s(t.type)&&e.jsx(hn,{renderAdvancedField:y}),Is(t.type)&&e.jsx(bn,{renderAdvancedField:y}),qs(t.type)&&e.jsx(vn,{renderAdvancedField:y,fieldType:t.type}),Ms(t.type)&&e.jsx(xn,{renderAdvancedField:y}),Vs(t.type)&&e.jsx(gn,{renderAdvancedField:y}),As(t.type)&&e.jsx(yn,{renderAdvancedField:y}),Ps(t.type)&&e.jsx(Cn,{renderAdvancedField:y,baseFormId:n}),Ls(t.type)&&e.jsx(Fn,{leadingFieldOptions:j,renderAdvancedField:y}),Bs(t.type)&&e.jsx(wn,{renderAdvancedField:y,relationship:(r=p[0])===null||r===void 0?void 0:r.relationship}),$s(t.type)&&e.jsx(Sn,{renderAdvancedField:y,isMulti:t.type===F.POST_OBJECT_MULTI}),Us(t.type)&&e.jsx(Dn,{renderAdvancedField:y,isMulti:t.type===F.TERM_OBJECT_MULTI}),Ks(t.type)&&e.jsx(In,{renderAdvancedField:y}),Gs(t.type)&&e.jsx(Tn,{renderAdvancedField:y}),Hs(t.type)&&e.jsx(Rn,{renderAdvancedField:y}),zs(t.type)&&e.jsx(On,{renderAdvancedField:y}),Ys(t.type)&&e.jsx(kn,{renderAdvancedField:y}),Ws(t.type)&&e.jsx(En,{renderAdvancedField:y,isMulti:t.type===F.USER_MULTI}),Js(t.type)&&e.jsx(Nn,{renderAdvancedField:y}),Xs(t.type)&&e.jsx(jn,{renderAdvancedField:y}),Qs(t.type)&&e.jsx(cn,{renderAdvancedField:y})]})};Mn.propTypes={formId:d.func.isRequired,boxIndex:d.number.isRequired,fieldIndex:d.number.isRequired,field:d.object.isRequired};const Vn=({boxId:t,fieldId:n,elementId:r,elementIndex:l,parentFieldId:s})=>{const i=ae(),{group:o}=ne(b=>b.metaState),u=()=>`${re(o.boxes,t,n)}.visibilityConditions`,{control:h}=W(),{remove:p}=ve({control:h,name:u()}),[c,j]=k.useState(!1),y=[e.jsx(ee,{style:K.SUCCESS,onClick:b=>{b.preventDefault(),i(Zs({boxId:t,fieldId:n,parentFieldId:s,elementId:r})),p(l),j(!c)},children:a("Yes")}),e.jsx(ee,{style:K.DANGER,onClick:b=>{b.preventDefault(),j(!c)},children:a("No")})];return e.jsxs("div",{children:[e.jsx(Ce,{title:a("Confirm deleting conditional rendering element"),visible:c,buttons:y,children:a("Are you sure?")}),e.jsx("a",{href:"#",onClick:b=>{b.preventDefault(),j(!c)},children:e.jsx(U,{icon:!1,tip:a("Delete"),label:e.jsx(B,{icon:"bx-trash",width:18,color:"#F94144"})})})]})};Vn.propTypes={boxId:d.string.isRequired,fieldId:d.string.isRequired,elementId:d.string.isRequired,elementIndex:d.number.isRequired,parentFieldId:d.string};const An=({elementIndex:t,boxIndex:n,fieldIndex:r,boxId:l,fieldId:s,element:i,parentFieldIndex:o,parentFieldId:u,isLast:h})=>{const{POST_TAX:p,POST_ID:c,USER_ID:j,optionPage:y}=document.globals.globals.find,{group:b}=ne($=>$.metaState),v=$=>`${re(b.boxes,l,s)}.visibilityConditions.${t}.${$}`,{register:m,formState:{errors:f},control:E,setValue:D,clearErrors:R}=W(),x=P({control:E,name:"belongs"}),O=P({control:E,name:"boxes"}),g=P({control:E,name:`${re(b.boxes,l,s)}.type`}),S=P({control:E,name:v("type")}),C=P({control:E,name:v("operator")}),T=P({control:E,name:v("value")}),N=P({control:E,name:v("logic")}),w=P({control:E,name:v("frontEnd")}),_=P({control:E,name:v("backEnd")}),[M,V]=k.useState([]);k.useEffect(()=>{x&&x.map($=>{$.belongsTo===pe.TAXONOMY&&je("fetchTermsAction",{taxonomy:$.find,format:"short"}).then(L=>{Se(L)&&Se(M)&&V([...M,...L])})})},[x]);const G=()=>{const $=[F.GALLERY,F.IMAGE,F.AUDIO,F.AUDIO_MULTI,F.VIDEO,F.FILE,F.RATING,F.NUMBER,F.PASSWORD,F.TEXT,F.TEXTAREA,F.CHECKBOX,F.RADIO,F.SELECT,F.SELECT_MULTI,F.DATE,F.DATE_TIME,F.TIME,F.URL,F.PHONE,F.EMAIL,F.COLOR,F.CURRENCY,F.WEIGHT,F.LENGTH,F.TOGGLE,F.POST,F.POST_OBJECT,F.POST_OBJECT_MULTI,F.TERM_OBJECT,F.TERM_OBJECT_MULTI,F.USER,F.USER_MULTI];let L=!1,Y=[],de=[],H=[{value:null,label:a("Select")}];if(O.map(J=>{if(typeof J.fields<"u"&&J.fields.length>0){const te=ei(J);te&&te.length>0&&te.filter(ce=>ce.field&&ce.field.id===s).map(ce=>{ce.fields&&ce.fields.map(be=>{if($.includes(be.type)&&be.id!==s){const se=()=>{let me="";return me+=`[${J.label?J.label:J.name}] `,me+=be.label?be.label:be.name,me};de.push({label:se(),value:we({type:"OTHER_FIELDS",value:be.id})})}})})}}),$.includes(g)&&Y.push({value:we({type:"VALUE",value:"VALUE"}),label:a("Value")}),x&&x.map(J=>{J.belongsTo===pe.CUSTOM_POST_TYPE&&(Y.push({value:we({type:"POST_ID",value:"POST_ID"}),label:a("Post")}),L=!0),J.belongsTo===pe.TAXONOMY&&Y.push({value:we({type:"TERM_ID",value:"TERM_ID"}),label:a("Term")}),J.belongsTo===pe.USER&&Y.push({value:we({type:"USER_ID",value:"USER_ID"}),label:a("User")}),J.belongsTo===pe.OPTION_PAGE&&Y.push({value:we({type:"OPTION_PAGE",value:"OPTION_PAGE"}),label:a("Option page")})}),Y&&Y.length>0&&H.push({label:a("This field"),options:Y}),L&&p&&p.length>0){let J={label:a("Related taxonomies"),options:[]};p.map(te=>{te.value!==null&&J.options.push({value:we({type:"TAXONOMY",value:te.taxonomy}),label:te.label})}),H.push(J)}if(j&&j.length>0){let J={label:a("Users"),options:[{value:we({type:"USER",value:a("Logged user")}),label:a("Logged user")}]};H.push(J)}return de&&de.length>0&&H.push({label:a("Other fields"),options:de}),H},ie=()=>typeof S>"u",he=$=>{if(!S||typeof S>"u")return[{value:null,label:a("Select")}];const L=typeof S=="object"?S:Ml(S),Y=L.type,de=L.value;if(Y==="VALUE")return $===F.SELECT_MULTI?[{value:null,label:a("Select")},{value:"IN",label:a("is included in")},{value:"NOT_IN",label:a("is not included in")},{value:"BLANK",label:a("is empty")},{value:"NOT_BLANK",label:a("is not empty")}]:$===F.NUMBER||$===F.CURRENCY||$===F.WEIGHT||$===F.LENGTH||$===F.DATE||$===F.DATE_TIME||$===F.TIME?[{value:null,label:a("Select")},{value:"=",label:a("is equal to")},{value:"!=",label:a("is not equal to")},{value:"<",label:a("is less than")},{value:">",label:a("is greater than")},{value:"<=",label:a("is less than or equal to")},{value:">=",label:a("is greater than or equal to")},{value:"BLANK",label:a("is empty")},{value:"NOT_BLANK",label:a("is not empty")}]:$===F.TOGGLE?[{value:null,label:a("Select")},{value:"CHECKED",label:a("is checked")},{value:"NOT_CHECKED",label:a("is not checked")}]:[{value:null,label:a("Select")},{value:"=",label:a("is equal to")},{value:"!=",label:a("is not equal to")},{value:"LIKE",label:a("is like to")},{value:"NOT_LIKE",label:a("is not like")},{value:"BLANK",label:a("is empty")},{value:"NOT_BLANK",label:a("is not empty")}];if(Y==="OTHER_FIELDS"){const H=li(O,de);return H&&H.type===F.GALLERY||H&&H.type===F.IMAGE||H&&H.type===F.AUDIO||H&&H.type===F.AUDIO_MULTI||H&&H.type===F.VIDEO||H&&H.type===F.FILE?[{value:null,label:a("Select")},{value:"BLANK",label:a("is empty")},{value:"NOT_BLANK",label:a("is not empty")}]:H&&H.type===F.SELECT_MULTI?[{value:null,label:a("Select")},{value:"IN",label:a("is included in")},{value:"NOT_IN",label:a("is not included in")},{value:"BLANK",label:a("is empty")},{value:"NOT_BLANK",label:a("is not empty")}]:H&&H.type===F.NUMBER||H&&H.type===F.CURRENCY||H&&H.type===F.WEIGHT||H&&H.type===F.LENGTH||H&&H.type===F.DATE||H&&H.type===F.TIME?[{value:null,label:a("Select")},{value:"=",label:a("is equal to")},{value:"!=",label:a("is not equal to")},{value:"<",label:a("is less than")},{value:">",label:a("is greater than")},{value:"<=",label:a("is less than or equal to")},{value:">=",label:a("is greater than or equal to")},{value:"BLANK",label:a("is empty")},{value:"NOT_BLANK",label:a("is not empty")}]:H&&H.type===F.TOGGLE?[{value:null,label:a("Select")},{value:"CHECKED",label:a("is checked")},{value:"NOT_CHECKED",label:a("is not checked")}]:[{value:null,label:a("Select")},{value:"=",label:a("is equal to")},{value:"!=",label:a("is not equal to")},{value:"LIKE",label:a("is like to")},{value:"NOT_LIKE",label:a("is not like")},{value:"BLANK",label:a("is empty")},{value:"NOT_BLANK",label:a("is not empty")}]}return Y==="POST_ID"||Y==="TERM_ID"||Y==="USER_ID"||Y==="OPTION_PAGE"||Y==="TAXONOMY"||Y==="USER"?[{value:null,label:a("Select")},{value:"=",label:a("is equal to")},{value:"!=",label:a("is not equal to")},{value:"IN",label:a("is included in")},{value:"NOT_IN",label:a("is not included in")}]:[{value:null,label:a("Select")},{value:"=",label:a("is equal to")},{value:"!=",label:a("is not equal to")},{value:"IN",label:a("is included in")},{value:"NOT_IN",label:a("is not included in")},{value:"BLANK",label:a("is empty")},{value:"NOT_BLANK",label:a("is not empty")}]},ge=()=>S&&C&&C!=="BLANK"&&C!=="NOT_BLANK"&&C!=="CHECKED"&&C!=="NOT_CHECKED",oe=()=>{let $=typeof S=="object"?S:Ml(S);typeof $=="string"&&($=JSON.parse($));const L=$.type,Y=$.value,de=C==="IN"||C==="NOT_IN",H=C==="CHECKED"||C==="NOT_CHECKED",J={value:null,label:a("Select")};if(L==="POST_ID"){const te=()=>{if(i.operator==="IN"||i.operator==="NOT_IN"){const ce=T||i.value,be=typeof ce=="string"?ce.split(","):ce;let se=[];return be.map(me=>se.push(parseInt(me))),se}return T||i.value};return de?e.jsx(q.Fragment,{children:e.jsx(Te,{id:v("value"),defaultValue:te(),placeholder:a("Select posts"),values:c,errors:f,register:m,setValue:D,clearErrors:R,validate:{required:a("This field is mandatory")}})}):e.jsx(q.Fragment,{children:e.jsx(le,{id:v("value"),defaultValue:te(),placeholder:a("Select posts"),values:Se(c)?c:[],errors:f,register:m,validate:{required:a("This field is mandatory")}})})}if(L==="USER")return Se(j)&&j&&j.length>0?de?e.jsx(q.Fragment,{children:e.jsx(Te,{id:v("value"),defaultValue:T||i.value,placeholder:a("Select users"),errors:f,register:m,values:j,setValue:D,clearErrors:R,validate:{required:a("This field is mandatory")}})}):e.jsx(q.Fragment,{children:e.jsx(le,{id:v("value"),defaultValue:T||i.value,placeholder:a("Select user"),errors:f,register:m,values:j,validate:{required:a("This field is mandatory")}})}):e.jsx(q.Fragment,{children:e.jsx(ue,{id:v("value"),errors:f,register:m,defaultValue:T||i.value,placeholder:a("value"),validate:{required:a("This field is mandatory")}})});if(L==="TAXONOMY"){if(p&&p.length>0){const te=p.filter(ce=>ce.taxonomy===Y);if(te&&te.length===1&&te[0].options)return de?e.jsx(q.Fragment,{children:e.jsx(Te,{id:v("value"),defaultValue:T||i.value,placeholder:a("Select taxonomies"),errors:f,register:m,values:te[0].options,setValue:D,clearErrors:R,validate:{required:a("This field is mandatory")}})}):e.jsx(q.Fragment,{children:e.jsx(le,{id:v("value"),defaultValue:T||i.value,placeholder:a("Select taxonomy"),errors:f,register:m,values:te.length>0&&te[0].options&&Se(te[0].options)?[J,...te[0].options]:[],validate:{required:a("This field is mandatory")}})})}return e.jsx(q.Fragment,{children:e.jsx(ue,{id:v("value"),errors:f,register:m,defaultValue:T||i.value,placeholder:a("value"),validate:{required:a("This field is mandatory")}})})}if(L==="TERM_ID"){const te=()=>{if(i.operator==="IN"||i.operator==="NOT_IN"){const ce=T||i.value,be=typeof ce=="string"?ce.split(","):ce;let se=[];return be.map(me=>se.push(parseInt(me))),se}return T||i.value};return de?e.jsx(q.Fragment,{children:e.jsx(Te,{id:v("value"),defaultValue:te(),placeholder:a("Select taxonomies"),errors:f,register:m,values:M,setValue:D,clearErrors:R,validate:{required:a("This field is mandatory")}})}):e.jsx(q.Fragment,{children:e.jsx(le,{id:v("value"),defaultValue:te(),placeholder:a("Select taxonomy"),errors:f,register:m,values:Se(M)?[J,...M]:[],validate:{required:a("This field is mandatory")}})})}if(L==="OPTION_PAGE"){const te=()=>{if(i.operator==="IN"||i.operator==="NOT_IN"){const ce=T||i.value;return typeof ce=="string"?ce.split(","):ce}return T||i.value};return de?e.jsx(q.Fragment,{children:e.jsx(Te,{id:v("value"),defaultValue:te(),placeholder:a("Select pages"),errors:f,register:m,values:y,setValue:D,clearErrors:R,validate:{required:a("This field is mandatory")}})}):e.jsx(q.Fragment,{children:e.jsx(le,{id:v("value"),defaultValue:te(),placeholder:a("Select page"),errors:f,register:m,values:Se(y)?y:[],validate:{required:a("This field is mandatory")}})})}if(L==="USER_ID"){const te=()=>{if(i.operator==="IN"||i.operator==="NOT_IN"){const ce=T||i.value;return typeof ce=="string"?ce.split(","):ce}return T||i.value};return de?e.jsx(q.Fragment,{children:e.jsx(Te,{id:v("value"),defaultValue:te(),placeholder:a("Select users"),errors:f,register:m,values:j,setValue:D,clearErrors:R,validate:{required:a("This field is mandatory")}})}):e.jsx(q.Fragment,{children:e.jsx(le,{id:v("value"),defaultValue:te(),placeholder:a("Select user"),errors:f,register:m,values:Se(j)?[J,...j]:[],validate:{required:a("This field is mandatory")}})})}return H?e.jsx(q.Fragment,{children:e.jsx(ue,{id:v("value"),disabled:!0,register:m,errors:f,placeholder:`${de?a("Insert values separated by comma. Ex: 12, 54, foo"):a("value")}`,defaultValue:T||i.value})}):e.jsx(q.Fragment,{children:e.jsx(ue,{id:v("value"),register:m,errors:f,placeholder:`${de?a("Insert values separated by comma. Ex: 12, 54, foo"):a("value")}`,defaultValue:T||i.value,validate:{required:a("This field is mandatory")}})})};return e.jsxs("div",{className:"i-flex-center s-8 w-100",children:[e.jsx(fe,{id:v("id"),value:i.id,register:m}),e.jsx("div",{className:"w-60",children:e.jsx(le,{id:v("type"),placeholder:a("Select option"),register:m,values:G(),errors:f,defaultValue:S||we(i.type),validate:{required:a("This field is mandatory")}})}),e.jsx("div",{className:"w-40",children:e.jsx(le,{id:v("operator"),placeholder:a("Select option"),register:m,disabled:ie(),values:he(g),errors:f,defaultValue:S||i.operator,validate:{required:a("This field is mandatory")}})}),e.jsx("div",{className:"w-100",children:ge()?oe():e.jsx(ue,{id:v("value"),placeholder:a("Value"),register:m,errors:f,value:"",defaultValue:T||i.value,disabled:!0})}),e.jsx("div",{className:"w-20",children:!h&&e.jsx(q.Fragment,{children:e.jsx(le,{id:v("logic"),placeholder:a("Select option"),register:m,values:[{label:a("AND"),value:"AND"},{label:a("OR"),value:"OR"}],errors:f,defaultValue:N||i.logic,validate:{required:a("This field is mandatory")}})})}),e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx(U,{label:e.jsx(Ge,{id:v("frontEnd"),control:E,defaultValue:typeof w=="boolean"?w:i.frontEnd,errors:f,icon:"bx:devices",disabled:!ge()}),tip:a("Show in Front-End"),icon:!1}),e.jsx(U,{label:e.jsx(Ge,{id:v("backEnd"),control:E,defaultValue:typeof _=="boolean"?_:i.backEnd,errors:f,icon:"bx:cog",disabled:!ge()}),tip:a("Show in Back-End"),icon:!1})]}),e.jsx(Vn,{boxId:l,fieldId:s,elementId:i.id,parentFieldId:u,elementIndex:t})]})};An.propTypes={elementIndex:d.number.isRequired,boxIndex:d.number.isRequired,fieldIndex:d.number.isRequired,boxId:d.string.isRequired,fieldId:d.string.isRequired,element:d.object.isRequired,isLast:d.bool.isRequired,parentFieldIndex:d.string,parentFieldId:d.string};const Pn=({boxIndex:t,fieldIndex:n,boxId:r,field:l,parentFieldIndex:s,parentFieldId:i})=>{const o=ae(),[u]=Ie(),h=()=>{const p={id:ye(),type:null,operator:"=",value:"",logic:null,frontEnd:!0,backEnd:!0};o(ai({boxId:r,fieldId:l.id,parentFieldId:i,element:p}))};return e.jsxs("div",{ref:u,className:l.visibilityConditions&&l.visibilityConditions.length>0?"flex-column s-24":"",children:[l.visibilityConditions&&l.visibilityConditions.length>0?e.jsx(q.Fragment,{children:l.visibilityConditions.map((p,c)=>e.jsx(An,{elementIndex:c,boxIndex:t,fieldIndex:n,boxId:r,fieldId:l.id,element:p,parentFieldIndex:s,parentFieldId:i,isLast:c===l.visibilityConditions.length-1},p.id))}):e.jsx(jl,{style:K.WARNING,children:a('No conditions are present, click on "Add condition" button to add the first one.')}),e.jsx("span",{children:e.jsx("a",{href:"#",className:l.visibilityConditions&&l.visibilityConditions.length>0?"":"mt-12",onClick:p=>{p.preventDefault(),h()},children:a("Add condition")})})]})};Pn.propTypes={boxIndex:d.number.isRequired,fieldIndex:d.number.isRequired,boxId:d.string.isRequired,parentFieldIndex:d.string,parentFieldId:d.string,field:d.object.isRequired};const Ln=({boxId:t,fieldId:n,ruleId:r,ruleIndex:l,parentFieldId:s})=>{const i=ae(),{group:o}=ne(b=>b.metaState),u=()=>`${re(o.boxes,t,n)}.validationRules`,{control:h}=W(),{remove:p}=ve({control:h,name:u()}),[c,j]=k.useState(!1),y=[e.jsx(ee,{style:K.SUCCESS,onClick:b=>{b.preventDefault(),p(l),i(ti({boxId:t,fieldId:n,parentFieldId:s,ruleId:r})),j(!c)},children:a("Yes")}),e.jsx(ee,{style:K.DANGER,onClick:b=>{b.preventDefault(),j(!c)},children:a("No")})];return e.jsxs("div",{children:[e.jsx(Ce,{title:a("Confirm deleting validation rule"),visible:c,buttons:y,children:a("Are you sure?")}),e.jsx("a",{href:"#",onClick:b=>{b.preventDefault(),j(!c)},children:e.jsx(U,{icon:!1,tip:a("Delete"),label:e.jsx(B,{icon:"bx-trash",width:18,color:"#F94144"})})})]})};Ln.propTypes={boxId:d.string.isRequired,fieldId:d.string.isRequired,ruleId:d.string.isRequired,ruleIndex:d.number.isRequired,parentFieldId:d.string};const Bn=k.memo(({ruleIndex:t,boxIndex:n,fieldIndex:r,boxId:l,fieldId:s,rule:i,formId:o,parentFieldIndex:u,parentFieldId:h})=>{const p=w=>`${o(`validationRules.${t}.${w}`)}`,{register:c,formState:{errors:j},control:y,setValue:b}=W(),v=P({control:y,name:p("condition")}),m=P({control:y,name:p("value")}),f=P({control:y,name:p("message")}),E=()=>v||i.condition,D=()=>f||(i.message?i.message:R(E())),R=w=>{let _;switch(w){case"blank":_="Value is not blank";break;case"not_blank":_="Value is blank";break;case"=":_="Value is not equal to {{v}}";break;case"!=":_="Value is equals to {{v}}";break;case">":_="Value is lower or equals than {{v}}";break;case">=":_="Value is lower than {{v}}";break;case"<":_="Value is greatest or equals than {{v}}";break;case"<=":_="Value is greatest than {{v}}";break;case"max":_="The maximum length is {{v}}";break;case"min":_="The minimum length is {{v}}";break;case"regex":_="Regex value is not matching {{v}}";break}return a(_)},x=w=>w==="blank"||w==="not_blank",O=w=>{S(R(w)),b(p("message"),R(w)),T(x(w)),x(w)&&b(p("value"),null)},[g,S]=k.useState(D()),[C,T]=k.useState(x(v||i.condition)),N=[{value:"blank",label:a("is empty")},{value:"not_blank",label:a("is not empty")},{value:"=",label:a("is equal to")},{value:"!=",label:a("is not equal to")},{value:">",label:a("is greater than")},{value:">=",label:a("is greater than or equal to")},{value:"<",label:a("is less than")},{value:"<=",label:a("is less than or equal to")},{value:"max",label:a("max length is")},{value:"min",label:a("min length is")},{value:"regex",label:a("regular expression")}];return e.jsxs("div",{className:"i-flex-center s-24 w-100",children:[e.jsx(fe,{id:p("id"),value:i.id,register:c}),e.jsx("div",{className:"w-40",children:e.jsx(le,{id:p("condition"),register:c,defaultValue:E(),values:N,errors:j,onChangeCapture:w=>O(w.target.value),validate:{required:a("This field is mandatory")}})}),!C&&e.jsx("div",{className:"w-100",children:e.jsx(ue,{id:p("value"),register:c,errors:j,defaultValue:m||i.value,validate:{required:a("This field is mandatory"),maxLength:{value:255,message:"max length is 255"}}})}),e.jsx("div",{className:"w-100",children:e.jsx(ue,{id:p("message"),register:c,errors:j,defaultValue:g,validate:{required:a("This field is mandatory"),maxLength:{value:255,message:"max length is 255"}}})}),e.jsx(Ln,{boxId:l,fieldId:s,ruleId:i.id,parentFieldId:h,ruleIndex:t})]})});Bn.propTypes={formId:d.func.isRequired,ruleIndex:d.number.isRequired,boxIndex:d.number.isRequired,fieldIndex:d.number.isRequired,boxId:d.string.isRequired,fieldId:d.string.isRequired,rule:d.object.isRequired,parentFieldIndex:d.string,parentFieldId:d.string};const $n=({boxIndex:t,fieldIndex:n,boxId:r,field:l,formId:s,parentFieldIndex:i,parentFieldId:o})=>{const u=ae(),[h]=Ie(),p=()=>{const c={id:ye(),condition:"=",value:""};u(ni({boxId:r,fieldId:l.id,parentFieldId:o,rule:c}))};return e.jsxs("div",{ref:h,className:l.validationRules&&l.validationRules.length>0?"flex-column s-24":"",children:[l.validationRules&&l.validationRules.length>0?e.jsx(q.Fragment,{children:l.validationRules.map((c,j)=>e.jsx(Bn,{formId:s,boxId:r,fieldId:l.id,fieldIndex:n,rule:c,boxIndex:t,parentFieldIndex:i,parentFieldId:o,ruleIndex:j}))}):e.jsx(jl,{style:K.WARNING,children:a('No rules already created. Create the first one now by clicking the button "Add rule"!')}),e.jsx("a",{href:"#",className:l.validationRules&&l.validationRules.length>0?"":"mt-12",onClick:c=>{c.preventDefault(),p()},children:a("Add rule")})]})};$n.propTypes={formId:d.func.isRequired,boxIndex:d.number.isRequired,fieldIndex:d.number.isRequired,boxId:d.string.isRequired,field:d.object.isRequired,parentFieldIndex:d.string,parentFieldId:d.string};const Un=({boxId:t,fieldId:n,permissionId:r,permissionIndex:l,parentFieldId:s})=>{const i=ae(),{group:o}=ne(b=>b.metaState),u=()=>`${re(o.boxes,t,n)}.permissions`,{control:h}=W(),{remove:p}=ve({control:h,name:u()}),[c,j]=k.useState(!1),y=[e.jsx(ee,{style:K.SUCCESS,onClick:b=>{b.preventDefault(),i(si({boxId:t,fieldId:n,parentFieldId:s,permissionId:r})),p(l),j(!c)},children:a("Yes")}),e.jsx(ee,{style:K.DANGER,onClick:b=>{b.preventDefault(),j(!c)},children:a("No")})];return e.jsxs("div",{children:[e.jsx(Ce,{title:a("Confirm deleting permission element"),visible:c,buttons:y,children:a("Are you sure?")}),e.jsx("a",{href:"#",onClick:b=>{b.preventDefault(),j(!c)},children:e.jsx(U,{icon:!1,tip:a("Delete"),label:e.jsx(B,{icon:"bx-trash",width:18,color:"#F94144"})})})]})};Un.propTypes={boxId:d.string.isRequired,fieldId:d.string.isRequired,permissionId:d.string.isRequired,permissionIndex:d.number.isRequired,parentFieldId:d.string};const Kn=k.memo(({permissionIndex:t,boxIndex:n,fieldIndex:r,boxId:l,fieldId:s,permission:i,formId:o,parentFieldIndex:u,parentFieldId:h})=>{const{group:p}=ne(b=>b.metaState),c=b=>`${re(p.boxes,l,s)}.permissions.${t}.${b}`,{register:j,formState:{errors:y}}=W();return e.jsxs(q.Fragment,{children:[e.jsx(fe,{id:c("id"),value:i.id,register:j}),e.jsx(fe,{id:c("entityId"),value:s,register:j}),e.jsxs("tr",{id:i.id,children:[e.jsx("td",{children:e.jsx(le,{register:j,id:c("userRole"),values:document.globals.globals.roles,errors:y,defaultValue:i.userRole})}),e.jsx("td",{children:e.jsxs("label",{className:"checkbox",htmlFor:c("permissions.edit"),children:[e.jsx("input",{name:c("permissions.edit"),value:!0,defaultChecked:i.permissions.edit===!0,type:"checkbox",id:c("permissions.edit"),...j(c("permissions.edit"),{})}),e.jsx("span",{})]})}),e.jsx("td",{children:e.jsxs("label",{className:"checkbox",htmlFor:c("permissions.read"),children:[e.jsx("input",{name:c("permissions.read"),value:!0,defaultChecked:i.permissions.read===!0,type:"checkbox",id:c("permissions.read"),...j(c("permissions.read"),{})}),e.jsx("span",{})]})}),e.jsx("td",{children:e.jsx(Un,{permissionIndex:t,boxId:l,fieldId:s,permissionId:i.id,parentFieldId:h})})]})]})});Kn.propTypes={formId:d.func.isRequired,permissionIndex:d.number.isRequired,boxIndex:d.number.isRequired,fieldIndex:d.number.isRequired,boxId:d.string.isRequired,fieldId:d.string.isRequired,permission:d.object.isRequired,parentFieldIndex:d.string,parentFieldId:d.string};const Gn=({boxIndex:t,fieldIndex:n,boxId:r,field:l,parentFieldIndex:s,formId:i,parentFieldId:o})=>{const u=document.globals;u.settings;const h=u.globals,p=ae(),[c]=Ie(),j=()=>{const y={id:ye(),entityId:l.id,userRole:"editor",permissions:{edit:!0,read:!0}};p(ii({boxId:r,fieldId:l.id,parentFieldId:o,permission:y}))};return e.jsxs("div",{ref:c,className:l.permissions&&l.permissions.length>0?"flex-column s-24":"",children:[l.permissions&&l.permissions.length>0?e.jsx("div",{className:"responsive",children:e.jsxs("table",{className:`acpt-table rounded all-white with-border ${h.is_rtl?"rtl":""}`,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:a("User role")}),e.jsx("th",{children:a("Edit")}),e.jsx("th",{children:a("Read")}),e.jsx("th",{style:{width:"10px"}})]})}),e.jsx("tbody",{ref:c,children:l.permissions.map((y,b)=>e.jsx(Kn,{formId:i,permissionIndex:b,boxIndex:t,fieldIndex:n,boxId:r,fieldId:l.id,permission:y,parentFieldIndex:s,parentFieldId:o}))})]})}):e.jsx(jl,{style:K.WARNING,children:a('No permissions are present, click on "Add permission" button to add the first one.')}),e.jsx("span",{children:e.jsx("a",{href:"#",className:l.permissions&&l.permissions.length>0?"":"mt-12",onClick:y=>{y.preventDefault(),j()},children:a("Add permission")})})]})};Gn.propTypes={boxIndex:d.number.isRequired,fieldIndex:d.number.isRequired,boxId:d.string.isRequired,parentFieldIndex:d.string,parentFieldId:d.string,field:d.object.isRequired,formId:d.func.isRequired};const Or=({boxIndex:t,fieldIndex:n,boxId:r,field:l,parentFieldIndex:s,parentFieldId:i,parentBlockId:o})=>{const{attributes:u,listeners:h,setNodeRef:p,isDragging:c,transform:j}=Ye({id:l.id}),y={transform:We.Translate.toString(j)};ae();const{group:b,selectedElementsType:v}=ne(C=>C.metaState),{formState:{errors:m},control:f}=W(),E=C=>Xe(b.boxes,r,l.id,C),D=P({control:f,name:Xe(b.boxes,r,l.id,"name")}),R=P({control:f,name:Xe(b.boxes,r,l.id,"label")}),x=P({control:f,name:Xe(b.boxes,r,l.id,"type")}),O=()=>{const C=Xe(b.boxes,r,l.id,"name"),T=ul(m,C);return T?e.jsx("span",{className:"invalid-feedback",children:a(T.message)}):D||l.name},g=()=>typeof R=="string"?R:l.label,S=()=>x||l.type;return e.jsxs(q.Fragment,{children:[e.jsx(Va,{boxId:r,field:l,parentFieldId:i,parentBlockId:o}),e.jsx("tr",{id:l.id,ref:p,style:y,className:`bg-white ${c?"b-rounded z-100 with-drop-shadow":""}`,children:e.jsx("td",{style:{background:yt()},className:"with-active-border",colSpan:7,children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex-between s-8 mb-24 for-xs",children:[e.jsxs("span",{className:"i-flex-center s-8",children:[(i||o)&&e.jsx(U,{label:e.jsx(B,{icon:"tabler:arrow-guide",color:"#02C39A",width:18}),tip:a("Child field"),icon:!1}),e.jsx("span",{className:"cursor-move top-2 handle",...u,...h,children:e.jsx(B,{icon:"bx:dots-vertical-rounded",color:Ve(),width:18})}),v!=="box"&&v!=="block"&&Ea(l.isSaved)&&e.jsx(pl,{elementType:"field",element:Oa(l,r,i,o)}),e.jsxs("div",{className:"i-flex-center s-8 text-ellipsis",children:[e.jsx("h3",{children:O()}),e.jsx("span",{className:"color-gray",children:g()})]}),e.jsx(Ma,{boxId:r,field:l}),e.jsx(Ul,{fieldType:S(),css:"with-border b-rounded p-8"})]}),e.jsx(qa,{boxIndex:t,field:l,boxId:r,fieldIndex:n,parentFieldIndex:s,parentFieldId:i,parentBlockId:o})]}),e.jsx("div",{children:e.jsxs(wi,{children:[e.jsx(fl,{title:e.jsxs(q.Fragment,{children:[e.jsx("span",{className:"visible-xs",children:e.jsx(B,{icon:"bx:cog",width:24})}),e.jsx("span",{className:"hidden-xs",children:a("BASIC OPTIONS")})]}),children:e.jsx(dn,{boxIndex:t,fieldIndex:n,formId:E,boxId:r,field:l})}),e.jsx(fl,{title:e.jsxs(q.Fragment,{children:[e.jsx("span",{className:"visible-xs",children:e.jsx(B,{icon:"solar:tuning-2-outline",width:24})}),e.jsx("span",{className:"hidden-xs",children:a("ADVANCED OPTIONS")})]}),children:e.jsx(Mn,{boxIndex:t,fieldIndex:n,field:l,formId:E})}),e.jsx(fl,{title:e.jsxs(q.Fragment,{children:[e.jsx("span",{className:"visible-xs",children:e.jsx(B,{icon:"bx:low-vision",width:24})}),e.jsx("span",{className:"hidden-xs",children:a("CONDITIONAL LOGIC")})]}),children:e.jsx(Pn,{boxIndex:t,fieldIndex:n,boxId:r,field:l,parentFieldIndex:s,parentFieldId:i,formId:E})}),Dl(x||l.type)&&e.jsx(fl,{title:e.jsxs(q.Fragment,{children:[e.jsx("span",{className:"visible-xs",children:e.jsx(B,{icon:"bx:check-double",width:24})}),e.jsx("span",{className:"hidden-xs",children:a("VALIDATION RULES")})]}),children:e.jsx($n,{boxIndex:t,fieldIndex:n,boxId:r,field:l,parentFieldIndex:s,parentFieldId:i,formId:E})}),e.jsx(fl,{title:e.jsxs(q.Fragment,{children:[e.jsx("span",{className:"visible-xs",children:e.jsx(B,{icon:"bx:lock",width:24})}),e.jsx("span",{className:"hidden-xs",children:a("PERMISSIONS")})]}),children:e.jsx(Gn,{boxIndex:t,fieldIndex:n,boxId:r,field:l,parentFieldIndex:s,parentFieldId:i,formId:E})})]})})]})})})]})},Xl=({boxIndex:t,fieldIndex:n,boxId:r,field:l,parentFieldIndex:s,parentFieldId:i,parentBlockId:o,isMainView:u,bulkEdit:h=!1})=>{const{closedElements:p}=ne(j=>j.metaState),c=()=>{const j=p.filter(y=>y===l.id);return typeof j>"u"?!1:j.length>0};return h?e.jsx(da,{bulkEdit:h,isMainView:u,boxIndex:t,field:l,boxId:r,fieldIndex:n,parentFieldIndex:s,parentFieldId:i,parentBlockId:o}):c()?e.jsx(da,{bulkEdit:h,isMainView:u,boxIndex:t,field:l,boxId:r,fieldIndex:n,parentFieldIndex:s,parentFieldId:i,parentBlockId:o}):e.jsx(Or,{boxIndex:t,field:l,boxId:r,fieldIndex:n,parentFieldIndex:s,parentFieldId:i,parentBlockId:o})};Xl.propTypes={boxIndex:d.number.isRequired,fieldIndex:d.number.isRequired,boxId:d.string.isRequired,field:d.object.isRequired,parentFieldIndex:d.string,parentFieldId:d.string,parentBlockId:d.string,isMainView:d.bool.isRequired,bulkEdit:d.bool};const gl=({boxIndex:t,boxId:n,parentFieldIndex:r,parentFieldId:l,parentBlockId:s,fields:i,bulkEdit:o=!1,addFieldEnabled:u=!0})=>{const h=document.globals;h.settings;const p=h.globals,c=ae(),{group:j,selectedElements:y,selectedElementsType:b}=ne(C=>C.metaState),[v,m]=k.useState(!1),[f]=Ie(),E=()=>s?`${re(j.boxes,n,s)}.fields`:l?`${re(j.boxes,n,l)}.children`:`boxes.${t}.fields`,D=`select-fields-${ms()}`,{control:R}=W(),{move:x}=ve({control:R,name:E()}),O=C=>{const{active:T,over:N}=C;if(T.id===N.id)return;const w=i.findIndex(V=>V.id===T.id),_=i.findIndex(V=>V.id===N.id),M=Ae(i,w,_);x(w,_),c(dl({boxId:n,parentFieldId:l,parentBlockId:s,sortedFields:M}))},g=()=>{const C={id:ye(),boxId:n,name:"meta_box_field",label:"meta box field",type:F.TEXT,defaultValue:"",description:"",isRequired:!1,showInArchive:!1,quickEdit:!1,filterableInAdmin:!1,sort:1,advancedOptions:[],options:[],blocks:[],blockId:s||null,validationRules:[],visibilityConditions:[],hasManyRelation:[],children:[],parentId:l||null,isATextualField:!0,isFilterable:!0,isSaved:!1};c(ol({boxId:n,parentFieldId:l,parentBlockId:s,field:C}))};k.useEffect(()=>{var C;let T;l?T=y.filter(N=>N.boxId===n&&l===N.parentFieldId):T=y.filter(N=>N.boxId===n&&!N.parentFieldId),m(i.length===((C=T)===null||C===void 0?void 0:C.length))},[y]);const S=C=>{i&&i.map(T=>{const N=Oa(T,n,l,s);c(rl({element:N,selected:C,type:"field"})),N.children&&N.children.map(w=>{c(rl({element:w,selected:C,type:"field"})),w.children&&w.children.map(_=>{c(rl({element:_,selected:C,type:"field"}))})})})};return e.jsx(q.Fragment,{children:i&&(i==null?void 0:i.length)>0?e.jsxs("div",{className:`responsive ${l?"with-shadow b-rounded":""}`,children:[e.jsxs("table",{className:`acpt-table  ${p.is_rtl?"rtl":""}`,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"10px"},children:b!=="box"&&b!=="block"&&e.jsxs("label",{className:"checkbox",htmlFor:D,style:{marginLeft:"26px"},children:[e.jsx("input",{id:D,type:"checkbox",checked:v,onChange:C=>{S(C.target.checked)}}),e.jsx("span",{})]})}),e.jsx("th",{className:"hidden-xs",style:{width:"20%"},children:a("Label")}),e.jsx("th",{style:{width:"20%"},children:a("Slug")}),e.jsx("th",{className:"hidden-xs",style:{width:"10px"}}),e.jsx("th",{style:{width:"20%"},children:a("Type")}),e.jsx("th",{children:a("Actions")})]})}),e.jsx("tbody",{ref:f,children:e.jsx(_e,{onDragEnd:O,items:i,children:i&&i.map((C,T)=>e.jsx(Xl,{bulkEdit:o,isMainView:!1,boxIndex:t,fieldIndex:T,boxId:n,field:C,parentFieldIndex:r,parentFieldId:l,parentBlockId:s}))})})]}),u&&e.jsx("div",{className:"bg-white p-24",children:e.jsx(ee,{type:"button",style:K.SECONDARY,onClick:C=>{C.preventDefault(),g()},children:a("Add field")})})]}):e.jsx("div",{className:`${l?"":"mx-24 pb-24"}`,children:e.jsxs("div",{className:"b-maxi bg-white b-rounded p-24 flex-column s-12 text-center",children:[e.jsx("span",{children:a('No field box already created. Create the first one now by clicking the button "Add field box"!')}),u&&e.jsx("div",{children:e.jsx(ee,{type:"button",style:K.SECONDARY,onClick:C=>{C.preventDefault(),g()},children:a("Add field")})})]})})})};gl.propTypes={boxIndex:d.number.isRequired,boxId:d.string.isRequired,fields:d.array.isRequired,parentFieldIndex:d.string,parentFieldId:d.string,parentBlockId:d.string,bulkEdit:d.bool,addFieldEnabled:d.bool};const Hn=({index:t,box:n,bulkEdit:r=!1,setActiveTab:l})=>{const{attributes:s,listeners:i,setNodeRef:o,isDragging:u,transform:h}=Ye({id:n.id}),p={transform:We.Translate.toString(h)},{closedElements:c}=ne(b=>b.metaState),[j]=Ie(),y=()=>c.filter(v=>v===n.id).length===1;return e.jsxs("div",{id:n.id,className:`bg-white b-rounded ${u?"z-100 with-drop-shadow":"with-shadow"}`,ref:o,style:p,children:[e.jsx(Ot,{bulkEdit:r,index:t,setActiveTab:l,attributes:s,listeners:i,box:n}),e.jsx("div",{ref:j,children:!y()&&e.jsx(gl,{bulkEdit:r,boxIndex:t,boxId:n.id,fields:n.fields})})]})};Hn.propTypes={bulkEdit:d.bool,index:d.number.isRequired,box:d.object.isRequired,setActiveTab:d.func};const zn=({id:t,control:n,register:r,errors:l,belong:s,handleDeleteBelong:i,values:o,isLast:u,index:h,resetField:p,setValue:c,clearErrors:j,format:y="all"})=>{const{data:b}=ne(T=>T.fetchMeta),v=T=>`${t}.${h}.${T}`,m=P({control:n,name:v("belongsTo")}),f=P({control:n,name:v("operator")}),E=P({control:n,name:v("find")});k.useEffect(()=>{u&&p(v("logic"))},[u]),k.useEffect(()=>{m!==s.belongsTo&&p(v("find"))},[m]),k.useEffect(()=>{f||c(v("operator"),"=")},[f]);const D=()=>m?o[m]?o[m]:[]:b.belongs&&b.belongs[h]?o[b.belongs[h].belongsTo]?o[b.belongs[h].belongsTo]:[]:[],R=()=>E?typeof E=="string"?E.split(","):E:[],x=()=>y==="reduced"?[{value:null,label:a("Select")},{label:a("Posts"),options:[{value:pe.CUSTOM_POST_TYPE,label:a("Post type")},{value:"POST_ID",label:a("Post")}]},{label:a("Taxonomies"),options:[{value:pe.TAXONOMY,label:a("Taxonomy")},{value:"TERM_ID",label:a("Term")}]}]:[{value:null,label:a("Select")},{label:a("Posts"),options:[{value:pe.CUSTOM_POST_TYPE,label:a("Post type")},{value:"POST_ID",label:a("Post")},{value:"PARENT_POST_ID",label:a("Post parent")},{value:"POST_CAT",label:a("Post category")},{value:"POST_TAX",label:a("Post taxonomy")},{value:"POST_TEMPLATE",label:a("Post template")}]},{label:a("Taxonomies"),options:[{value:pe.TAXONOMY,label:a("Taxonomy")},{value:"TERM_ID",label:a("Term")}]},{label:a("Attachment"),options:[{value:pe.MEDIA,label:a("Attachment")}]},{label:a("Option pages"),options:[{value:pe.OPTION_PAGE,label:a("Option page")}]},{label:a("Comments"),options:[{value:pe.COMMENT,label:a("All comments")}]},{label:a("Users"),options:[{value:pe.USER,label:a("All users")},{value:"USER_ID",label:a("User")}]}],O=[{value:null,label:a("Select")},{value:"=",label:a("is equal to")},{value:"!=",label:a("is not equal to")},{value:"IN",label:a("is included in")},{value:"NOT_IN",label:a("is not included in")}],g=[{value:null,label:a("Select")},{label:a("AND"),value:"AND"},{label:a("OR"),value:"OR"}],S=()=>m===pe.USER||m===pe.COMMENT?!0:!m,C=()=>m===pe.USER||m===pe.COMMENT?{required:!1}:{required:a("This field is mandatory")};return e.jsxs("tr",{id:s.id,children:[e.jsx(fe,{register:r,id:v("id"),value:s.id}),e.jsx("td",{children:e.jsx(le,{register:r,id:v("belongsTo"),values:x(),errors:l,onChangeCapture:()=>{p(v("find")),c(v("find"),[])},validate:{required:a("This field is mandatory")}})}),e.jsx("td",{children:e.jsx(le,{register:r,id:v("operator"),values:O,defaultValue:"=",errors:l,disabled:S(),validate:C()})}),e.jsx("td",{children:f==="IN"||f==="NOT_IN"?e.jsx(Te,{register:r,id:v("find"),values:D(),errors:l,disabled:S(),validate:C(),setValue:c,clearErrors:j,defaultValue:R()}):e.jsx(le,{register:r,id:v("find"),values:D(),errors:l,disabled:S(),validate:C()})}),e.jsx("td",{children:!u&&e.jsx(le,{register:r,id:v("logic"),values:g,errors:l,validate:{required:a("This field is mandatory")}})}),e.jsx("td",{children:e.jsx("a",{href:"#",onClick:T=>{T.preventDefault(),i(h,s.id)},children:e.jsx(U,{icon:!1,tip:a("Delete"),label:e.jsx(B,{icon:"bx-trash",width:18,color:"#F94144"})})})})]})};zn.propTypes={id:d.string.isRequired,index:d.number.isRequired,belong:d.object.isRequired,register:d.func.isRequired,errors:d.object.isRequired,isLast:d.bool.isRequired,handleDeleteBelong:d.func.isRequired,resetField:d.func.isRequired,setValue:d.func.isRequired,clearErrors:d.func.isRequired,format:d.oneOf(["all","reduced"])};const Yn=({id:t,control:n,register:r,handleAddBelong:l,handleDeleteBelong:s,conditions:i,values:o,errors:u,resetField:h,setValue:p,clearErrors:c,format:j="all"})=>{const y=document.globals;y.settings;const b=y.globals,[v]=Ie();return e.jsx(q.Fragment,{children:e.jsxs("div",{className:`${!Ne(o)&&i&&i.length>0?"flex-column s-12":""}`,children:[e.jsx("label",{className:"form-label px-24",children:a("Location")}),!Ne(o)&&i&&i.length>0?e.jsxs("div",{className:"responsive",children:[e.jsxs("table",{className:`acpt-table ${b.is_rtl?"rtl":""}`,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:a("Location")}),e.jsx("th",{style:{maxWidth:"100px"},children:a("Condition")}),e.jsx("th",{children:a("Value")}),e.jsx("th",{style:{maxWidth:"100px"},children:a("Logic")}),e.jsx("th",{})]})}),e.jsx("tbody",{ref:v,children:i.map((m,f)=>e.jsx(zn,{id:t,format:j,register:r,errors:u,control:n,belong:m,index:f,handleDeleteBelong:s,values:o,isLast:f===i.length-1,resetField:h,setValue:p,clearErrors:c}))})]}),e.jsx("div",{className:"b-top-1 p-24",children:e.jsx(ee,{type:"button",style:K.SECONDARY,onClick:()=>{l()},children:a("Add condition")})})]}):e.jsxs("div",{className:"m-24 b-maxi b-rounded p-24 flex-column s-8 text-center",children:[e.jsx("span",{children:a('No conditions are present, click on "Add condition" button to add the first one.')}),e.jsx("div",{children:e.jsx(ee,{type:"button",style:K.SECONDARY,onClick:()=>{l()},children:a("Add condition")})})]})]})})};Yn.propTypes={id:d.string.isRequired,values:d.array.isRequired,append:d.func.isRequired,register:d.func.isRequired,unregister:d.func.isRequired,resetField:d.func.isRequired,conditions:d.array.isRequired,errors:d.array.isRequired,handleDeleteBelong:d.func.isRequired,handleAddBelong:d.func.isRequired,setValue:d.func.isRequired,clearErrors:d.func.isRequired,format:d.oneOf(["all","reduced"])};const Wn=({groupId:t})=>{const r=document.globals.globals,l=ae(),{group:s}=ne(w=>w.metaState),i=r.find,[o]=Ie(),{control:u,register:h,unregister:p,formState:{errors:c},setValue:j,resetField:y,clearErrors:b}=W(),{append:v,remove:m}=ve({control:u,name:"belongs"}),f=()=>{const w={id:ye(),belongsTo:null,operator:null,find:null,logic:null};l(ri({belong:w}))},E=(w,_)=>{l(oi({belongId:_})),m(w)},{id:D}=el(),[R,x]=k.useState(typeof D!="string"),[O,g]=k.useState(!0),[S,C]=k.useState(!0),T=w=>{O&&s.boxes.map((_,M)=>{j(`boxes.${M}.settings[0].context`,w)})},N=w=>{S&&s.boxes.map((_,M)=>{j(`boxes.${M}.settings[0].priority`,w)})};return e.jsxs("div",{ref:o,children:[e.jsxs("div",{className:"i-flex-center s-8 mb-24",children:[e.jsx(B,{icon:"bx:cog",width:24,color:Ta()}),e.jsx("h3",{children:a("Settings")}),e.jsx("a",{href:"#",onClick:w=>{w.preventDefault(),x(!R)},children:a(`${R?"Close":"Edit"}`)})]}),!R&&e.jsx("div",{className:"line-separator"}),R&&e.jsxs("div",{className:"bg-white b-rounded with-shadow flex-column b-top-1 pt-24",style:{marginTop:"0"},children:[e.jsxs("div",{className:"container p-24",children:[e.jsxs("div",{className:"col-4",children:[e.jsx(Z,{id:"display",label:a("Display as")}),e.jsx(le,{id:"display",register:h,errors:c,values:fs,defaultValue:!Ne(s)&&s.display?s.display:bs.STANDARD})]}),e.jsxs("div",{className:"col-4",children:[e.jsx(Z,{id:"context",label:e.jsxs("span",{className:"flex-between s-4",children:[e.jsx("span",{children:a("Context")}),e.jsx("a",{href:"#",className:"font-regular text-normal",onClick:w=>{w.preventDefault(),g(!O)},children:a(O?"Apply to meta boxes":"Don't apply to meta boxes")})]})}),e.jsx(le,{id:"context",register:h,errors:c,values:ot,defaultValue:!Ne(s)&&s.context?s.context:"advanced",onChangeCapture:w=>{T(w.target.value)}})]}),e.jsxs("div",{className:"col-4",children:[e.jsx(Z,{id:"priority",label:e.jsxs("span",{className:"flex-between s-4",children:[e.jsx("span",{children:a("Priority")}),e.jsx("a",{href:"#",className:"font-regular text-normal",onClick:w=>{w.preventDefault(),C(!S)},children:a(S?"Apply to meta boxes":"Don't apply to meta boxes")})]})}),e.jsx(le,{id:"priority",register:h,errors:c,values:dt,defaultValue:!Ne(s)&&s.priority?s.priority:"default",onChangeCapture:w=>{N(w.target.value)}})]})]}),e.jsx(Yn,{id:"belongs",values:i,conditions:s.belongs?s.belongs:[],append:v,register:h,unregister:p,remove:m,errors:c,control:u,handleAddBelong:f,handleDeleteBelong:E,resetField:y,setValue:j,clearErrors:b})]})]})};Wn.propTypes={groupId:d.string.isRequired};const Jn=({boxIds:t,modalOpen:n,setModalOpen:r})=>{const s=document.globals.globals,{setValue:i}=W(),o=ae(),{id:u}=el(),[h,p]=k.useState(null),[c,j]=k.useState(!1),y=()=>{let b=[];t.map(v=>{b.push(v.id)}),je("copyMetaBoxesAction",{boxIds:b,targetGroupId:h,delete:c}).then(v=>{v.success?(Re.success(`${a("Meta box was successfully copied")}.${a("The browser will refresh after 5 seconds.")}`),r(!n),o($l()),u===h&&o(sl({id:u})).then(m=>{o(He(m.payload)),i("id",u),i("name",m.payload.name),i("label",m.payload.label),i("display",m.payload.display),m.payload.belongs&&m.payload.belongs.map((f,E)=>{i(`belongs.${E}.id`,f.id),i(`belongs.${E}.belongsTo`,f.belongsTo),i(`belongs.${E}.operator`,f.operator),i(`belongs.${E}.find`,f.find),i(`belongs.${E}.logic`,f.logic)}),m.payload.boxes&&m.payload.boxes.map((f,E)=>{i(`boxes.${E}`,f)})}).catch(m=>{console.error(m)})):Re.error(v.error)}).catch(v=>console.error(v))};return e.jsx(q.Fragment,{children:e.jsx(Ce,{title:a("Copy selected meta boxes"),visible:n,buttons:[],children:e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label i-flex-center s-4",htmlFor:"group",children:a("Meta group")}),e.jsx("div",{className:"acpt-select",children:e.jsx("select",{id:"group",className:"form-control default",onChangeCapture:b=>p(b.target.value),children:s.find.meta.map(b=>e.jsx("option",{value:b.value,children:b.label}))})})]}),h&&h!=="Select"&&e.jsxs("div",{children:[e.jsxs("div",{className:"w-100 i-flex-center s-4 mb-8",children:[e.jsx("input",{type:"checkbox",defaultValue:c,onClick:()=>j(!c),id:"deleteBoxes"}),e.jsx("label",{htmlFor:"deleteBoxes",children:a("Delete after copying")})]}),e.jsx(ee,{onClick:()=>y(),style:K.PRIMARY,children:a("Copy")})]})]})})})};Jn.propTypes={boxIds:d.array.isRequired,modalOpen:d.bool.isRequired,setModalOpen:d.func.isRequired};const Xn=({fieldIds:t,modalOpen:n,setModalOpen:r})=>{const s=document.globals.globals,{setValue:i}=W(),o=ae(),{id:u}=el(),[h,p]=k.useState(null),[c,j]=k.useState([]),[y,b]=k.useState([]),[v,m]=k.useState(null),[f,E]=k.useState(null),[D,R]=k.useState(!1);k.useEffect(()=>{p(null),j([]),b([]),m(null),E(null),R(!1)},[n]);const x=C=>{p(C),j([]),b([]),m(null),E(null),R(!1),je("fetchMetaAction",{id:C}).then(T=>{j(T.boxes)}).catch(T=>console.error(T))},O=C=>{b([]),m("box"),E(C);const T=c.filter(N=>N.id===C)[0].fields;if(T&&T.length>0){const N=T.filter(w=>w.type===F.REPEATER||w.type===F.FLEXIBLE);N&&N.length>0&&b(N)}},g=C=>{m("field"),E(C)},S=()=>{let C=[];t.map(T=>{C.push(T.id)}),je("copyMetaFieldsAction",{fieldIds:C,targetEntityType:v,targetEntityId:f,delete:D}).then(T=>{T.success?(Re.success(`${a("Meta field was successfully copied")}.`),r(!n),o($l()),u===h&&o(sl({id:u})).then(N=>{o(He(N.payload)),i("id",u),i("name",N.payload.name),i("label",N.payload.label),i("display",N.payload.display),N.payload.belongs&&N.payload.belongs.map((w,_)=>{i(`belongs.${_}.id`,w.id),i(`belongs.${_}.belongsTo`,w.belongsTo),i(`belongs.${_}.operator`,w.operator),i(`belongs.${_}.find`,w.find),i(`belongs.${_}.logic`,w.logic)}),N.payload.boxes&&N.payload.boxes.map((w,_)=>{i(`boxes.${_}`,w)})}).catch(N=>{console.error(N)})):Re.error(T.error)}).catch(T=>console.error(T))};return e.jsx(q.Fragment,{children:e.jsx(Ce,{title:a("Copy selected meta fields"),visible:n,buttons:[],children:e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label i-flex-center s-4",htmlFor:"group",children:a("Meta group")}),e.jsx("div",{className:"acpt-select",children:e.jsx("select",{id:"group",className:"form-control default",onChangeCapture:C=>x(C.target.value),children:s.find.meta.map(C=>e.jsx("option",{value:C.value,children:C.label}))})})]}),c&&c.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"form-label i-flex-center s-4",htmlFor:"box",children:a("Meta box")}),e.jsx("div",{className:"acpt-select",children:e.jsxs("select",{id:"box",className:"form-control default",onChangeCapture:C=>O(C.target.value),children:[e.jsx("option",{value:null,children:a("Select")}),c.map(C=>e.jsx("option",{value:C.id,children:C.name}))]})})]}),y&&y.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"form-label i-flex-center s-4",htmlFor:"field",children:a("Meta field")}),e.jsx("div",{className:"acpt-select",children:e.jsxs("select",{id:"field",className:"form-control default",onChangeCapture:C=>g(C.target.value),children:[e.jsx("option",{value:null,children:a("Select")}),y.map(C=>e.jsx("option",{value:C.id,children:C.name}))]})})]}),v&&f&&e.jsxs("div",{children:[e.jsxs("div",{className:"w-100 i-flex-center s-4 mb-8",children:[e.jsx("input",{type:"checkbox",defaultValue:D,onClick:()=>R(!D),id:"deleteFields"}),e.jsx("label",{htmlFor:"deleteFields",children:a("Delete the meta field after copying")})]}),e.jsx(ee,{onClick:()=>S(),style:K.PRIMARY,children:a("Copy")})]})]})})})};Xn.propTypes={fieldIds:d.array.isRequired,modalOpen:d.bool.isRequired,setModalOpen:d.func.isRequired};const Qn=({blockIds:t,modalOpen:n,setModalOpen:r})=>{const s=document.globals.globals,{setValue:i}=W(),o=ae(),{id:u}=el(),[h,p]=k.useState(null),[c,j]=k.useState([]),[y,b]=k.useState([]),[v,m]=k.useState(null),[f,E]=k.useState(!1);k.useEffect(()=>{p(null),j([]),b([]),m(null),E(!1)},[n]);const D=g=>{p(g),j([]),b([]),m(null),E(!1),je("fetchMetaAction",{id:g}).then(S=>{j(S.boxes)}).catch(S=>console.error(S))},R=g=>{b([]);const S=c.filter(C=>C.id===g)[0].fields;b(S)},x=g=>{m(g)},O=()=>{let g=[];t.map(S=>{g.push(S.id)}),je("copyMetaBlocksAction",{blockIds:g,targetFieldId:v,delete:f}).then(S=>{S.success?(Re.success(`${a("Meta block was successfully copied")}.${a("The browser will refresh after 5 seconds.")}`),r(!n),u===h&&o(sl({id:u})).then(C=>{o(He(C.payload)),i("id",u),i("name",C.payload.name),i("label",C.payload.label),i("display",C.payload.display),C.payload.belongs&&C.payload.belongs.map((T,N)=>{i(`belongs.${N}.id`,T.id),i(`belongs.${N}.belongsTo`,T.belongsTo),i(`belongs.${N}.operator`,T.operator),i(`belongs.${N}.find`,T.find),i(`belongs.${N}.logic`,T.logic)}),C.payload.boxes&&C.payload.boxes.map((T,N)=>{i(`boxes.${N}`,T)})}).catch(C=>{console.error(C)})):Re.error(S.error)}).catch(S=>console.error(S))};return e.jsx(Ce,{title:a("Copy selected meta blocks"),visible:n,buttons:[],children:e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label i-flex-center s-4",htmlFor:"group",children:a("Meta group")}),e.jsx("div",{className:"acpt-select",children:e.jsx("select",{id:"group",className:"form-control default",onChangeCapture:g=>D(g.target.value),children:s.find.meta.map(g=>e.jsx("option",{value:g.value,children:g.label}))})})]}),c&&c.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"form-label i-flex-center s-4",htmlFor:"box",children:a("Meta box")}),e.jsx("div",{className:"acpt-select",children:e.jsxs("select",{id:"box",className:"form-control default",onChangeCapture:g=>R(g.target.value),children:[e.jsx("option",{value:null,children:a("Select")}),c.map(g=>e.jsx("option",{value:g.id,children:g.name}))]})})]}),y&&y.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"form-label i-flex-center s-4",htmlFor:"field",children:a("Meta field")}),e.jsx("div",{className:"acpt-select",children:e.jsxs("select",{id:"field",className:"form-control default",onChangeCapture:g=>x(g.target.value),children:[e.jsx("option",{value:null,children:a("Select")}),y.map(g=>e.jsx("option",{value:g.id,children:g.name}))]})})]}),v&&e.jsxs("div",{children:[e.jsxs("div",{className:"w-100 i-flex-center s-4 mb-8",children:[e.jsx("input",{type:"checkbox",defaultValue:f,onClick:()=>E(!f),id:"deleteBlocks"}),e.jsx("label",{htmlFor:"deleteBlocks",children:a("Delete the meta block after copying")})]}),e.jsx(ee,{onClick:()=>O(),style:K.PRIMARY,children:a("Copy")})]})]})})};Qn.propTypes={blockIds:d.array.isRequired,modalOpen:d.bool.isRequired,setModalOpen:d.func.isRequired};const Zn=({setFieldTab:t,setBoxTab:n,setBlockTab:r})=>{const l=ae(),{selectedElements:s,selectedElementsType:i}=ne(x=>x.metaState),{control:o,setValue:u,getValues:h}=W(),p=P({control:o,name:"boxes"}),c=k.useRef(null),[j,y]=k.useState(null),[b,v]=k.useState(!1),[m,f]=k.useState(!1),[E,D]=k.useState(!1),R=()=>{s.map(x=>{switch(j){case"copy":i==="box"?v(!b):i==="block"?D(!E):f(!m);break;case"duplicate":if(i==="box"){const O=p.findIndex(C=>C.id===x.id),g=p[O],S=ft(g);p.push(S),u("boxes",p),l(Ll(S))}else if(i==="block"){const O=Ja(p,x.boxId,x.id),g=gt(x.boxId,x.parentFieldId,O),S=re(p,x.boxId,x.id,!1),C=h(S);C.push(g),u(S,C),l(Bl({boxId:x.boxId,parentFieldId:x.parentFieldId,block:g}))}else{const O=Ja(p,x.boxId,x.id),g=vt(x.boxId,O),S=re(p,x.boxId,x.id,!1),C=h(S);C.push(g),u(S,C),l(ol({boxId:x.boxId,field:g,parentFieldId:x.parentFieldId,parentBlockId:x.parentBlockId}))}break;case"delete":if(i==="box"){const O=p?p.filter(g=>g.id!==x.id):[];u("boxes",O),l(mt(x.id))}else if(i==="block"){const O=re(p,x.boxId,x.id,!1),g=h(O),S=g?g.filter(C=>C.id!==x.id):[];typeof g<"u"&&(u(O,S),l(xt({boxId:x.boxId,parentFieldId:x.parentFieldId,blockId:x.id})))}else{const O=re(p,x.boxId,x.id,!1),g=h(O),S=g?g.filter(C=>C.id!==x.id):[];typeof g<"u"&&(u(O,S),l(bt({boxId:x.boxId,fieldId:x.id,parentFieldId:x.parentFieldId,parentBlockId:x.parentBlockId})))}break}}),(j==="delete"||j==="duplicate")&&l($l()),c.current.value=""};return e.jsxs(q.Fragment,{children:[e.jsx(Jn,{boxIds:s,modalOpen:b,setModalOpen:v}),e.jsx(Xn,{fieldIds:s,modalOpen:m,setModalOpen:f}),e.jsx(Qn,{blockIds:s,modalOpen:E,setModalOpen:D}),s&&s.length>0&&e.jsxs("div",{className:"flex-between mb-24",children:[e.jsxs("div",{children:[s.length," ",a("Selected items")]}),e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsxs("select",{ref:c,className:"form-control sm",onChange:x=>{y(x.target.value!==""?x.target.value:null)},children:[e.jsx("option",{value:"",children:a("Select")}),e.jsx("option",{value:"copy",children:a("Copy")}),e.jsx("option",{value:"duplicate",children:a("Duplicate")}),e.jsx("option",{value:"delete",children:a("Delete")})]}),e.jsx(ee,{style:K.WHITE,size:"sm",disabled:j===null,onClick:x=>{x.preventDefault(),R()},children:a("Execute")})]})]})]})};Zn.propTypes={setBoxTab:d.func,setFieldTab:d.func,setBlockTab:d.func};const es=({level:t,boxIndex:n,fieldIndex:r,blockIndex:l,boxId:s,parentField:i,block:o})=>{const{group:u}=ne(R=>R.metaState),h=ae(),{attributes:p,listeners:c,setNodeRef:j,isDragging:y,transform:b}=Ye({id:o.id}),v={transform:We.Translate.toString(b)},{control:m}=W(),f=P({control:m,name:`${re(u.boxes,s,i.id)}.blocks.${l}.name`}),{move:E}=ve({control:m,name:`${re(u.boxes,s,i.id)}.blocks.${l}.fields`}),D=R=>{const{active:x,over:O}=R;if(x.id===O.id)return;const g=o.fields,S=g.findIndex(N=>N.id===x.id),C=g.findIndex(N=>N.id===O.id),T=Ae(g,S,C);E(S,C),h(dl({boxId:s,parentFieldId:i.id,parentBlockId:o.id,sortedFields:T}))};return e.jsxs(q.Fragment,{children:[e.jsxs("div",{className:`tree-el level${t} flex-between s-8`,ref:j,style:v,children:[e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx("span",{className:"cursor-move top-2 handle",...p,...c,children:e.jsx(B,{icon:"bx:dots-vertical-rounded",color:Ve(),width:18})}),e.jsx("span",{className:"cursor-pointer text-ellipsis",onClick:R=>{R.preventDefault(),ke(`${o.id}`)},children:f||o.name})]}),e.jsx(ht,{style:K.INFO,children:"B"})]},o.id),o.fields&&o.fields.length>0&&e.jsx(_e,{onDragEnd:D,items:o.fields,children:e.jsx(q.Fragment,{children:o.fields.map((R,x)=>e.jsx(Ql,{level:t+1,boxIndex:n,fieldIndex:x,boxId:s,parentField:i,field:R}))})})]})};es.propTypes={level:d.number.isRequired,boxIndex:d.number.isRequired,fieldIndex:d.number.isRequired,blockIndex:d.number.isRequired,boxId:d.string.isRequired,block:d.object.isRequired,parentField:d.object.isRequired};const Ql=({level:t,boxIndex:n,fieldIndex:r,boxId:l,parentField:s,field:i})=>{const{group:o}=ne(x=>x.metaState),u=ae(),{attributes:h,listeners:p,setNodeRef:c,isDragging:j,transform:y}=Ye({id:i.id}),b={transform:We.Translate.toString(y)},{control:v}=W(),m=P({control:v,name:`${re(o.boxes,l,i.id)}.name`}),{move:f}=ve({control:v,name:`${re(o.boxes,l,i.id)}.children`}),{move:E}=ve({control:v,name:`${re(o.boxes,l,i.id)}.blocks`}),D=x=>{const{active:O,over:g}=x;if(O.id===g.id)return;const S=i.blocks,C=S.findIndex(w=>w.id===O.id),T=S.findIndex(w=>w.id===g.id),N=Ae(S,C,T);E(C,T),u(ka({boxId:l,parentFieldId:i.id,sortedBlocks:N}))},R=x=>{const{active:O,over:g}=x;if(O.id===g.id)return;const S=i.children,C=S.findIndex(w=>w.id===O.id),T=S.findIndex(w=>w.id===g.id),N=Ae(S,C,T);f(C,T),u(dl({boxId:l,parentFieldId:i.id,parentBlockId:null,sortedFields:N}))};return e.jsxs(q.Fragment,{children:[e.jsxs("div",{className:`tree-el level${t} flex-between s-8`,ref:c,style:b,children:[e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx("span",{className:"cursor-move top-2 handle",...h,...p,children:e.jsx(B,{icon:"bx:dots-vertical-rounded",color:Ve(),width:18})}),e.jsx("span",{className:"cursor-pointer text-ellipsis",onClick:x=>{x.preventDefault(),ke(`${i.id}`)},children:m||i.name})]}),e.jsx(ht,{style:s?K.SUCCESS:K.SECONDARY,children:s?"C":"F"})]},i.id),i.children&&i.children.length>0&&e.jsx(_e,{onDragEnd:R,items:i.children,children:e.jsx(q.Fragment,{children:i.children.map((x,O)=>e.jsx(Ql,{level:t+1,boxIndex:n,fieldIndex:O,boxId:l,parentField:i,field:x}))})}),i.blocks&&i.blocks.length>0&&e.jsx(_e,{onDragEnd:D,items:i.blocks,children:e.jsx(q.Fragment,{children:i.blocks.map((x,O)=>e.jsx(es,{boxIndex:n,block:x,blockIndex:O,boxId:l,level:t+1,parentField:i,fieldIndex:r}))})})]})};Ql.propTypes={level:d.number.isRequired,fieldIndex:d.number.isRequired,boxIndex:d.number.isRequired,boxId:d.string.isRequired,field:d.object.isRequired,parentField:d.object};const ls=({index:t,box:n})=>{const l=document.globals.globals,s=ae(),[i,o]=k.useState(!1),{attributes:u,listeners:h,setNodeRef:p,isDragging:c,transform:j}=Ye({id:n.id}),y={transform:We.Translate.toString(j)},{control:b}=W(),v=P({control:b,name:`boxes.${t}.name`}),{move:m}=ve({control:b,name:`boxes.${t}.fields`}),f=E=>{const{active:D,over:R}=E;if(D.id===R.id)return;const x=n.fields,O=x.findIndex(C=>C.id===D.id),g=x.findIndex(C=>C.id===R.id),S=Ae(x,O,g);m(O,g),s(dl({boxId:n.id,sortedFields:S,parentFieldId:null,parentBlockId:null}))};return e.jsxs("div",{ref:p,style:y,className:"b-rounded with-shadow bg-white p-24",children:[e.jsxs("h3",{className:`${!i&&n.fields&&n.fields.length>0?"mb-24":""} flex-between s-8`,children:[e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx("span",{className:"cursor-move top-2 handle",...u,...h,children:e.jsx(B,{icon:"bx:dots-vertical-rounded",color:Ve(),width:18})}),e.jsx("span",{className:"text-ellipsis cursor-pointer",onClick:E=>{E.preventDefault(),ke(n.id)},children:v||n.name})]}),e.jsx("span",{className:"cursor-pointer top-2",style:{paddingRight:"6px"},onClick:()=>o(!i),children:e.jsx(B,{width:18,icon:i?"bx:chevron-up":"bx:chevron-down",color:Ve()})})]}),!i&&n.fields&&n.fields.length>0&&e.jsx("div",{className:`tree ${l.is_rtl===!0?"rtl":""}`,children:e.jsx(_e,{onDragEnd:f,items:n.fields,children:e.jsx(q.Fragment,{children:n.fields&&n.fields.map((E,D)=>e.jsx(Ql,{level:0,boxIndex:t,fieldIndex:D,boxId:n.id,field:E}))})})})]},n.id)};ls.propTypes={index:d.number.isRequired,box:d.object.isRequired};const as=({boxes:t})=>{if(typeof t>"u"||t.length===0)return null;const n=ae(),{control:r}=W(),{move:l}=ve({control:r,name:"boxes"}),s=i=>{const{active:o,over:u}=i;if(o.id===u.id)return;const h=t.findIndex(j=>j.id===o.id),p=t.findIndex(j=>j.id===u.id),c=Ae(t,h,p);l(h,p),n(wt(c))};return e.jsx(q.Fragment,{children:e.jsx(_e,{onDragEnd:s,items:t,children:e.jsx(q.Fragment,{children:t&&t.map((i,o)=>e.jsx(ls,{index:o,box:i}))})})})};as.propTypes={boxes:d.array.isRequired};const ts=({boxes:t})=>{const n=ae(),{group:r,closedElements:l}=ne(g=>g.metaState),s=ye(),[i,o]=Ie(),{control:u}=W(),{move:h}=ve({control:u,name:"boxes"}),p=()=>{const g=Za(r.boxes);return(l==null?void 0:l.length)===g.length},[c,j]=k.useState(Xa(r.id)),[y,b]=k.useState(Qa(r.id)),[v,m]=k.useState(p());k.useEffect(()=>{typeof r.id<"u"&&(j(Xa(r.id)),b(Qa(r.id)),m(p()))},[r]);const f=()=>{var g;const S=ye(),C={id:S,name:"meta_box_title",UIName:"meta box title",label:"meta box title",fields:[],isSaved:!1,sort:r.boxes?(g=r.boxes)===null||g===void 0?void 0:g.length:1};n(Ll(C)),ze(1).then(()=>{ke(`${S}`)})},E=g=>{const{active:S,over:C}=g;if(S.id===C.id)return;const T=t.findIndex(_=>_.id===S.id),N=t.findIndex(_=>_.id===C.id),w=Ae(t,T,N);h(T,N),n(wt(w))},D=()=>{const g=Za(r.boxes);(l==null?void 0:l.length)>0?(n(di()),ui(g)):(n(ci()),pi(g)),m(!v)},R=g=>{hi(r.id,g),j(!c)},x=g=>{mi(r.id,g),b(!y)},O=()=>{let g=[];return g.push(e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{htmlFor:"toggle_visibility",className:"toggle",children:[e.jsx("input",{id:"toggle_visibility",type:"checkbox",checked:v,onChangeCapture:S=>{D()}}),e.jsx("span",{className:"slider round"})]})}),e.jsx("label",{className:"cursor-pointer",htmlFor:"toggle_visibility",children:a("Hide elements")})]})),g.push(e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{htmlFor:"toggle_bulk_edit",className:"toggle",children:[e.jsx("input",{id:"toggle_bulk_edit",type:"checkbox",checked:y,onChangeCapture:S=>{x(S.target.checked)}}),e.jsx("span",{className:"slider round"})]})}),e.jsx("label",{className:"cursor-pointer",htmlFor:"toggle_bulk_edit",children:a("Bulk edit")})]})),t&&t.length>0&&g.push(e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{htmlFor:"toggle_navigation",className:"toggle",children:[e.jsx("input",{id:"toggle_navigation",type:"checkbox",checked:c,onChangeCapture:S=>{R(S.target.checked)}}),e.jsx("span",{className:"slider round"})]})}),e.jsx("label",{className:"cursor-pointer",htmlFor:"toggle_navigation",children:a(c?"Hide navigation":"Show navigation")})]})),g};return e.jsxs(q.Fragment,{children:[e.jsx(Wn,{groupId:Ne(r)?s:r.id}),e.jsxs("div",{className:"flex-column",ref:i,children:[e.jsxs("div",{id:"meta-boxes-header",className:"sticky w-100 flex-between bg-base-gray z-11 py-24 s-8",style:{top:"102px",boxShadow:"-5px 0px 0px 0px var(--acpt-bg-color), 5px 0px 0px 0px  var(--acpt-bg-color)"},children:[e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx(B,{icon:"bx:box",width:24,color:Ta()}),e.jsx("h3",{children:a("Meta boxes")}),e.jsx("span",{className:"px-8 py-4 font-sm bg-light-gray text-normal b-rounded",children:t&&t.length>0?t.length:0})]}),e.jsx(js,{align:"right",name:"meta-field-menu",buttonClass:K.WHITE,anchor:e.jsx(B,{icon:"bx:dots-vertical-rounded",color:Ve(),width:24}),links:O()})]}),e.jsx(Zn,{}),t&&t.length>0?e.jsxs("div",{ref:o,className:"container",children:[c&&e.jsx("div",{className:"col-3 flex-column s-24 hidden-xs sticky",style:{top:"130px"},children:e.jsx(as,{boxes:t})}),e.jsxs("div",{className:`flex-column s-24 ${c?"col-9":"col-12"}`,children:[e.jsx(_e,{onDragEnd:E,items:t,children:e.jsx(q.Fragment,{children:t&&t.map((g,S)=>e.jsx(Hn,{index:S,box:g,bulkEdit:y},g.id))})}),e.jsx("div",{children:e.jsx(ee,{type:"button",style:K.WHITE,onClick:()=>{f()},children:a("Add meta box")})})]})]}):e.jsx("div",{className:"mb-24 p-24 bg-white with-shadow",children:e.jsxs("div",{className:"b-maxi b-rounded p-24 flex-column s-12 text-center",children:[e.jsx("span",{children:a('No meta box already created. Create the first one now by clicking the button "Add meta box"!')}),e.jsx("div",{children:e.jsx(ee,{type:"button",style:K.SECONDARY,onClick:()=>{f()},children:a("Add meta box")})})]})})]})]})};ts.propTypes={boxes:d.array.isRequired};const kr=()=>{const t=ae(),[n,r]=k.useState(!1),{unregister:l}=W(),s=[e.jsx(ee,{style:K.SUCCESS,onClick:i=>{i.preventDefault(),t(fi()),t($l()),l("boxes"),r(!n)},children:a("Yes")}),e.jsx(ee,{style:K.DANGER,onClick:i=>{i.preventDefault(),r(!n)},children:a("No")})];return e.jsxs(q.Fragment,{children:[e.jsx(Ce,{title:a("Confirm deleting all"),visible:n,buttons:s,children:a("Are you sure?")}),e.jsx(ee,{type:"button",style:K.DANGER,onClick:i=>{i.preventDefault(),r(!n)},children:a("Delete all")})]})},_r=t=>{const n="You have unsaved changes. Continue?";k.useEffect(()=>{const r=l=>{if(t)return l.returnValue=n,n};return window.addEventListener("beforeunload",r),()=>window.removeEventListener("beforeunload",r)},[t])},ns=({groupId:t})=>{const{register:n,formState:{errors:r},control:l,setValue:s,resetField:i}=W(),o=P({control:l,name:"name"}),u=P({control:l,name:"label"}),{group:h}=ne(m=>m.metaState),[p,c]=k.useState(!0),[j,y]=k.useState(!1),b=()=>r&&r.name?e.jsx("span",{className:"invalid-feedback",children:a("Group name error(s). Please fix it.")}):r&&r.belongs?e.jsx("span",{className:"invalid-feedback",children:a("Location rules error(s). Please fix it.")}):o?e.jsx("span",{children:o}):e.jsx("span",{children:Ne(h)?"group_name":h.name}),v=()=>u?e.jsx("span",{className:"color-gray",children:u}):!Ne(h)&&h.label?e.jsx("span",{className:"color-gray",children:h.label}):a("Group name");return e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx(fe,{id:"id",value:t,register:n}),j?e.jsxs(q.Fragment,{children:[e.jsx("div",{children:e.jsx(ue,{id:"label",register:n,placeholder:a("Group label"),defaultValue:Ne(h)?null:h.label,errors:r,onChangeCapture:m=>{p&&s("name",Qe(Ze(m.target.value)))},onClick:m=>{m.target.value==="group name"&&i("label")},validate:{maxLength:{value:255,message:"max length is 255"}}})}),e.jsx("div",{children:e.jsx(ue,{id:"name",register:n,placeholder:a("Group name"),defaultValue:Ne(h)?"group_name":h.name,errors:r,isRequired:!0,validate:{validate:cl,required:a("This field is mandatory"),maxLength:{value:255,message:"max length is 255"}}})}),e.jsx("div",{children:e.jsx(U,{label:e.jsx("span",{className:`acpt-btn-switch ${p===!0?"active":""}`,onClick:m=>{m.preventDefault(),c(!p)},children:e.jsx(B,{icon:"bx-link",width:18})}),tip:a(`${p?"Auto slug ON":"Auto slug OFF"}`),icon:!1})})]}):e.jsxs(q.Fragment,{children:[e.jsx("h1",{children:b()}),v()&&e.jsx("span",{className:"font-regular text-normal",children:v()})]}),e.jsx(ee,{style:K.SECONDARY,size:"sm",onClick:m=>{m.preventDefault(),y(!j)},children:a(`${j?"Close":"Edit"}`)})]})};ns.propTypes={groupId:d.string.isRequired};const oo=()=>{const t=k.useRef(null),n=ae(),{error:r,success:l,loading:s}=ne(N=>N.saveMeta),{loading:i}=ne(N=>N.fetchMeta),{group:o}=ne(N=>N.metaState),u=ye(),{id:h}=el(),[p,c]=gs(),j=h||u,[y,b]=k.useState(!1),[v,m]=k.useState(!1),[f,E]=k.useState(!1),[D,R]=k.useState(0);ys();const x=yi({mode:"onChange"});k.useEffect(()=>{et(`${a("Manage meta fields")}${v?"*":""}`)},[v]),_r(v),ql([t],()=>{n(gi())});const O=()=>{const N=ye(),w={id:N,name:"meta_box_title",UIName:"meta box title",label:"meta box title",fields:[],isSaved:!1,sort:o.boxes?o.boxes.length:1};n(Ll(w)),R(o.boxes?o.boxes.length:0),ze(1).then(()=>{ke(`${N}`)})};k.useEffect(()=>{if(et(a("Manage meta fields")),bi("#/meta"),h)n(sl({id:h})).then(N=>{n(He(N.payload)),x.setValue("id",h),x.setValue("name",N.payload.name),x.setValue("label",N.payload.label),x.setValue("display",N.payload.display),x.setValue("context",N.payload.context),x.setValue("priority",N.payload.priority),N.payload.belongs&&N.payload.belongs.map((w,_)=>{x.setValue(`belongs.${_}.id`,w.id),x.setValue(`belongs.${_}.belongsTo`,w.belongsTo),x.setValue(`belongs.${_}.operator`,w.operator),x.setValue(`belongs.${_}.find`,w.find),x.setValue(`belongs.${_}.logic`,w.logic)}),N.payload.boxes&&N.payload.boxes.map((w,_)=>{x.setValue(`boxes.${_}`,w)})}).catch(N=>{console.error(N),E(!0)});else{const N=p.get("find"),w=p.get("belongsTo"),_=`${N?N+"_":""}group_name`,M=`${N?N+" ":""}group name`;let V={name:_,label:M};if(x.reset(),x.setValue("name",_),x.setValue("label",M),N&&w){const G=ye();x.setValue("belongs.0.id",G),x.setValue("belongs.0.belongsTo",w),x.setValue("belongs.0.operator","="),x.setValue("belongs.0.find",N),V.belongs=[],V.belongs.push({id:G,belongsTo:w,operator:"=",find:N})}n(He(V))}},[h]);const g=()=>!(y||s||!Ne(x.formState.errors)),S=N=>{b(!0),n(xi(N)).then(w=>{const _=w.payload;_&&_.success?(x.reset({},{keepValues:!0,keepIsSubmitted:!0}),m(!1),aa.success(a("Meta group settings successfully saved")),n(He(N)),C(N),Cs()):aa.error(_&&_.error?_.error:a("An unexpected error has occurred")),b(!1)}).catch(w=>{console.error(w),aa.error(w),b(!1)})},C=N=>{let w=[];document.globals.globals.find.meta.map(G=>{G.value===N.id?w.push({value:N.id,label:N.name}):w.push(G)});const _={meta:w},M={find:{...document.globals.globals.find,..._}},V={globals:{...document.globals.globals,...M}};document.globals={...document.globals,...V}},T=[e.jsx(ee,{type:"button",style:K.SECONDARY,onClick:N=>{N.preventDefault(),O()},children:a("Add meta box")}),e.jsx(ee,{disabled:!g(),style:K.PRIMARY,children:a("Save")}),e.jsx(kr,{})];return h&&i?e.jsx(vi,{}):f?e.jsx(Ri,{}):e.jsx(q.Fragment,{children:e.jsx(ji,{...x,children:e.jsx("form",{onSubmit:x.handleSubmit(S),onChange:()=>{m(!0)},children:e.jsx(Ns,{title:e.jsx(ns,{groupId:j}),actions:T,crumbs:[{label:a("Field groups"),link:"/meta"},{label:a("Manage meta fields")}],children:e.jsx("div",{ref:t,children:e.jsx(ts,{boxes:Ne(o)?[]:o.boxes})})})})})})};export{oo as default};
