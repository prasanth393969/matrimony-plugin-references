import{j as e,r as ne,f as d,u as n,a as Oe,s as _e,l as te,t as U,d as K}from"./fields-wnm5Jtc6.js";import{a as R,R as O,u as Ie}from"./vendor-D21mNUGX.js";import{n as X,u as Ae,a as Me,L as Fe}from"./Layout-CFk9FOHT.js";import{b as ce,C as oe,c as M,d as Pe,D as Le,e as He,f as Ge,g as Ue,h as Ke,M as qe,a as We}from"./sortable.esm-C-GypyhB.js";import{P as j,a as w,u as V,w as ue,ai as b,I as k,A as G,s as $,aj as ze,ak as Be,al as J,am as Ye,an as ie,ao as Xe,ap as q,aq as Je,ar as Qe,as as _,at as W,au as Ze,av as re,B as H,aw as he,b as L,ax as ea,ay as de,m as aa,az as la,aA as z,aB as sa,L as ta,aC as ia,aD as ra}from"./index-pmrLY__j.js";import{T as da,a as B}from"./index-D8v0Ahx2.js";import{u as pe}from"./index-DRV1MUeg.js";import{C as na}from"./index-BFwVLiS5.js";import{d as ca,w as oa}from"./bundle.esm.min-B-HQpnrw.js";import{a as ua}from"./index.esm-DCQn2FO4.js";import{M as ha}from"./index-in9snbYX.js";import{T as pa}from"./index-DvlEPr8_.js";import{M as xa}from"./index-76LCHVw3.js";import{R as ma,Q as fa,a as ba}from"./quill-CBfB4btM.js";import{m as Y}from"./metaTypes-Bb9tjSPe.js";import{S as ga}from"./SaveFormModal-BCPdHryp.js";import"./index-DUg31hI9.js";import"./isEqual-DOWcrqPL.js";import"./InputHidden-B-jHubUl.js";import"./Label-aklbfFQf.js";import"./Input-Cutb8bBf.js";import"./validation-Dyv8Y-XS.js";import"./Select-DRmfXoMp.js";import"./forms-BxKLxDeK.js";import"./index-kc5wfrYu.js";import"./posts-QpkBeGIZ.js";import"./SelectMulti-CzFQ1GVp.js";const ja="/wp-content/plugins/advanced-custom-post-type/assets/build/assets/map-_IUcn4PK.png",va="/wp-content/plugins/advanced-custom-post-type/assets/build/assets/map-multi-B8CB54_e.png",F=({element:a,isDragging:o})=>{const l=a.field,r=a.settings,{previewElement:u}=w(x=>x.formManager),[t,h]=R.useState(l.extra.defaultValue),m=V();R.useEffect(()=>{ue("fetchFormPreviewElementAction",{field:l,previewElement:u}).then(x=>{const p=x.value!==null?x.value:l.extra.defaultValue;h(p),m(b({id:a.id,key:"defaultValue",value:p}))}).catch(x=>{console.error(x.message)})},[u]),R.useEffect(()=>{u||h(l.extra.defaultValue)},[l.extra.defaultValue]);const s=o?{zIndex:1e4,padding:"8px",background:"white",borderRadius:"4px",opacity:"0.8",boxShadow:"rgba(0, 0, 0, 0.16) 0px 1px 4px"}:{},f=()=>{const x=l.extra.options?l.extra.options:[],p=a.id+"-"+ne(8);switch(l.type){case d.FORMATTING_IMAGE_TYPE:const g=l.extra.defaultValue??"",y=l.extra.imageWidth??"100%",C=l.extra.imageHeight??"";return g?e.jsx("img",{width:y,height:C,src:g}):e.jsx("div",{children:"Select an image."});case d.FORMATTING_LINK_TYPE:const S=l.extra.linkValue??"",v=l.extra.linkTarget??"_self";return e.jsx("a",{href:S,target:v,onClick:c=>{c.preventDefault(),c.stopPropagation()},children:e.jsx("span",{contentEditable:"true",onBlur:c=>{h(c.target.outerText),m(b({id:a.id,key:"defaultValue",value:c.target.outerText}))},children:l.extra.defaultValue})});case d.FORMATTING_PARAGRAPH_TYPE:return e.jsx("p",{dangerouslySetInnerHTML:{__html:l.extra.defaultValue},contentEditable:"true",onBlur:c=>{h(c.target.innerHTML),m(b({id:a.id,key:"defaultValue",value:c.target.innerHTML}))}});case d.FORMATTING_HEADING_TYPE:const i=l.extra.headingLevel??"h1";return e.jsx(i,{contentEditable:"true",onBlur:c=>{h(c.target.outerText),m(b({id:a.id,key:"defaultValue",value:c.target.outerText}))},children:l.extra.defaultValue});case d.ACCEPTANCE:return e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx("input",{type:"checkbox"}),e.jsx("span",{dangerouslySetInnerHTML:{__html:l.extra.defaultValue},contentEditable:"true",onBlur:c=>{h(c.target.innerHTML),m(b({id:a.id,key:"defaultValue",value:c.target.innerHTML}))}})]});case d.ADDRESS_MULTI:case d.ADDRESS:return e.jsx("div",{className:"with-border b-rounded p-4",children:e.jsx("img",{className:"w-100 b-rounded",style:{objectFit:"cover",height:"300px"},src:l.extra.isMulti?va:ja,alt:"Maps placeholder"})});case d.QR_CODE:return e.jsx("div",{className:"with-border inline-block b-rounded p-4",children:e.jsx(k,{icon:"bx:qr",width:96})});case d.BUTTON:return e.jsx("button",{disabled:l.extra.disabled?l.extra.disabled:!1,id:a.id,type:l.extra.type,className:`acpt-btn acpt-btn-default acpt-btn-primary ${r.css}`,children:l.extra.label},p);case d.CAPTCHA:return e.jsxs("div",{className:"i-flex-center p-8 s-8 bg-pale-gray with-border b-rounded",children:[e.jsx(k,{icon:"logos:recaptcha",width:32}),e.jsx("span",{children:"CAPTCHA"})]});case d.CHECKBOX:return e.jsx("div",{className:`${l.extra.display==="inline"?"i-flex-center":"flex-column"} s-8`,children:x&&x.map(c=>e.jsxs("div",{className:"i-flex-center s-4",children:[e.jsx("input",{disabled:l.extra.disabled?l.extra.disabled:!1,type:"checkbox",checked:c.value===t,value:c.value,id:c.id},p),e.jsx("label",{htmlFor:c.id,children:c.label})]}))});case d.COLOR:return e.jsx("input",{type:"color",disabled:l.extra.disabled?l.extra.disabled:!1,className:`form-control ${r.css}`,id:a.id,readOnly:!0,defaultValue:t},p);case d.TIME:return e.jsx("input",{type:"time",disabled:l.extra.disabled?l.extra.disabled:!1,className:`form-control ${r.css}`,id:a.id,readOnly:!0,placeholder:l.extra.placeholder,defaultValue:t},p);case d.WORDPRESS_POST_DATE:case d.DATE:case d.DATE_TIME:return e.jsx("input",{type:"date",disabled:l.extra.disabled?l.extra.disabled:!1,className:`form-control ${r.css}`,id:a.id,readOnly:!0,placeholder:l.extra.placeholder,defaultValue:t},p);case d.WORDPRESS_USER_EMAIL:case d.EMAIL:return e.jsx("input",{type:"email",disabled:l.extra.disabled?l.extra.disabled:!1,className:`form-control ${r.css}`,id:a.id,readOnly:!0,placeholder:l.extra.placeholder,defaultValue:t},p);case d.WORDPRESS_POST_THUMBNAIL:case d.FILE:return e.jsx("input",{type:"file",disabled:l.extra.disabled?l.extra.disabled:!1,className:`form-control ${r.css}`,id:a.id,readOnly:!0,placeholder:l.extra.placeholder,defaultValue:t},p);case d.HIDDEN:return e.jsxs(G,{style:$.DEFAULT,children:["HIDDEN ",t?`[${t}]`:""]});case d.ICON:return e.jsx(k,{icon:"bx:wink-smile",width:24});case d.NUMBER:return e.jsx("input",{disabled:l.extra.disabled?l.extra.disabled:!1,type:"number",className:`form-control ${r.css}`,id:a.id,readOnly:!0,min:l.extra.min,max:l.extra.max,step:l.extra.step,placeholder:l.extra.placeholder,defaultValue:t},p);case d.RADIO:return e.jsx("div",{className:`${l.extra.display==="inline"?"i-flex-center":"flex-column"} s-8`,children:x&&x.map(c=>e.jsxs("div",{className:"i-flex-center s-4",children:[e.jsx("input",{disabled:l.extra.disabled?l.extra.disabled:!1,type:"radio",checked:c.value===t,value:c.value,id:c.id},p),e.jsx("label",{htmlFor:c.id,children:c.label})]}))});case d.RANGE:return e.jsx("input",{type:"range",className:`form-control ${r.css}`,id:a.id,readOnly:!0,min:l.extra.min,max:l.extra.max,step:l.extra.step,defaultValue:t,disabled:!0},p);case d.RATING:let E=isNaN(parseInt(t))?0:parseInt(t);E<0&&(E=0),E>5&&(E=5);const D=5-E;return e.jsxs("div",{className:"i-flex-center",children:[[...Array(t)].map((c,N)=>e.jsx(k,{icon:"bxs:star",width:24})),[...Array(D)].map((c,N)=>e.jsx(k,{icon:"bx:star",width:24}))]});case d.LIST:const T=[];for(let c=0;c<2;c++)T.push(e.jsx("input",{disabled:l.extra.disabled?l.extra.disabled:!1,type:"text",className:`form-control ${r.css}`,id:a.id.i,readOnly:!0,placeholder:l.extra.placeholder},p));return e.jsxs("div",{className:"flex-column s-8",children:[T.map(c=>e.jsx("div",{children:c})),e.jsx("a",{href:"#",onClick:c=>{c.preventDefault()},children:n("Add element")})]});case d.REPEATER:const I=l.extra.layout;if(I==="table"){const c=[];for(let N=0;N<3;N++)c.push(e.jsx("input",{type:"text",className:`form-control ${r.css}`,id:a.id.i,readOnly:!0},N));return e.jsxs(O.Fragment,{children:[e.jsxs("table",{className:"acpt-table with-border",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Field A"}),e.jsx("th",{children:"Field B"}),e.jsx("th",{children:"Field C"})]})}),e.jsx("tbody",{children:e.jsx("tr",{children:c.map(N=>e.jsx("td",{children:N}))})})]}),e.jsx("a",{href:"#",className:"mt-8",onClick:N=>{N.preventDefault()},children:n("Add element")})]})}if(I==="block"){const c=[];for(let N=0;N<2;N++)c.push(e.jsx("table",{className:"acpt-table with-border",children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsxs("h3",{children:["ELEMENT #",N+1]})}),e.jsx("td",{children:e.jsxs("div",{className:"w-100 i-flex-center s-8",children:[e.jsx("input",{type:"text",className:`form-control ${r.css}`,id:`${a.id}_${N}_1`,readOnly:!0}),e.jsx("input",{type:"text",className:`form-control ${r.css}`,id:`${a.id}_${N}_2`,readOnly:!0})]})})]})}));return e.jsxs("div",{className:"flex-column s-8",children:[c.map(N=>N),e.jsx("a",{href:"#",onClick:N=>{N.preventDefault()},children:n("Add element")})]})}const Q=[];for(let c=0;c<2;c++)Q.push(e.jsxs("div",{className:"flex-column p-8 s-8 with-border b-rounded",children:[e.jsxs("h3",{children:["ELEMENT #",c+1]}),e.jsxs("div",{className:"w-100 flex-column s-8",children:[e.jsx("input",{type:"text",className:`form-control ${r.css}`,id:`${a.id}_${c}_1`,readOnly:!0}),e.jsx("input",{type:"text",className:`form-control ${r.css}`,id:`${a.id}_${c}_2`,readOnly:!0})]})]}));return e.jsxs("div",{className:"flex-column s-8",children:[Q.map(c=>c),e.jsx("a",{href:"#",onClick:c=>{c.preventDefault()},children:n("Add element")})]});case d.TURNSTILE:return e.jsxs("div",{className:"i-flex-center p-8 s-8 bg-pale-gray with-border b-rounded",children:[e.jsx(k,{icon:"devicon:cloudflare",width:32}),e.jsx("span",{children:"TURNSTILE"})]});case d.WORDPRESS_POST_TAXONOMIES:const Ee=l.extra.selector??"select",Z=l.extra.isMulti??!1;let A=[];for(const[c,N]of Object.entries(x)){let se=[];for(const[we,De]of Object.entries(N))se.push({label:De,value:we});A.push({label:c,options:se})}return Ee==="checkbox-radio"?e.jsx("div",{className:"flex-column s-24",children:A&&A.map(c=>e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsx("legend",{children:c.label}),e.jsx("div",{className:"flex-column s-4",children:c.options&&c.options.map(N=>e.jsxs("div",{className:"i-flex-center s-4",children:[e.jsx("input",{type:Z?"checkbox":"radio"}),e.jsx("label",{htmlFor:"",children:N.label})]}))})]}))}):e.jsx("select",{className:`form-control ${r.css}`,id:a.id,disabled:!0,multiple:Z,placeholder:l.extra.placeholder,defaultValue:t,children:A&&A.map(c=>e.jsx("optgroup",{label:c.label,children:c.options&&c.options.map(N=>e.jsx("option",{value:N.value,children:N.label}))}))},p);case d.POST_OBJECT_MULTI:case d.POST_OBJECT:const ee=()=>document.globals&&document.globals.globals&&document.globals.globals.find&&document.globals.globals.find.POST_ID?document.globals.globals.find.POST_ID.filter(c=>c.value!==null):[];return e.jsx("select",{className:`form-control ${r.css}`,id:a.id,disabled:!0,multiple:l.extra.isMulti,placeholder:l.extra.placeholder,defaultValue:t,children:ee()&&ee().map(c=>e.jsx("optgroup",{label:c.label,children:c.options&&c.options.map(N=>e.jsx("option",{value:N.value,children:N.label}))}))},p);case d.TERM_OBJECT_MULTI:case d.TERM_OBJECT:const ae=()=>document.globals&&document.globals.globals&&document.globals.globals.find&&document.globals.globals.find.TERM_ID?document.globals.globals.find.TERM_ID.filter(c=>c.value!==null):[];return e.jsx("select",{className:`form-control ${r.css}`,id:a.id,disabled:!0,multiple:l.extra.isMulti,placeholder:l.extra.placeholder,defaultValue:t,children:ae()&&ae().map(c=>e.jsx("optgroup",{label:c.label,children:c.options&&c.options.map(N=>e.jsx("option",{value:N.value,children:N.label}))}))},p);case d.USER_MULTI:case d.USER:const Se=()=>document.globals&&document.globals.globals&&document.globals.globals.find&&document.globals.globals.find.USER_ID?document.globals.globals.find.USER_ID.filter(c=>c.value!==null):[];return e.jsx("select",{className:`form-control ${r.css}`,id:a.id,disabled:!0,multiple:l.extra.isMulti,placeholder:l.extra.placeholder,defaultValue:t,children:Se().map(c=>e.jsx("option",{value:c.value,children:c.label}))},p);case d.WORDPRESS_POST_AUTHOR:case d.SELECT:return e.jsx("select",{className:`form-control ${r.css}`,id:a.id,disabled:!0,multiple:l.extra.isMulti,placeholder:l.extra.placeholder,defaultValue:t,children:x&&x.map(c=>e.jsx("option",{value:c.value,children:c.label}))},p);case d.WORDPRESS_TERM_DESCRIPTION:case d.WORDPRESS_USER_BIO:case d.WORDPRESS_POST_CONTENT:case d.WORDPRESS_POST_EXCERPT:case d.TEXTAREA:return e.jsxs(O.Fragment,{children:[l.extra.wysiwyg&&e.jsxs("div",{className:"i-flex-center s-12 p-12",children:[e.jsx(k,{icon:"bx:bx-bold",width:24}),e.jsx(k,{icon:"bx:bx-italic",width:24}),e.jsx(k,{icon:"bx:bx-link",width:24}),e.jsx(k,{icon:"bx:bxs-quote-right",width:24}),e.jsx(k,{icon:"bx:bx-code",width:24}),e.jsx(k,{icon:"bx:bx-image",width:24}),e.jsx(k,{icon:"bx:bx-list-ol",width:24}),e.jsx(k,{icon:"bx:bx-list-ul",width:24})]}),e.jsx("textarea",{disabled:l.extra.disabled?l.extra.disabled:!1,className:`form-control ${r.css}`,id:a.id,rows:l.extra.rows,cols:l.extra.cols,readOnly:!0,placeholder:l.extra.placeholder,defaultValue:t},p)]});case d.TOGGLE:return e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle",children:[e.jsx("input",{disabled:l.extra.disabled?l.extra.disabled:!1,readOnly:!0,type:"checkbox",checked:l.extra.checked}),e.jsx("span",{className:"slider round"})]})});case d.URL:const Re=()=>t!==null&&typeof t=="object"&&t.urlLabel?t.urlLabel:l.extra.defaultValue!==null&&typeof l.extra.defaultValue=="object"&&l.extra.defaultValue.urlLabel?l.extra.defaultValue.urlLabel:null,le=()=>t!==null&&typeof t=="object"&&t.url?t.url:l.extra&&typeof l.extra.defaultValue=="object"?l.extra.defaultValue.url?l.extra.defaultValue.url:null:t;return l.extra.hideLabel?e.jsx("input",{disabled:l.extra.disabled?l.extra.disabled:!1,type:"url",className:`form-control ${r.css}`,id:a.id,readOnly:!0,placeholder:l.extra.placeholder,defaultValue:le()},p):e.jsxs("div",{className:"i-flex-center s-8 w-100",children:[e.jsx("input",{disabled:l.extra.disabled?l.extra.disabled:!1,type:"url",className:`form-control ${r.css}`,id:a.id,readOnly:!0,placeholder:l.extra.placeholder,defaultValue:le()},p),e.jsx("input",{disabled:l.extra.disabled?l.extra.disabled:!1,type:"text",className:`form-control ${r.css}`,id:`${a.id}_label`,readOnly:!0,placeholder:l.extra.labelPlaceholder,defaultValue:Re()},`${p}_label`)]});case d.CURRENCY:case d.LENGTH:case d.WEIGHT:const $e=()=>t!==null&&l.type===d.CURRENCY&&typeof t=="object"&&t.currency?t.currency:t!==null&&l.type===d.LENGTH&&typeof t=="object"&&t.length?t.length:t!==null&&l.type===d.WEIGHT&&typeof t=="object"&&t.weight?t.weight:l.extra.defaultValue!==null&&l.type===d.CURRENCY&&typeof l.extra.defaultValue=="object"?l.extra.defaultValue.currency?l.extra.defaultValue.currency:null:l.extra.defaultValue!==null&&l.type===d.LENGTH&&typeof l.extra.defaultValue=="object"?l.extra.defaultValue.length?l.extra.defaultValue.length:null:l.extra.defaultValue!==null&&l.type===d.WEIGHT&&typeof l.extra.defaultValue=="object"?l.extra.defaultValue.weight?l.extra.defaultValue.weight:null:l.extra.uom?l.extra.uom:null,Ve=()=>t!==null&&l.type===d.CURRENCY&&typeof t=="object"&&t.currencyValue?t.currencyValue:t!==null&&l.type===d.LENGTH&&typeof t=="object"&&t.lengthValue?t.lengthValue:t!==null&&l.type===d.WEIGHT&&typeof t=="object"&&t.weightValue?t.weightValue:l.extra.defaultValue!==null&&l.type===d.CURRENCY&&typeof l.extra.defaultValue=="object"?l.extra.defaultValue.currencyValue?l.extra.defaultValue.currencyValue:null:l.extra.defaultValue!==null&&l.type===d.LENGTH&&typeof l.extra.defaultValue=="object"?l.extra.defaultValue.lengthValue?l.extra.defaultValue.lengthValue:null:l.extra.defaultValue!==null&&l.type===d.WEIGHT&&typeof l.extra.defaultValue=="object"?l.extra.defaultValue.weightValue?l.extra.defaultValue.weightValue:null:t;return e.jsxs("div",{className:"i-flex-center s-8 w-100",children:[e.jsx("input",{type:"text",className:`w-100 form-control ${r.css}`,id:a.id,readOnly:!0,defaultValue:Ve(),disabled:!0},p),e.jsx("span",{children:$e()})]});case d.PASSWORD:case d.WORDPRESS_USER_PASSWORD:return e.jsx("input",{type:"password",className:`form-control ${r.css}`,id:a.id,readOnly:!0,defaultValue:t,disabled:!0},p)}return e.jsx("input",{disabled:l.extra.disabled?l.extra.disabled:!1,type:"text",className:`form-control ${r.css}`,id:a.id,readOnly:!0,placeholder:l.extra.placeholder,defaultValue:typeof t=="string"?t:null},p)};return o?e.jsx("span",{style:s,children:l.name}):e.jsx("div",{className:`text-${r.alignment} font-size-${l.extra.fontSize??"m"}`,style:s,children:e.jsxs("div",{className:r.layout==="inline"?"i-flex-center s-8 w-100":"",children:[l.label!==""&&l.label!==null&&e.jsxs("label",{htmlFor:a.id,className:"form-label",style:r.layout==="inline"?{margin:"0"}:null,children:[l.label,a.field.isRequired&&e.jsx("span",{className:"color-danger",children:"*"})]}),e.jsxs("div",{className:"w-100",children:[f(),l.description!==""&&l.description!==null&&e.jsx("div",{className:"form-description color-light-gray",children:l.description})]})]})})};F.propTypes={element:j.object.isRequired,isDragging:j.bool};const xe=({element:a})=>{const o=V(),{activeElement:l}=w(T=>T.formManager),r=a.settings,{setNodeRef:u,isDragging:t,transform:h,listeners:m,attributes:s}=ce({id:a.id,data:{fromCanvas:!0}}),f={transform:oe.Translate.toString(h)},x=M({id:a.id+"-top",data:{element:a,isTopHalfElement:!0}}),p=M({id:a.id+"-bottom",data:{element:a,isBottomHalfElement:!0}}),g=M({id:a.id+"-left",data:{element:a,isLeftHalfElement:!0}}),y=M({id:a.id+"-right",data:{element:a,isRightHalfElement:!0}}),C=()=>l?l.id===a.id:!1,S=()=>{o(Be({id:a.id}))},v=()=>{o(J())},i=()=>{o(Ye({id:a.id}))},E=()=>{o(ie({id:a.id}))},D=document.getElementById(a.id);return R.useEffect(()=>{if(D){const T=I=>{a.field.group!=="Typography elements"&&(I.code==="Delete"||I.keyCode===46)&&o(ie({id:a.id}))};return D.addEventListener("keydown",T,!0),()=>{D.removeEventListener("keydown",T,!0)}}},[D]),t?e.jsx("div",{className:`canvas-element col-${r.cols}`,"data-cy":`canvas-element-${a.id}`,children:e.jsx("div",{className:"inside",children:e.jsx("div",{className:"element",children:e.jsx(F,{element:a})})})}):e.jsxs("div",{tabIndex:0,ref:u,id:a.id,style:f,"data-cy":`canvas-element-${a.id}`,className:`canvas-element col-${r.cols} ${C()?"active":""}`,children:[x.isOver&&e.jsx("div",{className:"top-half-hover-placeholder"}),p.isOver&&e.jsx("div",{className:"bottom-half-hover-placeholder"}),g.isOver&&e.jsx("div",{className:"left-half-hover-placeholder"}),y.isOver&&e.jsx("div",{className:"right-half-hover-placeholder"}),e.jsx("div",{ref:x.setNodeRef,className:"top-half"}),e.jsx("div",{ref:p.setNodeRef,className:"bottom-half"}),e.jsx("div",{ref:g.setNodeRef,className:"left-half"}),e.jsx("div",{ref:y.setNodeRef,className:"right-half"}),e.jsxs("div",{className:`inside ${C()?"active":""}`,children:[C()&&e.jsxs("div",{className:"actions flex s-8",children:[e.jsx("small",{children:a.field.name}),e.jsx("span",{className:"cursor-move handle",...s,...m,children:e.jsx(k,{icon:"bx:move",width:14})}),e.jsx("a",{href:"#",onClick:T=>{T.preventDefault(),T.stopPropagation(),v()},children:e.jsx(k,{icon:"bx:x",width:14})}),e.jsx("a",{href:"#",onClick:T=>{T.preventDefault(),T.stopPropagation(),i()},children:e.jsx(k,{icon:"bx:copy",width:14})}),e.jsx("a",{href:"#",onClick:T=>{T.preventDefault(),T.stopPropagation(),E()},children:e.jsx(k,{icon:"bx-trash",width:14,color:ze()})})]}),e.jsx("div",{onClick:T=>{T.preventDefault(),T.stopPropagation(),S()},className:"element",children:e.jsx(F,{element:a})})]})]})};xe.propTypes={element:j.shape({field:j.object.isRequired,overlayItem:j.element.isRequired,previewItem:j.element.isRequired}).isRequired};const ya=()=>{const{elements:a}=w(s=>s.formManager),{listeners:o,setNodeRef:l,transform:r,transition:u,isOver:t}=M({id:"canvas-drop-area",data:{isCanvas:!0}}),h={transform:oe.Translate.toString(r),transition:u},m=e.jsx("div",{className:"flex-absolute-center",children:e.jsx("h4",{children:n("Drop elements here")})});return e.jsxs("div",{"data-cy":"form-canvas",ref:l,className:`col-9 canvas with-shadow bg-white b-rounded p-24 ${t?"canvas-hover":""}`,style:h,...o,children:[!t&&a.length===0&&m,e.jsx("div",{className:"canvas-container","data-cy":"form-canvas-container",children:a.map((s,f)=>e.jsx(xe,{element:s},f))})]})},P=({field:a,hidden:o=!1,isDragging:l=!1,mode:r,isActive:u=!0})=>{const t=()=>a.group==="Typography elements"?$.SUCCESS:a.group==="WordPress post fields"?$.INFO:a.group==="WordPress taxonomy fields"?$.WARNING:a.group==="WordPress user fields"?$.DANGER:a.group==="ACPT fields"?$.SECONDARY:$.DEFAULT,h=()=>{const{icon:m}=Oe(a.type);return m};return r==="overlay"||r==="dragging"?e.jsx("div",{className:`acpt-badge acpt-badge-${t()} m-0 cursor-move with-shadow`,style:{width:"150px"},children:e.jsxs("span",{className:"flex-between",children:[e.jsx("span",{className:"text-ellipsis",children:a.label?a.label:a.name}),e.jsx(k,{icon:h(),width:18})]})}):e.jsx("div",{className:`acpt-badge acpt-badge-${t()} m-0 ${o?"hidden":"block"} ${u?"cursor-move":"disabled"} ${l?"with-border":""}`,children:e.jsxs("div",{className:"flex-between",children:[e.jsx("span",{className:"text-ellipsis",children:a.label?a.label:a.name}),e.jsx(k,{icon:h(),width:18})]})})};P.propTypes={hidden:j.bool,isDragging:j.bool,mode:j.oneOf(["overlay","dragging"]),isActive:j.bool,field:j.shape({id:j.string.isRequired,name:j.string.isRequired,group:j.string.isRequired,type:j.string.isRequired}).isRequired};const me=({field:a,hidden:o})=>{const{elements:l}=w(f=>f.formManager),r={css:"",cols:"12",layout:"block",alignment:"left"},{attributes:u,listeners:t,setNodeRef:h,isDragging:m}=ce({id:a.id,data:{field:a,previewItem:e.jsx(F,{element:{field:a}}),settings:r,validationRules:[],fromSidebar:!0}});return(a.isReusable===!0?!0:l.findIndex(f=>f.field.name===a.name)===-1)?e.jsx("div",{"data-cy":`field-panel-element-${a.name}`,className:o?"hidden":"",ref:h,...t,...u,children:e.jsx(P,{field:a,hidden:o,isDragging:m,isActive:!0})}):e.jsx("div",{className:o?"hidden":"",children:e.jsx(P,{field:a,hidden:o,isDragging:m,isActive:!1})})};me.propTypes={hidden:j.bool,field:j.shape({id:j.string.isRequired,name:j.string.isRequired,group:j.string.isRequired,type:j.string.isRequired,extra:j.array.isRequired}).isRequired};const fe=({name:a,fields:o,search:l})=>(()=>{if(!l)return!1;let u=0;return o.map(t=>{l&&te(t.name,l)&&u++}),u===0})()?null:e.jsxs("div",{children:[e.jsx("h4",{className:"mb-12",children:n(a)}),e.jsx("div",{className:"grid grid-2 s-12","data-cy":`field-panel-group-${_e(a)}`,children:o.map(u=>e.jsx(me,{field:u,hidden:l?!te(u.name,l):!1},u.id))})]});fe.propTypes={name:j.string.isRequired,fields:j.array.isRequired,search:j.string};const be=({fields:a})=>{const[o,l]=R.useState(null),r=()=>{let t=[],h=[];return a.map(m=>{t[m.group]||(t[m.group]=[]),t[m.group].push(m)}),Object.keys(t).map(m=>{h.push({name:m,fields:t[m]})}),h},u=t=>{l(t)};return e.jsxs("div",{className:"flex-column s-24 p-24",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"mb-12",children:n("Form fields")}),e.jsx("input",{type:"text","data-cy":"form-fields-search",className:"form-control",placeholder:n("Search"),onChangeCapture:t=>u(t.target.value)})]}),r().map((t,h)=>e.jsx(fe,{name:t.name,fields:t.fields,search:o},h))]})};be.propTypes={fields:j.array.isRequired};const ge=({elementId:a,isTextual:o,isMedia:l,index:r,rule:u})=>{const t=V(),[h,m]=R.useState(u.condition!=="blank"&&u.condition!=="not_blank"),s=v=>`rules-${a}-${r}-${v}`,f=[{value:"blank",label:"blank"},{value:"not_blank",label:"not blank"},{value:"=",label:"="},{value:"!=",label:"!="},{value:">",label:">"},{value:">=",label:">="},{value:"<",label:"<"},{value:"<=",label:"<="},{value:"max",label:"max"},{value:"min",label:"min"},{value:"regex",label:"regex"}],x=[{value:"max_size",label:"max size"},{value:"min_size",label:"min size"}],p=()=>l?x:f,g=v=>{let i;switch(v){case"blank":i="Value is not blank";break;case"not_blank":i="Value is blank";break;case"=":i="Value is not equal to {{v}}";break;case"!=":i="Value is equal to {{v}}";break;case">":i="Value is lower or equals than {{v}}";break;case">=":i="Value is lower than {{v}}";break;case"<":i="Value is greatest or equals than {{v}}";break;case"<=":i="Value is greatest than {{v}}";break;case"max":i="The maximum length is {{v}}";break;case"min":i="The minimum length is {{v}}";break;case"max_size":i="The maximum size is {{v}}";break;case"min_size":i="The minimum size is {{v}}";break;case"regex":i="Regex value is not matching {{v}}";break}return n(i)},y=v=>{const i={...u};i.condition=v,i.message=g(v),v==="blank"||v==="not_blank"?(i.value=null,m(!1)):m(!0),t(q({elementId:a,ruleIndex:r,rule:i}))},C=v=>{const i={...u};i.value=v,t(q({elementId:a,ruleIndex:r,rule:i}))},S=v=>{const i={...u};i.message=v,t(q({elementId:a,ruleIndex:r,rule:i}))};return!o&&!l?null:e.jsxs("fieldset",{className:"acpt-fieldset",children:[e.jsxs("legend",{children:["Rule #",r+1]}),e.jsx("div",{className:"flex s-8",children:e.jsxs("div",{className:"flex-column s-8",children:[e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx("div",{className:"w-60",children:e.jsx("select",{className:"form-control",id:s("condition"),defaultValue:u.condition,onChangeCapture:v=>y(v.target.value),children:p().map((v,i)=>e.jsx("option",{value:v.value,children:v.label},i))},s("condition"))}),e.jsx("div",{className:"w-40",children:h?e.jsx("input",{type:"text",id:s("value"),className:"form-control",defaultValue:u.value,onChangeCapture:v=>C(v.target.value)},s("value")):e.jsx("input",{type:"text",readOnly:!0,disabled:!0,placeholder:null,defaultValue:null,id:s("value"),className:"form-control",value:null},s("value"))})]}),e.jsx("input",{type:"text",id:s("message"),className:"form-control",value:u.message,onChangeCapture:v=>S(v.target.value)},s("message")),e.jsx("a",{className:`color-${$.DANGER}`,href:"#",onClick:v=>{v.preventDefault(),t(Xe({id:u.id,elementId:a}))},children:n("Delete")})]})})]})};ge.propTypes={elementId:j.string.isRequired,isTextual:j.bool.isRequired,isMedia:j.bool.isRequired,index:j.number.isRequired,rule:j.object.isRequired};const je=({element:a})=>{const o=V(),[l]=pe();return!a.field||!a.field.validation?null:e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{className:"flex-between",children:[e.jsx("label",{className:"form-label",children:n("Field required")}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle",children:[e.jsx("input",{id:`required-${a.id}`,name:`required-${a.id}`,type:"checkbox",defaultChecked:a.field.isRequired,onChangeCapture:r=>{o(Je({id:a.id,value:r.target.checked}))}},`required-${a.id}`),e.jsx("span",{className:"slider round"})]})})]}),(a.field.isTextual||a.field.isMedia)&&e.jsxs(O.Fragment,{children:[e.jsx("div",{className:"flex-column s-24",ref:l,children:a.validationRules.length>0?e.jsx(O.Fragment,{children:a.validationRules.map((r,u)=>e.jsx(ge,{elementId:a.id,isTextual:a.field.isTextual,isMedia:a.field.isMedia,rule:r,index:u},r.id))}):e.jsx(G,{style:$.WARNING,children:n('No rules already created. Create the first one now by clicking the button "Add rule"!')})}),e.jsx("a",{href:"#",onClick:r=>{r.preventDefault(),o(Qe({id:a.id,isTextual:a.field.isTextual,isMedia:a.field.isMedia}))},children:n("Add rule")})]})]})};je.propTypes={element:j.object.isRequired};const ve=({element:a})=>{const o=V(),[l,r]=R.useState(a.field.name),{register:u,setValue:t}=ua({mode:"all"});R.useEffect(()=>{t(`name-${a.id}`,l)},[l]);const h=s=>{const f=ca(oa(s));r(f),o(W({id:a.id,key:"name",value:f}))},m=()=>a.field.type!==d.BUTTON&&a.field.type!==d.HIDDEN&&a.field.type!==d.FORMATTING_LINK_TYPE&&a.field.type!==d.FORMATTING_PARAGRAPH_TYPE&&a.field.type!==d.FORMATTING_HEADING_TYPE&&a.field.type!==d.FORMATTING_IMAGE_TYPE;return e.jsxs("div",{className:"flex-column s-24",children:[e.jsxs("div",{className:"flex-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:n("Layout")}),e.jsxs("div",{className:"flex s-4",children:[e.jsx("label",{htmlFor:`layout-${a.id}`,className:`acpt-btn-switch ${a.settings.layout==="block"?"active":""}`,onClickCapture:s=>{o(_({id:a.id,key:"layout",value:"block"}))},children:e.jsx(k,{icon:"akar-icons:two-line-vertical",width:18})}),e.jsx("label",{htmlFor:`layout-${a.id}`,className:`acpt-btn-switch ${a.settings.layout==="inline"?"active":""}`,onClickCapture:s=>{o(_({id:a.id,key:"layout",value:"inline"}))},children:e.jsx(k,{icon:"akar-icons:two-line-horizontal",width:18})})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("label",{className:"form-label",children:n("Alignment")}),e.jsxs("div",{className:"flex s-4",children:[e.jsx("label",{htmlFor:`layout-${a.id}`,className:`acpt-btn-switch ${a.settings.alignment==="left"?"active":""}`,onClickCapture:s=>{o(_({id:a.id,key:"alignment",value:"left"}))},children:e.jsx(k,{icon:"bx:align-left",width:18})}),e.jsx("label",{htmlFor:`layout-${a.id}`,className:`acpt-btn-switch ${a.settings.alignment==="center"?"active":""}`,onClickCapture:s=>{o(_({id:a.id,key:"alignment",value:"center"}))},children:e.jsx(k,{icon:"bx:align-middle",width:18})}),e.jsx("label",{htmlFor:`layout-${a.id}`,className:`acpt-btn-switch ${a.settings.alignment==="right"?"active":""}`,onClickCapture:s=>{o(_({id:a.id,key:"alignment",value:"right"}))},children:e.jsx(k,{icon:"bx:align-right",width:18})})]})]})]}),e.jsxs("div",{className:`name-${a.id}`,children:[e.jsx("label",{className:"form-label",htmlFor:`name-${a.id}`,children:n("Name")}),e.jsx("input",{className:"form-control",name:`name-${a.id}`,id:`name-${a.id}`,defaultValue:a.field.name,disabled:a.field.isReusable===!1||a.field.metaFieldId!==null,...u(`name-${a.id}`),onChangeCapture:s=>{h(s.target.value)}},`name-${a.id}`)]}),e.jsxs("div",{className:`cols-${a.id}`,children:[e.jsx("label",{className:"form-label",htmlFor:`cols-${a.id}`,children:n("Columns")}),e.jsx("div",{className:"acpt-select",children:e.jsxs("select",{name:`cols-${a.id}`,className:"form-control",id:`cols-${a.id}`,defaultValue:a.settings.cols,onChangeCapture:s=>{o(_({id:a.id,key:"cols",value:s.target.value}))},children:[e.jsx("option",{value:"auto",children:"auto"}),e.jsx("option",{value:"2",children:"2"}),e.jsx("option",{value:"3",children:"3"}),e.jsx("option",{value:"4",children:"4"}),e.jsx("option",{value:"6",children:"6"}),e.jsx("option",{value:"8",children:"8"}),e.jsx("option",{value:"9",children:"9"}),e.jsx("option",{value:"12",children:"12"})]},`cols-${a.id}`)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"ID"}),e.jsx(na,{text:a.id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`css-${a.id}`,children:n("CSS classes")}),e.jsx("input",{className:"form-control",name:"css",id:`css-${a.id}`,defaultValue:a.settings.css,onChangeCapture:s=>{o(_({id:a.id,key:"css",value:s.target.value}))}},`css-${a.id}`)]}),m()&&e.jsxs(O.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`label-${a.id}`,children:n("Label")}),e.jsx("input",{className:"form-control",name:"label",id:`label-${a.id}`,defaultValue:a.field.label,onChangeCapture:s=>{o(W({id:a.id,key:"label",value:s.target.value}))}},`label-${a.id}`)]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`description-${a.id}`,children:n("Description")}),e.jsx("textarea",{className:"form-control",name:"description",id:`description-${a.id}`,cols:30,rows:6,defaultValue:a.field.description,onChangeCapture:s=>{o(W({id:a.id,key:"description",value:s.target.value}))}},`description-${a.id}`)]})]})]})};ve.propTypes={element:j.object.isRequired};const ye=({elementId:a,option:o,optionIndex:l})=>{const r=V(),u=h=>{const m={...o};m.value=h,r(re({elementId:a,optionIndex:l,option:m}))},t=h=>{const m={...o};m.label=h,r(re({elementId:a,optionIndex:l,option:m}))};return e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx("div",{className:"w-100",children:e.jsx("input",{type:"text",className:"form-control",defaultValue:o.label,onChangeCapture:h=>t(h.target.value)})}),e.jsx("div",{className:"w-100",children:e.jsx("input",{type:"text",className:"form-control",defaultValue:o.value,onChangeCapture:h=>u(h.target.value)})}),e.jsx("a",{href:"#",onClick:h=>{h.preventDefault(),r(Ze({id:o.id,elementId:a}))},children:e.jsx(pa,{icon:!1,tip:n("Delete"),label:e.jsx(k,{icon:"bx-trash",width:18,color:"#F94144"})})})]})};ye.propTypes={elementId:j.string.isRequired,optionIndex:j.number.isRequired,option:j.object.isRequired};const Ne=({elementId:a})=>{const o=V(),[l,r]=R.useState(!1),[u,t]=R.useState(null),[h,m]=R.useState(null),[s,f]=R.useState(!1);R.useEffect(()=>{s&&(r(!0),ue("fetchDatasetsAction",{}).then(g=>{let y=[{value:null,label:n("Select"),items:[]}];g.records&&g.records.map(C=>{y.push({value:C.id,label:C.label?C.label:C.name,items:C.items?C.items:[]})}),t(y),r(!1)}).catch(g=>{console.error(g.message),r(!1)}))},[s]);const x=()=>{const g=u.filter(C=>C.value===h);if(g.length!==1)return;const y=g[0].items;console.log(y),y.map(C=>{o(he({elementId:a,label:C.label,value:C.value}))}),X.success(n("Dataset loaded correctly")),f(!s)},p=[e.jsx(H,{style:$.PRIMARY,disabled:h===null,onClick:g=>{g.preventDefault(),x()},children:n("Load dataset")}),e.jsx(H,{style:$.DANGER,onClick:g=>{g.preventDefault(),f(!s)},children:n("Close")})];return e.jsxs(O.Fragment,{children:[e.jsx(xa,{title:n("Load dataset"),visible:s,padding:0,buttons:p,children:l?e.jsx("div",{className:"p-24",children:n("Loading...")}):e.jsx("div",{className:"p-24",children:e.jsx("select",{id:"dataset",className:"form-control default",onChangeCapture:g=>m(g.target.value),children:u&&u.map(g=>e.jsx("option",{value:g.value,children:g.label}))})})}),e.jsx("a",{href:"#",onClick:g=>{g.preventDefault(),f(!s)},children:n("Load dataset")})]})};Ne.propTypes={elementId:j.string.isRequired};const ke=({elementId:a,options:o})=>{const l=V(),[r]=pe();return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`options-${a}`,children:n("Options")}),e.jsxs("div",{className:"flex-column s-8",ref:r,children:[o&&o.length>0?e.jsx(O.Fragment,{children:o.map((u,t)=>e.jsx(ye,{elementId:a,option:u,optionIndex:t},t))}):e.jsx(G,{style:$.WARNING,children:n('No options already created. Create the first one now by clicking the button "Add option"!')}),e.jsxs("div",{className:"mt-24 i-flex-center s-8",children:[e.jsx("a",{href:"#",onClick:u=>{u.preventDefault(),l(he({elementId:a}))},children:n("Add option")}),e.jsx(Ne,{elementId:a})]})]})]})};ke.propTypes={elementId:j.string.isRequired,options:j.array.isRequired};const Ce=({element:a})=>{const l=document.globals.settings,r=V(),u=a.field.type,t=a.field.extra,h=()=>{let s=[];switch(u){case d.ADDRESS:s.push("isMulti"),s.push("fontSize"),s.push("defaultValue");break;case d.FILE:s.push("fontSize"),s.push("multiple"),s.push("accept");break;case d.NUMBER:s.push("disabled"),s.push("fontSize"),s.push("defaultValue"),s.push("placeholder"),s.push("min"),s.push("max"),s.push("step");break;case d.RANGE:s.push("disabled"),s.push("fontSize"),s.push("defaultValue"),s.push("min"),s.push("max"),s.push("step");break;case d.RADIO:case d.CHECKBOX:s.push("nullValue"),s.push("disabled"),s.push("fontSize"),s.push("defaultValue"),s.push("placeholder"),s.push("display"),s.push("options");break;case d.SELECT:s.push("isMulti"),s.push("select2"),s.push("nullValue"),s.push("disabled"),s.push("fontSize"),s.push("defaultValue"),s.push("placeholder"),s.push("options");break;case d.WORDPRESS_USER_BIO:case d.WORDPRESS_TERM_DESCRIPTION:case d.WORDPRESS_POST_CONTENT:case d.WORDPRESS_POST_EXCERPT:case d.TEXTAREA:s.push("disabled"),s.push("fontSize"),s.push("defaultValue"),s.push("placeholder"),s.push("wysiwyg"),s.push("rows"),s.push("cols"),s.push("min"),s.push("max");break;case d.BUTTON:s.push("disabled"),s.push("fontSize"),s.push("type"),s.push("label");break;case d.DATE:case d.DATE_RANGE:s.push("disabled"),s.push("fontSize"),s.push("defaultValue"),s.push("minDate"),s.push("maxDate"),s.push("dateFormat");break;case d.DATE_TIME:s.push("disabled"),s.push("fontSize"),s.push("defaultValue"),s.push("minDate"),s.push("maxDate"),s.push("dateFormat"),s.push("timeFormat");break;case d.TIME:s.push("disabled"),s.push("fontSize"),s.push("defaultValue"),s.push("minDate"),s.push("maxDate"),s.push("timeFormat");break;case d.ICON:case d.RATING:case d.HIDDEN:s.push("defaultValue");break;case d.WORDPRESS_POST_TAXONOMIES:s.push("selector"),s.push("isMulti"),s.push("select2"),s.push("nullValue"),s.push("disabled"),s.push("fontSize"),s.push("defaultValue"),s.push("placeholder");break;case d.WORDPRESS_POST_AUTHOR:s.push("select2"),s.push("nullValue"),s.push("disabled"),s.push("fontSize"),s.push("defaultValue"),s.push("placeholder");break;case d.TOGGLE:s.push("disabled"),s.push("checked");break;case d.CURRENCY:case d.LENGTH:case d.WEIGHT:s.push("uom"),s.push("disabled"),s.push("fontSize"),s.push("defaultValue"),s.push("placeholder"),s.push("min"),s.push("max");break;case d.CAPTCHA:s.push("googleSiteKey"),s.push("googleSecretKey");break;case d.TURNSTILE:s.push("turnstileSiteKey"),s.push("turnstileSecretKey");break;case d.URL:s.push("hideLabel"),s.push("disabled"),s.push("fontSize"),s.push("defaultValue"),s.push("placeholder"),s.push("labelDefaultValue"),s.push("labelPlaceholder"),s.push("urlType"),s.push("min"),s.push("max");break;case d.LIST:s.push("fontSize"),s.push("placeholder");break;case d.REPEATER:s.push("fontSize"),s.push("layout");break;case d.POST:case d.POST_OBJECT:case d.POST_OBJECT_MULTI:case d.TERM_OBJECT:case d.TERM_OBJECT_MULTI:case d.USER_MULTI:case d.USER:s.push("isMulti"),s.push("select2"),s.push("nullValue"),s.push("fontSize"),s.push("disabled");break;case d.ID:case d.EMBED:s.push("disabled"),s.push("fontSize"),s.push("defaultValue"),s.push("placeholder");break;case d.FORMATTING_HEADING_TYPE:s.push("headingLevel"),s.push("fontSize"),s.push("defaultValue");break;case d.ACCEPTANCE:case d.FORMATTING_PARAGRAPH_TYPE:s.push("fontSize"),s.push("defaultValueWithEditor");break;case d.FORMATTING_IMAGE_TYPE:s.push("imagePicker"),s.push("imageWidth"),s.push("imageHeight");break;case d.FORMATTING_LINK_TYPE:s.push("linkValue"),s.push("linkTarget"),s.push("fontSize"),s.push("defaultValue");break;default:s.push("disabled"),s.push("fontSize"),s.push("defaultValue"),s.push("placeholder"),s.push("min"),s.push("max");break}return s},m=s=>{switch(s){case"selector":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`selector-${a.id}`,children:n("Selector")}),e.jsxs("select",{className:"form-control",name:"fontSize",id:`selector-${a.id}`,defaultValue:t.selector,onChangeCapture:i=>{r(b({id:a.id,key:"selector",value:i.target.value}))},children:[e.jsxs("option",{value:"select",children:["Select ",t.isMulti?" multiple":""]}),e.jsx("option",{value:"checkbox-radio",children:t.isMulti?"Checkbox":"Radio"})]},`selector-${a.id}`)]});case"fontSize":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`fontSize-${a.id}`,children:n("Font size")}),e.jsxs("select",{className:"form-control",name:"fontSize",id:`fontSize-${a.id}`,defaultValue:t.fontSize,onChangeCapture:i=>{r(b({id:a.id,key:"fontSize",value:i.target.value}))},children:[e.jsx("option",{value:"m",children:"Regular"}),e.jsx("option",{value:"s",children:"Small"}),e.jsx("option",{value:"xs",children:"Extra small"}),e.jsx("option",{value:"l",children:"Large"}),e.jsx("option",{value:"xl",children:"Extra large"})]},`fontSize-${a.id}`)]});case"defaultValueWithEditor":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`defaultValue-${a.id}`,children:n("Default value")}),e.jsx(ma,{theme:"snow",value:t.defaultValue,onChange:i=>{r(b({id:a.id,key:"defaultValue",value:i}))},modules:fa,formats:ba})]});case"accept":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`accept-${a.id}`,children:n("Accept")}),e.jsx("input",{className:"form-control",name:"accept",type:"text",id:`accept-${a.id}`,defaultValue:t.accept,onChangeCapture:i=>{r(b({id:a.id,key:"accept",value:i.target.value}))}},`accept-${a.id}`)]});case"imageWidth":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`imageWidth-${a.id}`,children:n("Width")}),e.jsx("input",{className:"form-control",name:"imageWidth",type:"text",id:`imageWidth-${a.id}`,defaultValue:t.imageWidth,onChangeCapture:i=>{r(b({id:a.id,key:"imageWidth",value:i.target.value}))}},`imageWidth-${a.id}`)]});case"imageHeight":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`imageHeight-${a.id}`,children:n("Height")}),e.jsx("input",{className:"form-control",name:"imageHeight",type:"text",id:`imageHeight-${a.id}`,defaultValue:t.imageHeight,onChangeCapture:i=>{r(b({id:a.id,key:"imageHeight",value:i.target.value}))}},`imageHeight-${a.id}`)]});case"imagePicker":const f=()=>{let i;i&&i.open(),i=wp.media({title:"Select Image",library:{type:["image"]},multiple:!1,currentValue:""}),i.on("select",function(){const E=i.state().get("selection").first();r(b({id:a.id,key:"defaultValue",value:E.attributes.url}))}),i.open()};return e.jsxs("div",{className:"flex-column justify-center text-center s-8 b-rounded p-24 with-border",children:[t.defaultValue&&e.jsx("img",{className:"aspect-16-9 b-rounded",width:"100%",src:t.defaultValue}),e.jsx("a",{className:"add-image",href:"#",onClick:i=>{i.preventDefault(),i.stopPropagation(),f()},children:n(t.defaultValue?"Change image":"Add image")})]});case"linkValue":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:n("Link URL")}),e.jsx("input",{className:"form-control",name:"linkValue",id:`linkValue-${a.id}`,defaultValue:t.linkValue,onChangeCapture:i=>{r(b({id:a.id,key:"linkValue",value:i.target.value}))}},`linkValue-${a.id}`)]});case"linkTarget":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:n("Link target")}),e.jsxs("select",{className:"form-control",name:"linkTarget",id:`linkTarget-${a.id}`,defaultValue:t.linkTarget,onChangeCapture:i=>{r(b({id:a.id,key:"linkTarget",value:i.target.value}))},children:[e.jsx("option",{value:"_blank",children:"Opens in a new window or tab"}),e.jsx("option",{value:"_self",children:"Opens in the same frame as it was clicked"}),e.jsx("option",{value:"_parent",children:"Opens in the parent frame"}),e.jsx("option",{value:"_top",children:"the"})]},`linkTarget-${a.id}`)]});case"headingLevel":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:n("Level")}),e.jsxs("select",{className:"form-control",name:"headingLevel",id:`headingLevel-${a.id}`,defaultValue:t.headingLevel,onChangeCapture:i=>{r(b({id:a.id,key:"headingLevel",value:i.target.value}))},children:[e.jsx("option",{value:"h1",children:"H1"}),e.jsx("option",{value:"h2",children:"H2"}),e.jsx("option",{value:"h3",children:"H3"}),e.jsx("option",{value:"h4",children:"H4"}),e.jsx("option",{value:"h5",children:"H5"}),e.jsx("option",{value:"h6",children:"H6"})]},`headingLevel-${a.id}`)]});case"checked":return e.jsxs("div",{className:"flex-between",children:[e.jsx("label",{className:"form-label",children:n("Default value")}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle",children:[e.jsx("input",{id:`checked-${a.id}`,name:`checked-${a.id}`,type:"checkbox",defaultChecked:t.checked,onChangeCapture:i=>{r(b({id:a.id,key:"checked",value:i.target.checked}))}},`checked-${a.id}`),e.jsx("span",{className:"slider round"})]})})]});case"cols":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`rows-${a.id}`,children:n("Cols value")}),e.jsx("input",{className:"form-control",name:"cols",type:"number",id:`cols-${a.id}`,defaultValue:t.cols,onChangeCapture:i=>{r(b({id:a.id,key:"cols",value:i.target.value}))}},`cols-${a.id}`)]});case"defaultValue":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`defaultValue-${a.id}`,children:n("Default value")}),e.jsx("input",{className:"form-control",name:"defaultValue",id:`defaultValue-${a.id}`,defaultValue:t.defaultValue,onChangeCapture:i=>{r(b({id:a.id,key:"defaultValue",value:i.target.value}))}},`defaultValue-${a.id}`)]});case"disabled":return e.jsxs("div",{className:"flex-between",children:[e.jsx("label",{className:"form-label",children:n("Disabled")}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle",children:[e.jsx("input",{id:`checked-${a.id}`,name:`checked-${a.id}`,type:"checkbox",defaultChecked:t.disabled?t.disabled:!1,onChangeCapture:i=>{r(b({id:a.id,key:"disabled",value:i.target.checked}))}},`checked-${a.id}`),e.jsx("span",{className:"slider round"})]})})]});case"googleSiteKey":const x=()=>{if(t.googleSiteKey&&t.googleSiteKey!=="")return t.googleSiteKey;const i=L(l,"key","google_recaptcha_site_key");return i?i.value:null};return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`googleSiteKey-${a.id}`,children:n("Your Google reCAPTCHA site key")}),e.jsx("input",{className:"form-control",name:"googleSiteKey",type:"text",id:`googleSiteKey-${a.id}`,defaultValue:x(),onChangeCapture:i=>{r(b({id:a.id,key:"googleSiteKey",value:i.target.value}))}},`googleSiteKey-${a.id}`)]});case"googleSecretKey":const p=()=>{if(t.googleSecretKey&&t.googleSecretKey!=="")return t.googleSecretKey;const i=L(l,"key","google_recaptcha_secret_key");return i?i.value:null};return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`googleSecretKey-${a.id}`,children:n("Your Google reCAPTCHA secret key")}),e.jsx("input",{className:"form-control",name:"googleSecretKey",type:"text",id:`googleSecretKey-${a.id}`,defaultValue:p(),onChangeCapture:i=>{r(b({id:a.id,key:"googleSecretKey",value:i.target.value}))}},`googleSecretKey-${a.id}`)]});case"hideLabel":return e.jsxs("div",{className:"flex-between",children:[e.jsx("label",{className:"form-label",children:n("Hide the label")}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle",children:[e.jsx("input",{id:`hideLabel-${a.id}`,name:`hideLabel-${a.id}`,type:"checkbox",defaultChecked:t.hideLabel,onChangeCapture:i=>{r(b({id:a.id,key:"hideLabel",value:i.target.checked}))}},`hideLabel-${a.id}`),e.jsx("span",{className:"slider round"})]})})]});case"isMulti":return e.jsxs("div",{className:"flex-between",children:[e.jsx("label",{className:"form-label",children:n("Multiple field")}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle",children:[e.jsx("input",{id:`isMulti-${a.id}`,name:`isMulti-${a.id}`,type:"checkbox",defaultChecked:t.isMulti,disabled:a.field.metaFieldId!==null,onChangeCapture:i=>{r(b({id:a.id,key:"isMulti",value:i.target.checked}))}},`isMulti-${a.id}`),e.jsx("span",{className:"slider round"})]})})]});case"labelDefaultValue":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`labelDefaultValue-${a.id}`,children:n("Label default value")}),e.jsx("input",{className:"form-control",name:"labelDefaultValue",type:"text",id:`labelDefaultValue-${a.id}`,defaultValue:t.labelDefaultValue,onChangeCapture:i=>{r(b({id:a.id,key:"labelDefaultValue",value:i.target.value}))}},`labelDefaultValue-${a.id}`)]});case"urlType":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`urlType-${a.id}`,children:n("URL structure type")}),e.jsxs("select",{className:"form-control",name:"urlType",id:`urlType-${a.id}`,defaultValue:t.dateFormat,onChangeCapture:i=>{r(b({id:a.id,key:"urlType",value:i.target.value}))},children:[e.jsx("option",{value:"absolute",children:n("Absolute (ex. http://example.com)")}),e.jsx("option",{value:"relative",children:n("Relative (ex. /path/example/field)")})]},`urlType-${a.id}`)]});case"labelPlaceholder":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`labelPlaceholder-${a.id}`,children:n("Label placeholder")}),e.jsx("input",{className:"form-control",name:"labelPlaceholder",type:"text",id:`labelPlaceholder-${a.id}`,defaultValue:t.labelPlaceholder,onChangeCapture:i=>{r(b({id:a.id,key:"labelPlaceholder",value:i.target.value}))}},`labelPlaceholder-${a.id}`)]});case"turnstileSiteKey":const g=()=>{if(t.turnstileSiteKey&&t.turnstileSiteKey!=="")return t.turnstileSiteKey;const i=L(l,"key","cloudflare_turnstile_site_key");return i?i.value:null};return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`turnstileSiteKey-${a.id}`,children:n("Your Cloudflare Turnstile site key")}),e.jsx("input",{className:"form-control",name:"turnstileSiteKey",type:"text",id:`turnstileSiteKey-${a.id}`,defaultValue:g(),onChangeCapture:i=>{r(b({id:a.id,key:"turnstileSiteKey",value:i.target.value}))}},`turnstileSiteKey-${a.id}`)]});case"turnstileSecretKey":const y=()=>{if(t.turnstileSecretKey&&t.turnstileSecretKey!=="")return t.turnstileSecretKey;const i=L(l,"key","cloudflare_turnstile_secret_key");return i?i.value:null};return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`turnstileSecretKey-${a.id}`,children:n("Your Cloudflare Turnstile secret key")}),e.jsx("input",{className:"form-control",name:"turnstileSecretKey",type:"text",id:`turnstileSecretKey-${a.id}`,defaultValue:y(),onChangeCapture:i=>{r(b({id:a.id,key:"turnstileSecretKey",value:i.target.value}))}},`turnstileSecretKey-${a.id}`)]});case"label":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`label-${a.id}`,children:n("Label")}),e.jsx("input",{className:"form-control",name:"label",type:"text",id:`label-${a.id}`,defaultValue:t.label,onChangeCapture:i=>{r(b({id:a.id,key:"label",value:i.target.value}))}},`label-${a.id}`)]});case"max":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`min-${a.id}`,children:n("Maximum value")}),e.jsx("input",{className:"form-control",name:"max",type:"number",id:`max-${a.id}`,defaultValue:t.max,onChangeCapture:i=>{r(b({id:a.id,key:"max",value:i.target.value}))}},`max-${a.id}`)]});case"maxDate":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:n("Maximum date")}),e.jsx("input",{className:"form-control",name:"maxDate",type:"date",id:`maxDate-${a.id}`,defaultValue:t.maxDate,onChangeCapture:i=>{r(b({id:a.id,key:"maxDate",value:i.target.value}))}},`maxDate-${a.id}`)]});case"dateFormat":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:n("Date format")}),e.jsx("select",{className:"form-control",name:"dateFormat",id:`dateFormat-${a.id}`,defaultValue:t.dateFormat,onChangeCapture:i=>{r(b({id:a.id,key:"dateFormat",value:i.target.value}))},children:K===null||K===void 0?void 0:K.map((i,E)=>e.jsx("option",{value:i.value,children:i.label},E))},`dateFormat-${a.id}`)]});case"timeFormat":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:n("Time format")}),e.jsx("select",{className:"form-control",name:"timeFormat",id:`timeFormat-${a.id}`,defaultValue:t.timeFormat,onChangeCapture:i=>{r(b({id:a.id,key:"timeFormat",value:i.target.value}))},children:U===null||U===void 0?void 0:U.map((i,E)=>e.jsx("option",{value:i.value,children:i.label},E))},`timeFormat-${a.id}`)]});case"min":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`min-${a.id}`,children:n("Minimum value")}),e.jsx("input",{className:"form-control",name:"min",type:"number",id:`min-${a.id}`,defaultValue:t.min,onChangeCapture:i=>{r(b({id:a.id,key:"min",value:i.target.value}))}},`min-${a.id}`)]});case"minDate":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:n("Minimum date")}),e.jsx("input",{className:"form-control",name:"minDate",type:"date",id:`minDate-${a.id}`,defaultValue:t.minDate,onChangeCapture:i=>{r(b({id:a.id,key:"minDate",value:i.target.value}))}},`minDate-${a.id}`)]});case"multiple":return e.jsxs("div",{className:"flex-between",children:[e.jsx("label",{className:"form-label",children:n("Multiple")}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle",children:[e.jsx("input",{id:`multiple-${a.id}`,name:`multiple-${a.id}`,type:"checkbox",defaultChecked:t.multiple,onChangeCapture:i=>{r(b({id:a.id,key:"multiple",value:i.target.checked}))}},`multiple-${a.id}`),e.jsx("span",{className:"slider round"})]})})]});case"nullValue":return e.jsxs("div",{className:"flex-between",children:[e.jsx("label",{className:"form-label",children:n("Allow empty value")}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle",children:[e.jsx("input",{id:`empty-${a.id}`,name:`empty-${a.id}`,type:"checkbox",defaultChecked:t.empty,onChangeCapture:i=>{r(b({id:a.id,key:"empty",value:i.target.checked}))}},`empty-${a.id}`),e.jsx("span",{className:"slider round"})]})})]});case"select2":return(t.selector??"select")!=="select"?null:e.jsxs("div",{className:"flex-between",children:[e.jsx("label",{className:"form-label",children:n("Enable select2")}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle",children:[e.jsx("input",{id:`select2-${a.id}`,name:`select2-${a.id}`,type:"checkbox",defaultChecked:t.select2,onChangeCapture:i=>{r(b({id:a.id,key:"select2",value:i.target.checked}))}},`select2-${a.id}`),e.jsx("span",{className:"slider round"})]})})]});case"options":return e.jsx(ke,{elementId:a.id,options:t.options});case"display":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`type-${a.id}`,children:n("Display")}),e.jsxs("select",{className:"form-control",name:"display",defaultValue:t.display,onChangeCapture:i=>{r(b({id:a.id,key:"display",value:i.target.value}))},children:[e.jsx("option",{value:"block",children:"Block"}),e.jsx("option",{value:"inline",children:"Inline"})]})]});case"placeholder":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`placeholder-${a.id}`,children:n("Placeholder")}),e.jsx("input",{className:"form-control",name:"placeholder",id:`placeholder-${a.id}`,defaultValue:t.placeholder,onChangeCapture:i=>{r(b({id:a.id,key:"placeholder",value:i.target.value}))}},`placeholder-${a.id}`)]});case"rows":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`rows-${a.id}`,children:n("Rows value")}),e.jsx("input",{className:"form-control",name:"rows",type:"number",id:`rows-${a.id}`,defaultValue:t.rows,onChangeCapture:i=>{r(b({id:a.id,key:"rows",value:i.target.value}))}},`rows-${a.id}`)]});case"step":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`step-${a.id}`,children:n("Step value")}),e.jsx("input",{className:"form-control",name:"step",type:"number",id:`step-${a.id}`,defaultValue:t.step,onChangeCapture:i=>{r(b({id:a.id,key:"step",value:i.target.value}))}},`step-${a.id}`)]});case"type":return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:`type-${a.id}`,children:n("Type value")}),e.jsxs("select",{className:"form-control",name:"type",defaultValue:t.type,onChangeCapture:i=>{r(b({id:a.id,key:"type",value:i.target.value}))},children:[e.jsx("option",{value:"submit",children:"submit"}),e.jsx("option",{value:"reset",children:"reset"}),e.jsx("option",{value:"button",children:"button"})]})]});case"uom":if(!a.field&&!a.field.type)return null;let S=[];switch(a.field.type){case d.CURRENCY:S=document.globals.globals.uom.currency;break;case d.LENGTH:S=document.globals.globals.uom.length;break;case d.WEIGHT:S=document.globals.globals.uom.weight;break}return S.length===0?null:e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:n("UOM default value")}),e.jsx("select",{className:"form-control",name:"uom",id:`uom-${a.id}`,defaultValue:t.uom,onChangeCapture:i=>{r(b({id:a.id,key:"uom",value:i.target.value}))},children:S&&S.map((i,E)=>e.jsx("option",{value:i.value,children:i.label},E))},`uom-${a.id}`)]});case"layout":const v=[{label:n("Row"),value:"row"},{label:n("Block"),value:"block"},{label:n("Table"),value:"table"}];return e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:n("UOM default value")}),e.jsx("select",{className:"form-control",name:"layout",id:`layout-${a.id}`,defaultValue:t.layout,onChangeCapture:i=>{r(b({id:a.id,key:"layout",value:i.target.value}))},children:v&&v.map((i,E)=>e.jsx("option",{value:i.value,children:i.label},E))},`layout-${a.id}`)]});case"wysiwyg":return e.jsxs("div",{className:"flex-between",children:[e.jsx("label",{className:"form-label",children:n("Enable editor")}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle",children:[e.jsx("input",{id:`wysiwyg-${a.id}`,name:`wysiwyg-${a.id}`,type:"checkbox",defaultChecked:t.wysiwyg,disabled:a.field.metaFieldId!==null,onChangeCapture:i=>{r(b({id:a.id,key:"wysiwyg",value:i.target.checked}))}},`wysiwyg-${a.id}`),e.jsx("span",{className:"slider round"})]})})]})}return null};return h().length===0?e.jsx(G,{style:$.WARNING,children:"No extra settings avaliable"}):e.jsx("div",{className:"flex-column s-24",children:h().map(s=>m(s))})};Ce.propTypes={element:j.object.isRequired};const Na=()=>{const o=document.globals.settings,l=ea("skin",o,"light"),r=V(),{activeElement:u,elements:t}=w(f=>f.formManager),h=u.id,m=()=>l==="dark"?"#999":"#1d2327",s=()=>{const f=t.filter(x=>x.id===h);return f.length===1?f[0]:null};return s()?e.jsxs(O.Fragment,{children:[e.jsxs("div",{className:"p-24 flex-between b-bottom-1",children:[e.jsxs("span",{className:"i-flex-center s-8",children:[e.jsx("span",{className:"color-black text-ellipsis",children:s().field.name}),e.jsx(ha,{fieldType:s().field.type})]}),e.jsx("a",{href:"#",onClick:f=>{f.preventDefault(),r(J())},children:e.jsx(k,{icon:"bx:x",width:24,color:m()})})]}),e.jsx("div",{className:"p-24",children:e.jsxs(da,{children:[e.jsx(B,{title:n("Settings"),children:e.jsx(ve,{element:s()})}),e.jsx(B,{title:n("Extra"),children:e.jsx(Ce,{element:s()})}),s().field.validation&&e.jsx(B,{title:n("Validation"),children:e.jsx(je,{element:s()})})]})})]}):null},ka=()=>{const a=V(),{form:o}=w(f=>f.formManager),l=f=>{if(!o||!o.meta)return null;const x=o.meta.filter(p=>p.key===f);return x.length===1&&x[0].value?x[0].value:null},r=document.globals.globals.find,u=l("fill_meta_location_belong"),t=l("fill_meta_location_find"),h=l("fill_meta_location_item"),m=()=>{let f=[];switch(u){case Y.CUSTOM_POST_TYPE:const x=r.POST_ID.filter(g=>t===g.label);x.length===1&&x[0].options&&(f=x[0].options);break;case Y.TAXONOMY:const p=r.TERM_ID.filter(g=>t===g.label);p.length===1&&p[0].options&&(f=p[0].options);break;case Y.USER:f=r.USER_ID.filter(g=>g.value!==null);break}return f},s=f=>{a(de({id:f,belong:u,find:t}))};return R.useEffect(()=>{o&&o.meta&&a(de({id:h,belong:u,find:t}))},[o]),!o||m().length===0?null:e.jsx("div",{className:"mb-24",children:e.jsx("div",{className:"acpt-select",children:e.jsxs("select",{defaultValue:h,className:"form-control",onChange:f=>{f.preventDefault(),s(f.target.value)},children:[e.jsx("option",{value:null,children:n("Preview element")}),m()&&m().map((f,x)=>e.jsx("option",{value:f.value,children:f.label},x))]})})})},Te=({fields:a})=>{const{activeElement:o}=w(l=>l.formManager);return e.jsxs("div",{className:"col-3",children:[e.jsx(ka,{}),e.jsx("div",{className:"with-shadow bg-white b-rounded",children:o?e.jsx(Na,{}):e.jsx(be,{fields:a})})]})};Te.propTypes={fields:j.array.isRequired};const Ca=()=>{const{elements:a}=w(h=>h.formManager),[o,l]=R.useState(null);if(Pe({onDragStart:h=>{l(h.active)},onDragCancel:h=>{l(null)},onDragEnd:h=>{l(null)}}),!o)return null;let r=e.jsx("div",{children:"No drag overlay"});const u=o.data.current.fromSidebar,t=o.data.current.fromCanvas;if(u&&(r=e.jsx(P,{field:o.data.current.field,mode:"overlay"})),t){const h=a.filter(m=>m.id===o.id);h.length===1&&(r=e.jsx(P,{field:h[0].field,mode:"dragging"}))}return e.jsx(Le,{children:r})},Qa=()=>{const{id:a}=Ie(),o=V(),{elements:l}=w(x=>x.formManager),{data:r}=w(x=>x.fetchFormFields),u=R.useRef(null);Ae([u],()=>{var x;((x=document.getElementsByClassName("acpt-overlay"))===null||x===void 0?void 0:x.length)>0||o(J())}),R.useEffect(()=>{Me(),aa(n("Form manager")),o(la(a)).then(x=>{const p=x.payload.saved;let g=[];typeof p=="object"&&(p==null?void 0:p.length)>0&&p.map(y=>{const C={id:y.id,metaFieldId:y.metaFieldId,group:y.group,name:y.name,label:y.label,description:y.description,type:y.type,isRequired:y.isRequired,validation:y.validation,isTextual:y.isTextual,isMedia:y.isMedia,extra:y.extra},S={id:y.key,field:C,previewItem:e.jsx(F,{element:{field:C}}),settings:y.settings,validationRules:y.validationRules,fromSidebar:!0};g.push(S)}),o(z({elements:g})),o(sa({form:x.payload.form}))})},[a]);const t=He(Ge(qe)),h=x=>{const{active:p,over:g}=x;if(!p||!g)return;const y=p.data.current.fromSidebar,C=p.data.current.fromCanvas;if(y){const S=g.id,v=ne(8);o(ia({element:{id:v,...p.data.current},position:S}))}if(C){const S=g.id.split("-");let v=S[0];const i=l.findIndex(T=>T.id===p.id);let E=l.findIndex(T=>T.id===v);(S[1]==="bottom"||S[1]==="right")&&(E=E+1);const D=We(l,i,E);o(z({elements:D}))}},m=()=>{o(ra({id:a,data:l})).then(x=>{if(x.payload&&x.payload.success)X.success(n("Form successfully saved"));else{const p=x.error&&x.error.message?x.error.message:"Unknown error";X.error(p)}})};if(!r.fields)return e.jsx(ta,{});const s=[e.jsx(H,{testId:"save-form",style:$.PRIMARY,onClick:()=>{m()},children:n("Save")}),e.jsx(H,{style:$.DANGER,onClick:()=>{o(z({elements:[]}))},children:n("Reset fields")})],f=e.jsxs("div",{className:"i-flex-center s-8",children:[e.jsx("h1",{children:e.jsx("span",{children:r.form.label})}),e.jsx("span",{className:"font-regular text-normal",children:e.jsx("span",{className:"color-gray",children:r.form.name})}),e.jsx(ga,{mode:"edit",classButton:"acpt-btn acpt-btn-secondary acpt-btn-sm",record:r.form})]});return e.jsx(Fe,{actions:s,title:f,crumbs:[{label:n("Forms list"),link:"/forms"},{label:n("Form manager")}],children:e.jsxs(Ue,{onDragEnd:h,collisionDetection:Ke,sensors:t,autoScroll:!0,children:[e.jsxs("div",{className:"container",ref:u,children:[e.jsx(Te,{fields:r.fields}),e.jsx(ya,{})]}),e.jsx(Ca,{})]})})};export{Qa as default};
